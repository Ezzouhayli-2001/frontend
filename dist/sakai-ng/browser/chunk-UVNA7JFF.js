import{a as yt,b as yi,c as pt,d as Fe,e as wt,f as ae,g as Q,h as _e,i as ve,j as Rt,k as fn,l as qt}from"./chunk-246Z63DX.js";import{a as mn,c as Y,g as ei,h as ke,j as st,k as gt,m as je,n as Ne,o as ut,q as Et,r as Nt,s as Ae,t as Mt,u as me,v as ge,x as ti}from"./chunk-USCSO23R.js";import{A as gn,B as un,C as _n,D as vn,E as Cn,a as ce,c as ze,e as ie,f as J,h as bi,j as at,l as se,n as rt,q as Se,t as hn,u as j,w as Ie,x as w,y as Z}from"./chunk-EQ3LOFO2.js";import{Ab as it,Ba as rn,Db as ne,Eb as Ge,Fb as nt,Ga as Ue,Hb as Qe,Ib as Ke,Jb as dn,Lb as $t,Nb as At,Ob as oi,Qb as N,Ta as on,Ua as sn,Vb as ot,Wb as Le,Ya as He,Za as U,b as It,db as be,gb as pn,ja as tn,k as I,kb as oe,la as F,lb as ye,m as re,mb as cn,na as W,o as R,qa as nn,r as q,ra as O,rb as k,sa as _i,ub as ji,vb as we,ya as an,yb as z}from"./chunk-B3PDZLFS.js";import{$ as g,$b as dt,Ab as te,Bb as hi,Cb as M,Eb as A,Fb as m,Gb as zi,Hb as gi,Ib as f,Jb as X,Jc as kt,Kb as Ft,La as o,Lb as Gi,Lc as he,Ma as S,Mb as Tt,N as ht,Nb as Pt,O as pi,Oc as Ji,Pc as Zi,Qb as Oe,Qc as T,Rb as l,Rc as Zt,S as St,Sb as h,Sc as $i,T as Oi,Tb as B,Tc as jt,Ub as Gt,Uc as en,Vb as $e,Wa as L,Wb as x,Xa as mi,Xb as b,Yb as y,Zb as Qi,_a as Ui,_b as V,aa as u,ab as Hi,ac as Ki,ad as ln,bb as E,bc as Xi,bd as vi,da as ki,dd as Ci,ed as fi,fd as xi,ia as ci,ic as p,jc as c,kc as G,lc as Wt,mb as Jt,nb as d,nc as Yi,qa as $,qb as H,rb as di,tc as ui,wb as a,xb as n,yb as C,zb as ee}from"./chunk-6BHMU625.js";import{a as K,b as li,h as ri,j as P}from"./chunk-K4ALXBGI.js";var na=r=>({"ng-invalid ng-dirty":r});function aa(r,v){r&1&&(a(0,"small",11),l(1,"Libelle is obligatory."),n())}var wi=(()=>{class r{constructor(e,i){this.service=e,this.platformId=i,this._submitted=!1,this._errorMessages=new Array,this._activeTab=0,this._validCaisseCode=!0,this._validCaisseLibelle=!0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.initCode()}save(){this.submitted=!0,this.validateForm(),this.errorMessages.length===0?this.saveWithShowOption(!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs sur le formulaire"})}saveWithShowOption(e){this.service.save().subscribe(i=>{i!=null?(this.findPaginatedByCriteria(),this.createDialog=!1,this.submitted=!1,this.item=new yt,this.messageService.add({severity:"success",summary:"",detail:"Caisse Cree avec Success"})):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Element existant"})},i=>{console.log(i),this.messageService.add({severity:"error",summary:"Erreurs",detail:"Une caisse existe d\xE9j\xE0"})})}hideCreateDialog(){this.createDialog=!1,this.setValidation(!0)}setValidation(e){this.validCaisseCode=e,this.validCaisseLibelle=e}validateForm(){this.errorMessages=new Array,this.validateCaisseLibelle()}validateCaisseCode(){this.stringUtilService.isEmpty(this.item.code)?(this.errorMessages.push("Code non valide"),this.validCaisseCode=!1):this.validCaisseCode=!0}validateCaisseLibelle(){this.stringUtilService.isEmpty(this.item.libelle)?(this.errorMessages.push("Libelle non valide"),this.validCaisseLibelle=!1):this.validCaisseLibelle=!0}get validCaisseCode(){return this._validCaisseCode}set validCaisseCode(e){this._validCaisseCode=e}get validCaisseLibelle(){return this._validCaisseLibelle}set validCaisseLibelle(e){this._validCaisseLibelle=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get createDialog(){return this.service.createDialog}set createDialog(e){this.service.createDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatCreate}get dateFormatColumn(){return I.dateFormatCreate}get submitted(){return this._submitted}set submitted(e){this._submitted=e}get errorMessages(){return this._errorMessages==null&&(this._errorMessages=new Array),this._errorMessages}set errorMessages(e){this._errorMessages=e}get validate(){return this.service.validate}set validate(e){this.service.validate=e}get activeTab(){return this._activeTab}set activeTab(e){this._activeTab=e}findPaginatedByCriteria(){this.service.findPaginatedByCriteria(this.criteria).subscribe(e=>{this.items=e.list},e=>console.log(e))}cancel(){this.navigateToList()}navigateToList(){this.router.navigate(["/app/admin/finance/caisse/list"])}initCode(){this.item.code=`CAISSE-${Math.random().toFixed(6).toString()}`}static{this.\u0275fac=function(i){return new(i||r)(S(pt),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-caisse-create-admin"]],standalone:!1,decls:40,vars:46,consts:[[1,"container","mx-auto","p-4"],[1,"bg-white","shadow-md","rounded-lg"],[1,"border-b","p-4","flex","justify-between","items-center","bg-blue-200","text-white"],[1,"text-xl","font-semibold"],[1,"text-white","hover:bg-blue-600","p-2","rounded-md",3,"click"],[1,"pi","pi-times"],[1,"p-4"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","2",1,"text-sm","font-semibold"],[1,"text-red-500"],["type","text","pInputText","","id","2",3,"ngModelChange","placeholder","ngModel","ngClass"],["class","text-red-500",4,"ngIf"],["for","3",1,"text-sm","font-semibold"],["mode","decimal","locale","fr-FR","currency","MAD","id","3",3,"ngModelChange","minFractionDigits","maxFractionDigits","prefix","suffix","min","step","placeholder","ngModel"],[1,"field","flex","flex-col","gap-2"],["for","6",1,"text-sm","font-semibold"],["id","6","appendTo","body",1,"w-full",3,"ngModelChange","showTime","showSeconds","placeholder","ngModel","dateFormat"],[1,"flex","justify-end","space-x-3","p-4","border-t"],["icon","pi pi-check","styleClass","p-button-primary",3,"click","label"],["icon","pi pi-times","styleClass","p-button-secondary",3,"click","label"]],template:function(i,t){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),l(4),p(5,"translate"),n(),a(6,"button",4),A("click",function(){return t.cancel()}),C(7,"i",5),n()(),C(8,"p-toast"),a(9,"div",6)(10,"p-tabView")(11,"p-tabPanel",7),p(12,"translate"),a(13,"div",8)(14,"div",9)(15,"label",10),l(16),p(17,"translate"),a(18,"span",11),l(19,"*"),n()(),a(20,"input",12),p(21,"translate"),y("ngModelChange",function(_){return b(t.item.libelle,_)||(t.item.libelle=_),_}),n(),E(22,aa,2,0,"small",13),n(),a(23,"div",9)(24,"label",14),l(25),p(26,"translate"),n(),a(27,"p-inputNumber",15),p(28,"translate"),y("ngModelChange",function(_){return b(t.item.solde,_)||(t.item.solde=_),_}),n()(),a(29,"div",16)(30,"label",17),l(31),p(32,"translate"),n(),a(33,"p-calendar",18),p(34,"translate"),y("ngModelChange",function(_){return b(t.item.dateCreation,_)||(t.item.dateCreation=_),_}),n()()()()()(),a(35,"div",19)(36,"p-button",20),p(37,"translate"),A("click",function(){return t.save()}),n(),a(38,"p-button",21),p(39,"translate"),A("click",function(){return t.cancel()}),n()()()()),i&2&&(o(4),h(c(5,24,"caisse.tabPan")),o(7),f("header",c(12,26,"caisse.tabPan")),o(5),h(c(17,28,"caisse.libelle")),o(4),f("placeholder",c(21,30,"caisse.libelle")),x("ngModel",t.item.libelle),d("ngClass",dt(44,na,!t.validCaisseLibelle)),o(2),d("ngIf",!t.validCaisseLibelle),o(3),h(c(26,32,"caisse.solde")),o(2),f("placeholder",c(28,34,"caisse.solde")),d("minFractionDigits",2)("maxFractionDigits",4)("prefix","")("suffix"," MAD")("min",0)("step",.01),x("ngModel",t.item.solde),o(4),h(c(32,36,"Date de cr\xE9ation")),o(2),f("placeholder",c(34,38,"Date de cr\xE9ation")),f("dateFormat",t.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",t.item.dateCreation),o(3),f("label",c(37,40,"validate")),o(2),f("label",c(39,42,"cancel")))},dependencies:[kt,he,we,U,ye,re,R,q,J,ie,Y,z,j],encapsulation:2})}}return r})();var oa=["header"],sa=["icons"],la=["content"],pa=["footer"],ca=["headericons"],ma=["contentWrapper"],da=["*",[["p-header"]],[["p-footer"]]],ha=["*","p-header","p-footer"],ga=(r,v)=>({"p-panel p-component":!0,"p-panel-toggleable":r,"p-panel-expanded":v}),ua=r=>({transitionParams:r,height:"0",opacity:"0"}),_a=r=>({value:"hidden",params:r}),va=r=>({transitionParams:r,height:"*",opacity:"1"}),Ca=r=>({value:"visible",params:r}),fa=(r,v,e)=>({"p-panel-icons-start":r,"p-panel-icons-end":v,"p-panel-icons-center":e}),xa=r=>({$implicit:r});function ba(r,v){if(r&1&&(a(0,"span",12),l(1),n()),r&2){let e=m(2);Jt("id",e.id+"_header"),o(),h(e._header)}}function ya(r,v){r&1&&hi(0)}function wa(r,v){}function Sa(r,v){r&1&&E(0,wa,0,0,"ng-template")}function Ia(r,v){if(r&1&&C(0,"span"),r&2){let e=m(6);di(e.expandIcon)}}function Aa(r,v){r&1&&C(0,"MinusIcon")}function Ea(r,v){if(r&1&&(ee(0),E(1,Ia,1,2,"span",16)(2,Aa,1,0,"MinusIcon",14),te()),r&2){let e=m(5);o(),d("ngIf",e.expandIcon),o(),d("ngIf",!e.expandIcon)}}function Ma(r,v){if(r&1&&C(0,"span"),r&2){let e=m(6);di(e.collapseIcon)}}function Ta(r,v){r&1&&C(0,"PlusIcon")}function Pa(r,v){if(r&1&&(ee(0),E(1,Ma,1,2,"span",16)(2,Ta,1,0,"PlusIcon",14),te()),r&2){let e=m(5);o(),d("ngIf",e.collapseIcon),o(),d("ngIf",!e.collapseIcon)}}function Da(r,v){if(r&1&&(ee(0),E(1,Ea,3,2,"ng-container",14)(2,Pa,3,2,"ng-container",14),te()),r&2){let e=m(4);o(),d("ngIf",!e.collapsed),o(),d("ngIf",e.collapsed)}}function Va(r,v){}function Ba(r,v){r&1&&E(0,Va,0,0,"ng-template")}function La(r,v){if(r&1&&E(0,Da,3,2,"ng-container",14)(1,Ba,1,0,null,15),r&2){let e=m(3);d("ngIf",!e.headerIconsTemplate&&!e._headerIconsTemplate&&!(e.toggleButtonProps!=null&&e.toggleButtonProps.icon)),o(),d("ngTemplateOutlet",e.headerIconsTemplate||e._headerIconsTemplate)("ngTemplateOutletContext",dt(3,xa,e.collapsed))}}function Fa(r,v){if(r&1){let e=M();a(0,"p-button",13),A("click",function(t){g(e);let s=m(2);return u(s.onIconClick(t))})("keydown",function(t){g(e);let s=m(2);return u(s.onKeyDown(t))}),E(1,La,2,5,"ng-template",null,1,Yi),n()}if(r&2){let e=m(2);d("text",!0)("rounded",!0)("buttonProps",e.toggleButtonProps),Jt("id",e.id+"_header")("aria-label",e.buttonAriaLabel)("aria-controls",e.id+"_content")("aria-expanded",!e.collapsed)}}function Wa(r,v){if(r&1){let e=M();a(0,"div",8),A("click",function(t){g(e);let s=m();return u(s.onHeaderClick(t))}),E(1,ba,2,2,"span",9),gi(2,1),E(3,ya,1,0,"ng-container",6),a(4,"div",10),E(5,Sa,1,0,null,6)(6,Fa,3,7,"p-button",11),n()()}if(r&2){let e=m();Jt("id",e.id+"-titlebar"),o(),d("ngIf",e._header),o(2),d("ngTemplateOutlet",e.headerTemplate||e._headerTemplate),o(),d("ngClass",Xi(6,fa,e.iconPos==="start",e.iconPos==="end",e.iconPos==="center")),o(),d("ngTemplateOutlet",e.iconTemplate||e._iconTemplate),o(),d("ngIf",e.toggleable)}}function ka(r,v){r&1&&hi(0)}function ja(r,v){r&1&&hi(0)}function Na(r,v){if(r&1&&(a(0,"div",17),gi(1,2),E(2,ja,1,0,"ng-container",6),n()),r&2){let e=m();o(2),d("ngTemplateOutlet",e.footerTemplate||e._footerTemplate)}}var Ra=({dt:r})=>`
.p-panel {
    border: 1px solid ${r("panel.border.color")};
    border-radius: ${r("panel.border.radius")};
    background: ${r("panel.background")};
    color: ${r("panel.color")};
}

.p-panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: ${r("panel.header.padding")};
    background: ${r("panel.header.background")};
    color: ${r("panel.header.color")};
    border-style: solid;
    border-width: ${r("panel.header.border.width")};
    border-color: ${r("panel.header.border.color")};
    border-radius: ${r("panel.header.border.radius")};
}

.p-panel-toggleable .p-panel-header {
    padding: ${r("panel.toggleable.header.padding")};
}

.p-panel-title {
    line-height: 1;
    font-weight: ${r("panel.title.font.weight")};
}

.p-panel-content {
    padding: ${r("panel.content.padding")};
}

.p-panel-footer {
    padding: ${r("panel.footer.padding")};
}

/* For PrimeNG */
.p-panel-toggleable.p-panel-expanded > .p-panel-content-container:not(.ng-animating) {
    overflow: visible
}

.p-panel-toggleable .p-panel-content-container {
    overflow: hidden;
}
`,qa={root:({props:r})=>["p-panel p-component",{"p-panel-toggleable":r.toggleable}],header:"p-panel-header",title:"p-panel-title",headerActions:"p-panel-header-actions",pcToggleButton:"p-panel-toggle-button",contentContainer:"p-panel-content-container",content:"p-panel-content",footer:"p-panel-footer"},xn=(()=>{class r extends an{name="panel";theme=Ra;classes=qa;static \u0275fac=(()=>{let e;return function(t){return(e||(e=ki(r)))(t||r)}})();static \u0275prov=ht({token:r,factory:r.\u0275fac})}return r})();var Dt=(()=>{class r extends rn{toggleable;_header;collapsed;style;styleClass;iconPos="end";expandIcon;collapseIcon;showHeader=!0;toggler="icon";transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)";toggleButtonProps;collapsedChange=new ci;onBeforeToggle=new ci;onAfterToggle=new ci;footerFacet;animating;headerTemplate;iconTemplate;contentTemplate;footerTemplate;headerIconsTemplate;_headerTemplate;_iconTemplate;_contentTemplate;_footerTemplate;_headerIconsTemplate;contentWrapperViewChild;id=tn("pn_id_");get buttonAriaLabel(){return this._header}_componentStyle=Oi(xn);onHeaderClick(e){this.toggler==="header"&&this.toggle(e)}onIconClick(e){this.toggler==="icon"&&this.toggle(e)}toggle(e){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:e,collapsed:this.collapsed}),this.toggleable&&(this.collapsed?this.expand():this.collapse()),this.cd.markForCheck(),e.preventDefault()}expand(){this.collapsed=!1,this.collapsedChange.emit(this.collapsed),this.updateTabIndex()}collapse(){this.collapsed=!0,this.collapsedChange.emit(this.collapsed),this.updateTabIndex()}getBlockableElement(){return this.el.nativeElement.children[0]}updateTabIndex(){this.contentWrapperViewChild&&this.contentWrapperViewChild.nativeElement.querySelectorAll('input, button, select, a, textarea, [tabindex]:not([tabindex="-1"])').forEach(i=>{this.collapsed?i.setAttribute("tabindex","-1"):i.removeAttribute("tabindex")})}onKeyDown(e){(e.code==="Enter"||e.code==="Space")&&(this.toggle(e),e.preventDefault())}onToggleDone(e){this.animating=!1,this.onAfterToggle.emit({originalEvent:e,collapsed:this.collapsed})}templates;ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this._headerTemplate=e.template;break;case"content":this._contentTemplate=e.template;break;case"footer":this._footerTemplate=e.template;break;case"icons":this._iconTemplate=e.template;break;case"headericons":this._headerIconsTemplate=e.template;break;default:this._contentTemplate=e.template;break}})}static \u0275fac=(()=>{let e;return function(t){return(e||(e=ki(r)))(t||r)}})();static \u0275cmp=L({type:r,selectors:[["p-panel"]],contentQueries:function(i,t,s){if(i&1&&(Ft(s,nn,5),Ft(s,oa,4),Ft(s,sa,4),Ft(s,la,4),Ft(s,pa,4),Ft(s,ca,4),Ft(s,O,4)),i&2){let _;Tt(_=Pt())&&(t.footerFacet=_.first),Tt(_=Pt())&&(t.headerTemplate=_.first),Tt(_=Pt())&&(t.iconTemplate=_.first),Tt(_=Pt())&&(t.contentTemplate=_.first),Tt(_=Pt())&&(t.footerTemplate=_.first),Tt(_=Pt())&&(t.headerIconsTemplate=_.first),Tt(_=Pt())&&(t.templates=_)}},viewQuery:function(i,t){if(i&1&&Gi(ma,5),i&2){let s;Tt(s=Pt())&&(t.contentWrapperViewChild=s.first)}},inputs:{toggleable:[2,"toggleable","toggleable",ui],_header:[0,"header","_header"],collapsed:[2,"collapsed","collapsed",ui],style:"style",styleClass:"styleClass",iconPos:"iconPos",expandIcon:"expandIcon",collapseIcon:"collapseIcon",showHeader:[2,"showHeader","showHeader",ui],toggler:"toggler",transitionOptions:"transitionOptions",toggleButtonProps:"toggleButtonProps"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},features:[Qi([xn]),Hi,Ui],ngContentSelectors:ha,decls:8,vars:25,consts:[["contentWrapper",""],["icon",""],[3,"ngClass","ngStyle"],["class","p-panel-header",3,"click",4,"ngIf"],["role","region",1,"p-panel-content-container",3,"id"],[1,"p-panel-content"],[4,"ngTemplateOutlet"],["class","p-panel-footer",4,"ngIf"],[1,"p-panel-header",3,"click"],["class","p-panel-title",4,"ngIf"],[1,"p-panel-icons",3,"ngClass"],["severity","secondary","type","button","role","button","styleClass","p-panel-header-icon p-panel-toggler p-link",3,"text","rounded","buttonProps","click","keydown",4,"ngIf"],[1,"p-panel-title"],["severity","secondary","type","button","role","button","styleClass","p-panel-header-icon p-panel-toggler p-link",3,"click","keydown","text","rounded","buttonProps"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"class",4,"ngIf"],[1,"p-panel-footer"]],template:function(i,t){if(i&1){let s=M();zi(da),a(0,"div",2),E(1,Wa,7,10,"div",3),a(2,"div",4),A("@panelContent.done",function(D){return g(s),u(t.onToggleDone(D))}),a(3,"div",5,0),gi(5),E(6,ka,1,0,"ng-container",6),n(),E(7,Na,3,1,"div",7),n()()}i&2&&(di(t.styleClass),d("ngClass",Ki(14,ga,t.toggleable,!t.collapsed&&t.toggleable))("ngStyle",t.style),Jt("id",t.id)("data-pc-name","panel"),o(),d("ngIf",t.showHeader),o(),d("id",t.id+"_content")("@panelContent",t.collapsed?dt(19,_a,dt(17,ua,t.animating?t.transitionOptions:"0ms")):dt(23,Ca,dt(21,va,t.animating?t.transitionOptions:"0ms"))),Jt("aria-labelledby",t.id+"_header")("aria-hidden",t.collapsed)("tabindex",t.collapsed?"-1":void 0),o(4),d("ngTemplateOutlet",t.contentTemplate||t._contentTemplate),o(),d("ngIf",t.footerFacet||t.footerTemplate||t._footerTemplate))},dependencies:[en,kt,he,Zi,Ji,sn,on,cn,ye,_i],encapsulation:2,data:{animation:[ln("panelContent",[fi("hidden",Ci({height:"0"})),fi("void",Ci({height:"{{height}}"}),{params:{height:"0"}}),fi("visible",Ci({height:"*"})),xi("visible <=> hidden",[vi("{{transitionParams}}")]),xi("void => hidden",vi("{{transitionParams}}")),xi("void => visible",vi("{{transitionParams}}"))])]},changeDetection:0})}return r})(),km=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=mi({type:r});static \u0275inj=pi({imports:[Dt,_i,_i]})}return r})();var Oa=()=>({width:"70vw"}),Ua=()=>[5,10,25,50];function Ha(r,v){if(r&1&&(a(0,"div",5)(1,"div",6)(2,"div",7)(3,"h5",8),C(4,"i",9),l(5," Informations de la Caisse "),n(),a(6,"div",10)(7,"div",11)(8,"label",12),l(9),p(10,"translate"),n(),C(11,"input",13),p(12,"translate"),n(),a(13,"div",11)(14,"label",12),l(15),p(16,"translate"),n(),C(17,"p-inputNumber",14),p(18,"translate"),n(),a(19,"div",11)(20,"label",15),l(21),p(22,"translate"),n(),C(23,"p-inputNumber",16),p(24,"translate"),n(),a(25,"div",11)(26,"label",17),l(27),p(28,"translate"),n(),C(29,"p-inputNumber",18),p(30,"translate"),n(),a(31,"div",11)(32,"label",19),l(33),p(34,"translate"),n(),C(35,"input",20),p(36,"translate"),n()()()()()),r&2){let e=m(2);o(9),h(c(10,20,"Nom de Compte")),o(2),f("placeholder",c(12,22,"Nom")),d("disabled",!0)("ngModel",e.compte.code),o(4),h(c(16,24,"compte.solde")),o(2),f("placeholder",c(18,26,"compte.solde")),d("disabled",!0)("ngModel",e.compte.solde),o(4),h(c(22,28,"compte.debit")),o(2),f("placeholder",c(24,30,"compte.debit")),d("disabled",!0)("ngModel",e.compte.debit),o(4),h(c(28,32,"compte.credit")),o(2),f("placeholder",c(30,34,"compte.credit")),d("disabled",!0)("ngModel",e.compte.credit),o(4),h(c(34,36,"Date de cr\xE9ation")),o(2),f("placeholder",c(36,38,"Date de cr\xE9ation")),d("disabled",!0)("ngModel",e.compte.dateCreation)}}function za(r,v){if(r&1){let e=M();a(0,"p-panel",33)(1,"div",10)(2,"div",11)(3,"label",34),l(4),p(5,"translate"),n(),a(6,"p-calendar",35),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.dateFrom,t)||(s.transactionCriteria.dateFrom=t),u(t)}),n()(),a(7,"div",11)(8,"label",34),l(9),p(10,"translate"),n(),a(11,"p-calendar",35),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.dateTo,t)||(s.transactionCriteria.dateTo=t),u(t)}),n()(),a(12,"div",11)(13,"label",34),l(14),p(15,"translate"),n(),a(16,"p-inputNumber",36),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.montantMin,t)||(s.transactionCriteria.montantMin=t),u(t)}),n()(),a(17,"div",11)(18,"label",34),l(19),p(20,"translate"),n(),a(21,"p-inputNumber",36),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.montantMax,t)||(s.transactionCriteria.montantMax=t),u(t)}),n()(),a(22,"div",11)(23,"label",34),l(24),p(25,"translate"),n(),a(26,"input",37),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.description,t)||(s.transactionCriteria.description=t),u(t)}),n()(),a(27,"div",11)(28,"label",34),l(29),p(30,"translate"),n(),a(31,"p-dropdown",38),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.typeTransaction,t)||(s.transactionCriteria.typeTransaction=t),u(t)}),n()(),a(32,"div",11)(33,"label",34),l(34),p(35,"translate"),n(),a(36,"p-dropdown",38),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.modePaiement,t)||(s.transactionCriteria.modePaiement=t),u(t)}),n()(),a(37,"div",39)(38,"div",40)(39,"button",41),A("click",function(){g(e);let t=m(3);return u(t.findPaginatedTransactions())}),n(),a(40,"button",42),A("click",function(){g(e);let t=m(3);return u(t.resetTransactionCriteria())}),n()()()()()}if(r&2){let e=m(3);d("showHeader",!1),o(4),h(c(5,21,"Date Min")),o(2),f("dateFormat",e.dateFormat),x("ngModel",e.transactionCriteria.dateFrom),o(3),h(c(10,23,"Date Max")),o(2),f("dateFormat",e.dateFormat),x("ngModel",e.transactionCriteria.dateTo),o(3),h(c(15,25,"Montant Min")),o(2),x("ngModel",e.transactionCriteria.montantMin),o(3),h(c(20,27,"Montant Max")),o(2),x("ngModel",e.transactionCriteria.montantMax),o(3),h(c(25,29,"Description")),o(2),x("ngModel",e.transactionCriteria.description),o(3),h(c(30,31,"Type transaction")),o(2),d("options",e.typeTransactions),x("ngModel",e.transactionCriteria.typeTransaction),d("showClear",!0),o(3),h(c(35,33,"Mode paiement")),o(2),d("options",e.modePaiements),x("ngModel",e.transactionCriteria.modePaiement),d("showClear",!0)}}function Ga(r,v){r&1&&(a(0,"tr")(1,"th"),l(2,"Date"),n(),a(3,"th"),l(4,"Credit"),n(),a(5,"th"),l(6,"Debit"),n(),a(7,"th"),l(8,"Description"),n(),a(9,"th"),l(10,"Type transaction"),n(),a(11,"th"),l(12,"Mode paiement"),n(),a(13,"th"),l(14,"Compte source"),n(),a(15,"th"),l(16,"Compte destination"),n()())}function Qa(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.montant," ")}}function Ka(r,v){r&1&&(ee(0),l(1," --- "),te())}function Xa(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.montant," ")}}function Ya(r,v){r&1&&(ee(0),l(1," --- "),te())}function Ja(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.compteLocataire==null||e.compteLocataire.locataire==null?null:e.compteLocataire.locataire.fullName," ")}}function Za(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.compteSource==null?null:e.compteSource.code," ")}}function $a(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),Gt(" ",e.CompteInstantanee==null||e.CompteInstantanee.locataire==null?null:e.CompteInstantanee.locataire.nom," ",e.CompteInstantanee==null||e.CompteInstantanee.locataire==null?null:e.CompteInstantanee.locataire.prenom," ")}}function er(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.compteLocataire==null||e.compteLocataire.locataire==null?null:e.compteLocataire.locataire.fullName," ")}}function tr(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.compteDestination==null?null:e.compteDestination.code," ")}}function ir(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.CompteInstantanee==null||e.CompteInstantanee.locataire==null?null:e.CompteInstantanee.locataire.fullName," ")}}function nr(r,v){if(r&1&&(a(0,"tr")(1,"td"),l(2),p(3,"date"),n(),a(4,"td",43),E(5,Qa,2,1,"ng-container",44)(6,Ka,2,0,"ng-container",44),n(),a(7,"td",45),E(8,Xa,2,1,"ng-container",44)(9,Ya,2,0,"ng-container",44),n(),a(10,"td"),l(11),p(12,"slice"),n(),a(13,"td"),C(14,"p-tag",46),n(),a(15,"td"),C(16,"p-tag",46),n(),a(17,"td"),E(18,Ja,2,1,"ng-container",44)(19,Za,2,1,"ng-container",44)(20,$a,2,2,"ng-container",44),n(),a(21,"td"),E(22,er,2,1,"ng-container",44)(23,tr,2,1,"ng-container",44)(24,ir,2,1,"ng-container",44),n()()),r&2){let e=v.$implicit,i=m(3);o(2),h(G(3,18,e.date,i.dateFormatColumn)),o(3),d("ngIf",(e.typePaiement==null?null:e.typePaiement.label)==="Credit"),o(),d("ngIf",(e.typePaiement==null?null:e.typePaiement.label)!=="Credit"),o(2),d("ngIf",(e.typePaiement==null?null:e.typePaiement.label)==="Debit"),o(),d("ngIf",(e.typePaiement==null?null:e.typePaiement.label)!=="Debit"),o(2),h(Wt(12,21,e.description,0,50)),o(3),d("severity",e.typeTransaction==null?null:e.typeTransaction.code)("value",e.typeTransaction==null?null:e.typeTransaction.label)("rounded",!0),o(2),d("severity",e.modePaiement==null?null:e.modePaiement.style)("value",e.modePaiement==null?null:e.modePaiement.label)("rounded",!0),o(2),d("ngIf",e.compteLocataire!=null&&(e.typeTransaction==null?null:e.typeTransaction.label)!=="avoir"),o(),d("ngIf",e.compteSource!=null),o(),d("ngIf",(e.typeTransaction==null?null:e.typeTransaction.label)==="reglement"),o(2),d("ngIf",e.compteLocataire!=null&&(e.typeTransaction==null?null:e.typeTransaction.label)==="avoir"),o(),d("ngIf",e.compteDestination!==null),o(),d("ngIf",e.CompteInstantanee!==null)}}function ar(r,v){if(r&1&&(a(0,"tr",47)(1,"td",48),l(2,"Total:"),n(),a(3,"td",49),l(4),n(),a(5,"td",50),l(6),n(),C(7,"td",51),n(),a(8,"tr",52)(9,"td",48),l(10,"Solde :"),n(),a(11,"td",53),l(12),n(),C(13,"td",51),n()),r&2){let e=m(3);o(4),h(e.totalCredits),o(2),h(e.totalDebits),o(6),h(e.compte.soldeInitial+(e.totalCredits-e.totalDebits))}}function rr(r,v){r&1&&(a(0,"tr")(1,"td",54),C(2,"i",55),l(3," Aucune transaction disponible pour cette banque "),n()())}function or(r,v){if(r&1){let e=M();a(0,"div",5)(1,"div",6)(2,"div",21)(3,"div",22)(4,"h5",23),C(5,"i",24),l(6," Historique des transactions "),n(),a(7,"div",25)(8,"button",26),A("click",function(){g(e);let t=m(2);return u(t.showTransactionSearch())}),n(),C(9,"p-splitButton",27),n()(),E(10,za,41,35,"p-panel",28),a(11,"p-table",29),p(12,"translate"),E(13,Ga,17,0,"ng-template",30)(14,nr,25,25,"ng-template",31)(15,ar,14,3,"ng-template",2)(16,rr,4,0,"ng-template",32),n()()()()}if(r&2){let e=m(2);o(9),d("model",e.transactionExcelPdfButons),o(),d("ngIf",e.transactionFindByCriteriaShow),o(),f("currentPageReportTemplate",c(12,8,"Affichage de {first} \xE0 {last} sur {totalRecords} \xE9l\xE9ments")),d("value",e.transactions)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("rowsPerPageOptions",V(10,Ua))}}function sr(r,v){if(r&1&&(a(0,"p-tabView")(1,"p-tabPanel",3),p(2,"translate"),E(3,Ha,37,40,"div",4),n(),a(4,"p-tabPanel",3),p(5,"translate"),E(6,or,17,11,"div",4),n()()),r&2){let e=m();o(),f("header",c(2,4,"caisse.tabPan")),o(2),d("ngIf",e.compte),o(),f("header",c(5,6,"Historique des transactions")),o(2),d("ngIf",e.compte)}}function lr(r,v){if(r&1){let e=M();a(0,"div",56)(1,"div")(2,"button",57),A("click",function(){g(e);let t=m();return u(t.hideViewDialog())}),C(3,"i",58),l(4," Annuler "),n()()()}}var yn=(()=>{class r{constructor(e,i,t,s,_,D){this.compteService=e,this.transactionService=i,this.typeTransactionService=t,this.modePaiementService=s,this.exportService=_,this.service=D,this._submitted=!1,this._errorMessages=new Array,this.transactionFindByCriteriaShow=!1,this.transactionExportData=[],this.transactionCriteriaData=[],this._transactionFileName="Transaction",this.totalCredits=0,this.totalDebits=0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.initTransactionExport(),this.loadReferenceDataForTransaction()}loadReferenceDataForTransaction(){this.typeTransactionService.findAll().subscribe(e=>this.typeTransactions=e),this.modePaiementService.findAll().subscribe(e=>this.modePaiements=e)}showTransactionSearch(){this.transactionFindByCriteriaShow=!this.transactionFindByCriteriaShow}resetTransactionCriteria(){this.transactionCriteria=new Mt,this.findPaginatedTransactions()}findPaginatedTransactions(){this.transactionService.findPaginatedByCriteria(this.transactionCriteria).subscribe(e=>{this.compte?this.transactions=e.list.filter(i=>i?.compteSource?.id==this.compte?.id||i?.compteDestination?.id==this.compte?.id):this.transactions=e.list,this.calculateTotals()},e=>console.log(e))}initTransactionExport(){this.transactionExcelPdfButons=[{label:"CSV",icon:"pi pi-file",command:()=>{this.prepareTransactionColumnExport(),this.exportService.exporterCSV(this.transactionCriteriaData,this.transactionExportData,this._transactionFileName)}},{label:"XLS",icon:"pi pi-file-excel",command:()=>{this.prepareTransactionColumnExport(),this.exportService.exporterExcel(this.transactionCriteriaData,this.transactionExportData,this._transactionFileName)}},{label:"PDF",icon:"pi pi-file-pdf",command:()=>{this.prepareTransactionColumnExport(),this.exportService.exporterPdf(this.transactionCriteriaData,this.transactionExportData,this._transactionFileName)}}]}prepareTransactionColumnExport(){this.transactionExportData=this.transactions.map(i=>{let t=0,s=0;i.typePaiement?.label==="Credit"&&(t=i.montant),i.typePaiement?.label==="Debit"&&(s=i.montant);let _="";i.typeTransaction?.label==="charge"||i.typeTransaction?.label==="avoir"?_=i.compteSource?.code||"":i.typeTransaction?.label==="reglement"&&(_=`${i.CompteInstantanee?.locataire?.nom||""} ${i.CompteInstantanee?.locataire?.prenom||""}`.trim());let D="";return i.typeTransaction?.label==="charge"||i.typeTransaction?.label==="reglement"?D=i.compteDestination?.code||"":i.typeTransaction?.label==="avoir"&&(D=`${i.CompteInstantanee?.locataire?.nom||""} ${i.CompteInstantanee?.locataire?.prenom||""}`.trim()),{Date:this.datePipe.transform(i.date,this.dateFormatColumn)||"",Cr\u00E9dit:t,D\u00E9bit:s,Description:(i.description||"").slice(0,50),"Type transaction":i.typeTransaction?.label||"","Mode paiement":i.modePaiement?.label||"","Compte source":_,"Compte destination":D}}),this.transactionExportData.push({Date:"TOTAL",Cr\u00E9dit:this.totalCredits,D\u00E9bit:this.totalDebits,Description:"","Type transaction":"","Mode paiement":"","Compte source":"","Compte destination":""});let e=this.totalCredits-this.totalDebits;this.transactionExportData.push({Date:"SOLDE",Cr\u00E9dit:e,D\u00E9bit:"",Description:"","Type transaction":"","Mode paiement":"","Compte source":"","Compte destination":""}),this.transactionCriteriaData=[{"Date Min":this.transactionCriteria.dateFrom?this.datePipe.transform(this.transactionCriteria.dateFrom,this.dateFormatColumn):I.emptyForExport,"Date Max":this.transactionCriteria.dateTo?this.datePipe.transform(this.transactionCriteria.dateTo,this.dateFormatColumn):I.emptyForExport,"Montant Min":this.transactionCriteria.montantMin||I.emptyForExport,"Montant Max":this.transactionCriteria.montantMax||I.emptyForExport,Description:this.transactionCriteria.description||I.emptyForExport,"Type transaction":this.transactionCriteria.typeTransaction?.label||I.emptyForExport,"Mode paiement":this.transactionCriteria.modePaiement?.label||I.emptyForExport}]}calculateTotals(){this.totalCredits=0,this.totalDebits=0,this.transactions&&this.transactions.length>0&&this.transactions.forEach(e=>{e.typePaiement?.label==="Credit"?(this.totalCredits+=Number(e.montant||0),console.log(e.montant)):e.typePaiement?.label==="Debit"&&(this.totalDebits+=Number(e.montant||0))})}get transactionCriteria(){return this.transactionService.criteria}set transactionCriteria(e){this.transactionService.criteria=e}hideViewDialog(){this.item=new yt,this.viewDialog=!1}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get viewDialog(){return this.service.viewDialog}set viewDialog(e){this.service.viewDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatView}get dateFormatColumn(){return I.dateFormatList}get compte(){return this.compteService.item}set compte(e){this.compteService.item=e}get transactions(){return this.transactionService.items}set transactions(e){this.transactionService.items=e}static{this.\u0275fac=function(i){return new(i||r)(S(Q),S(me),S(ge),S(ti),S(Ie),S(pt))}}static{this.\u0275cmp=L({type:r,selectors:[["app-caisse-view-admin"]],inputs:{totalCredits:"totalCredits",totalDebits:"totalDebits"},standalone:!1,decls:4,vars:8,consts:[["closable","false","styleClass","p-fluid banque-view-dialog",3,"visibleChange","visible","header","modal"],["pTemplate","content"],["pTemplate","footer"],[3,"header"],["class","grid",4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card","mb-4"],[1,"mb-3","font-medium"],[1,"pi","pi-info-circle","mr-2"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"field","flex","flex-col","gap-2"],["for","1",1,"text-sm","font-semibold"],["type","text","pInputText","","autofocus","","id","1",3,"disabled","placeholder","ngModel"],["id","1",3,"disabled","placeholder","ngModel"],["for","2",1,"text-sm","font-semibold"],["id","2",3,"disabled","placeholder","ngModel"],["for","3",1,"text-sm","font-semibold"],["id","3",3,"disabled","placeholder","ngModel"],["for","4",1,"text-sm","font-semibold"],["type","text","pInputText","","id","4",1,"w-full",3,"disabled","placeholder","ngModel"],[1,"card"],[1,"flex","flex-wrap","gap-2","align-items-center","justify-content-between","mb-2"],[1,"m-0","font-medium"],[1,"pi","pi-history","mr-2"],[1,"flex","align-items-center","gap-2"],["pButton","","pRipple","","label","Recherche","icon","pi pi-search",1,"p-button-outlined",3,"click"],["label","Exporter","icon","pi pi-download","styleClass","p-button-outlined",3,"model"],["styleClass","mb-2",3,"showHeader",4,"ngIf"],["styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","paginator","rows","showCurrentPageReport","currentPageReportTemplate","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["styleClass","mb-2",3,"showHeader"],[1,"text-sm","font-medium"],[1,"w-full",3,"ngModelChange","ngModel","dateFormat"],[1,"w-full",3,"ngModelChange","ngModel"],["type","text","pInputText","",1,"w-full",3,"ngModelChange","ngModel"],["optionLabel","label","placeholder","S\xE9lectionner",1,"w-full",3,"ngModelChange","options","ngModel","showClear"],[1,"flex","justify-content-end"],[1,"flex","gap-2"],["pButton","","pRipple","","label","Rechercher","icon","pi pi-search",1,"p-button-primary",3,"click"],["pButton","","pRipple","","label","R\xE9initialiser","icon","pi pi-times",1,"p-button-outlined",3,"click"],[1,"text-green-500","font-medium"],[4,"ngIf"],[1,"text-red-500","font-medium"],[3,"severity","value","rounded"],[1,"text-center","bg-blue-700-400"],["colspan","1",1,"text-left","font-bold"],[1,"text-green-500","font-bold"],[1,"text-orange-500","font-bold"],["colspan","5"],[1,"text-center","bg-gray-400"],[1,"text-orange-500","font-bold","w-2"],["colspan","8",1,"text-center","p-4"],[1,"pi","pi-info-circle","text-primary","mr-2"],[1,"flex","justify-end","p-4"],[1,"border","border-gray-400","font-semibold","py-2","px-4","rounded","shadow",3,"click"],[1,"pi","pi-times"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),p(1,"translate"),y("visibleChange",function(_){return b(t.viewDialog,_)||(t.viewDialog=_),_}),E(2,sr,7,8,"ng-template",1)(3,lr,5,0,"ng-template",2),n()),i&2&&(H(V(7,Oa)),f("header",c(1,5,"caisse.tabPan")),x("visible",t.viewDialog),d("modal",!0))},dependencies:[he,O,ne,se,U,oe,re,R,q,Se,ce,J,ie,Y,Dt,z,gt,be,jt,T,j],styles:["[_nghost-%COMP%]     .banque-view-dialog .p-dialog-content{padding:0}[_nghost-%COMP%]     .banque-view-dialog .p-tabview .p-tabview-nav{background:#f8f9fa;border-bottom:1px solid #dee2e6;padding:0 1rem}[_nghost-%COMP%]     .banque-view-dialog .p-tabview .p-tabview-nav li .p-tabview-nav-link{padding:1rem;font-weight:600}[_nghost-%COMP%]     .banque-view-dialog .p-tabview .p-tabview-nav li .p-tabview-nav-link:not(.p-disabled):focus{box-shadow:none}[_nghost-%COMP%]     .banque-view-dialog .p-tabview .p-tabview-panels{padding:1.5rem}[_nghost-%COMP%]     .banque-view-dialog .card{background-color:#fff;border-radius:.5rem;box-shadow:0 2px 4px #0000000d;padding:1.25rem}[_nghost-%COMP%]     .banque-view-dialog .card h5{color:#495057;border-bottom:1px solid #e9ecef;padding-bottom:.75rem}[_nghost-%COMP%]     .banque-view-dialog .field{margin-bottom:1rem}[_nghost-%COMP%]     .banque-view-dialog .field label{display:block;margin-bottom:.5rem;color:#555}[_nghost-%COMP%]     .banque-view-dialog .field input, [_nghost-%COMP%]     .banque-view-dialog .field textarea{width:100%;background-color:#f9f9f9}[_nghost-%COMP%]     .banque-view-dialog .p-datatable .p-datatable-header{background-color:#f8f9fa;border:1px solid #e9ecef}[_nghost-%COMP%]     .banque-view-dialog .p-datatable th{background-color:#f8f9fa;color:#495057;font-weight:600;padding:.75rem 1rem}[_nghost-%COMP%]     .banque-view-dialog .p-datatable td{padding:.75rem 1rem}[_nghost-%COMP%]     .banque-view-dialog .p-datatable .text-green-500{color:#4caf50}[_nghost-%COMP%]     .banque-view-dialog .p-datatable .text-red-500{color:#f44336}[_nghost-%COMP%]     .banque-view-dialog .p-button.p-button-outlined:focus{box-shadow:none}@media screen and (max-width: 768px){[_nghost-%COMP%]     .banque-view-dialog .p-tabview .p-tabview-panels{padding:1rem}[_nghost-%COMP%]     .banque-view-dialog .card{padding:1rem}}"]})}}return r})();var cr=()=>({width:"70vw"}),mr=r=>({"ng-invalid ng-dirty":r});function dr(r,v){r&1&&(a(0,"small",7),l(1,"Libelle is obligatory."),n())}function hr(r,v){if(r&1){let e=M();a(0,"p-tabView")(1,"p-tabPanel",3),p(2,"translate"),a(3,"div",4)(4,"div",5)(5,"label",6),l(6),p(7,"translate"),a(8,"span",7),l(9,"*"),n()(),a(10,"input",8),p(11,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.libelle,t)||(s.item.libelle=t),u(t)}),n(),E(12,dr,2,0,"small",9),n()()()()}if(r&2){let e=m();o(),f("header",c(2,6,"caisse.tabPan")),o(5),h(c(7,8,"caisse.libelle")),o(4),f("placeholder",c(11,10,"caisse.libelle")),x("ngModel",e.item.libelle),d("ngClass",dt(12,mr,!e.validCaisseLibelle)),o(2),d("ngIf",!e.validCaisseLibelle)}}function gr(r,v){if(r&1){let e=M();a(0,"div",10)(1,"button",11),p(2,"translate"),A("click",function(){g(e);let t=m();return u(t.edit())}),C(3,"i",12),l(4),p(5,"translate"),n(),a(6,"button",13),A("click",function(){g(e);let t=m();return u(t.hideEditDialog())}),C(7,"i",14),l(8),p(9,"translate"),n()()}r&2&&(o(),f("label",c(2,3,"validate")),o(3),B(" ",c(5,5,"validate")," "),o(4),B(" ",c(9,7,"cancel")," "))}var wn=(()=>{class r{constructor(e,i,t){this.compteService=e,this.service=i,this.platformId=t,this._submitted=!1,this._errorMessages=new Array,this._activeTab=0,this._validCaisseCode=!0,this._validCaisseLibelle=!0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){}findPaginatedByCriteria(){this.service.findPaginatedByCriteria(this.criteria).subscribe(e=>{this.items=e.list,this.compteService.findPaginatedByCriteria(this.compteService.criteria).subscribe(i=>{this.comptes=i.list.filter(t=>t?.caisse?.libelle!=null)})},e=>console.log(e))}get comptes(){return this.compteService.items}set comptes(e){this.compteService.items=e}prepareEdit(){}edit(){this.submitted=!0,this.prepareEdit(),this.validateForm(),this.errorMessages.length===0?this.editWithShowOption(!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs sur le formulaire"})}editWithShowOption(e){this.service.edit().subscribe(i=>{this.findPaginatedByCriteria(),this.editDialog=!1,this.submitted=!1,this.item=new yt},i=>{console.log(i)})}hideEditDialog(){this.item=new yt,this.editDialog=!1,this.setValidation(!0)}setValidation(e){this.validCaisseCode=e,this.validCaisseLibelle=e}validateForm(){this.errorMessages=new Array,this.validateCaisseCode(),this.validateCaisseLibelle()}validateCaisseCode(){this.stringUtilService.isEmpty(this.item.code)?(this.errorMessages.push("Code non valide"),this.validCaisseCode=!1):this.validCaisseCode=!0}validateCaisseLibelle(){this.stringUtilService.isEmpty(this.item.libelle)?(this.errorMessages.push("Libelle non valide"),this.validCaisseLibelle=!1):this.validCaisseLibelle=!0}get validCaisseCode(){return this._validCaisseCode}set validCaisseCode(e){this._validCaisseCode=e}get validCaisseLibelle(){return this._validCaisseLibelle}set validCaisseLibelle(e){this._validCaisseLibelle=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get editDialog(){return this.service.editDialog}set editDialog(e){this.service.editDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatCreate}get dateFormatColumn(){return I.dateFormatCreate}get submitted(){return this._submitted}set submitted(e){this._submitted=e}get errorMessages(){return this._errorMessages==null&&(this._errorMessages=new Array),this._errorMessages}set errorMessages(e){this._errorMessages=e}get validate(){return this.service.validate}set validate(e){this.service.validate=e}get activeTab(){return this._activeTab}set activeTab(e){this._activeTab=e}static{this.\u0275fac=function(i){return new(i||r)(S(Q),S(pt),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-caisse-edit-admin"]],standalone:!1,decls:4,vars:11,consts:[["closable","false","styleClass","p-fluid",3,"visibleChange","visible","header","modal","maximizable","draggable","resizable"],["pTemplate","content"],["pTemplate","footer"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","2",1,"text-sm","font-semibold"],[1,"text-red-500"],["type","text","pInputText","","id","2",3,"ngModelChange","placeholder","ngModel","ngClass"],["class","text-red-500",4,"ngIf"],[1,"flex","justify-end","space-x-3","p-4"],[1,"bg-blue-500","text-white","px-4","py-2","rounded-md","hover:bg-primary",3,"click","label"],[1,"pi","pi-check"],[1,"border","border-gray-400","text-gray-600","hover:bg-gray-200","px-4","py-2","rounded-md",3,"click"],[1,"pi","pi-times"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),p(1,"translate"),y("visibleChange",function(_){return b(t.editDialog,_)||(t.editDialog=_),_}),E(2,hr,13,14,"ng-template",1)(3,gr,10,9,"ng-template",2),n()),i&2&&(H(V(10,cr)),f("header",c(1,8,"caisse.tabPan")),x("visible",t.editDialog),d("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!1))},dependencies:[kt,he,O,se,U,re,R,q,J,ie,j],encapsulation:2})}}return r})();var _r=()=>["solde","debit","credit","numeroCompte","dateCreation","banquelabel"],vr=()=>[10,25,50],Cr=()=>({width:"450px"});function fr(r,v){if(r&1){let e=M();a(0,"button",18),p(1,"translate"),A("click",function(){g(e);let t=m(2);return u(t.showSearch())}),n()}if(r&2){let e=m(2);X("label"," ",c(1,4,"search"),""),X("icon","pi pi-",e.findByCriteriaShow?"angle-down":"angle-right","")}}function xr(r,v){if(r&1&&(a(0,"div",19),C(1,"p-splitButton",20),p(2,"translate"),n()),r&2){let e=m(2);o(),X("label"," ",c(2,3,"export"),""),d("model",e.excelPdfButons)}}function br(r,v){if(r&1){let e=M();a(0,"div",21)(1,"div",22)(2,"label",23),l(3),p(4,"translate"),n(),a(5,"p-inputNumber",24),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.soldeMin,t)||(s.criteria.soldeMin=t),u(t)}),n()(),a(6,"div",22)(7,"label",25),l(8),p(9,"translate"),n(),a(10,"p-inputNumber",26),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.soldeMax,t)||(s.criteria.soldeMax=t),u(t)}),n()(),a(11,"div",22)(12,"label",27),l(13),p(14,"translate"),n(),a(15,"p-calendar",28),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.dateCreationFrom,t)||(s.criteria.dateCreationFrom=t),u(t)}),n()(),a(16,"div",22)(17,"label",29),l(18),p(19,"translate"),n(),a(20,"p-calendar",30),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.dateCreationTo,t)||(s.criteria.dateCreationTo=t),u(t)}),n()(),a(21,"div",31)(22,"button",32),p(23,"translate"),A("click",function(){g(e);let t=m(2);return u(t.resetCriteria())}),C(24,"i",33),n(),a(25,"button",34),p(26,"translate"),A("click",function(){g(e);let t=m(2);return u(t.findPaginatedByCriteria1())}),C(27,"i",33),n()()()}if(r&2){let e=m(2);o(3),h(c(4,12,"caisse.soldeMin")),o(2),x("ngModel",e.criteria.soldeMin),o(3),h(c(9,14,"caisse.soldeMax")),o(2),x("ngModel",e.criteria.soldeMax),o(3),h(c(14,16,"Date Min")),o(2),x("ngModel",e.criteria.dateCreationFrom),d("showIcon",!0),o(3),h(c(19,18,"Date Max")),o(2),x("ngModel",e.criteria.dateCreationTo),d("showIcon",!0),o(2),f("label",c(23,20,"Reset")),o(3),f("label",c(26,22,"validate"))}}function yr(r,v){if(r&1){let e=M();a(0,"div",35)(1,"h5",36),l(2),p(3,"translate"),n(),a(4,"span",37)(5,"p-iconfield",38),C(6,"p-inputicon",39),a(7,"input",40),p(8,"translate"),A("input",function(t){g(e),m();let s=Oe(9);return u(s.filterGlobal(t.target.value,"contains"))}),n()()()()}r&2&&(o(2),h(c(3,2,"caisse.header")),o(5),f("placeholder",c(8,4,"searchInput")))}function wr(r,v){r&1&&(a(0,"tr")(1,"th",41),C(2,"p-tableHeaderCheckbox"),n(),a(3,"th",42)(4,"div",43)(5,"span",44),l(6),p(7,"translate"),n(),C(8,"p-sortIcon",45),n()(),a(9,"th",46)(10,"div",43)(11,"span",44),l(12),p(13,"translate"),n(),C(14,"p-sortIcon",47),n()(),a(15,"th",48)(16,"div",43)(17,"span",44),l(18),p(19,"translate"),n(),C(20,"p-sortIcon",49),n()(),a(21,"th",50)(22,"div",43)(23,"span",44),l(24),p(25,"translate"),n(),C(26,"p-sortIcon",51),n()(),a(27,"th",52)(28,"div",43)(29,"span",44),l(30),p(31,"translate"),n()()(),a(32,"th"),l(33,"Actions"),n()()),r&2&&(o(6),h(c(7,5,"compte.solde")),o(6),h(c(13,7,"compte.debit")),o(6),h(c(19,9,"compte.credit")),o(6),h(c(25,11,"compte.dateCreation")),o(6),h(c(31,13,"compte.caisse")))}function Sr(r,v){if(r&1){let e=M();a(0,"button",57),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.edit(t))}),n()}}function Ir(r,v){if(r&1){let e=M();a(0,"button",58),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.view(t))}),n()}}function Ar(r,v){if(r&1){let e=M();a(0,"button",59),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.delete(t))}),n()}}function Er(r,v){if(r&1&&(a(0,"tr")(1,"td"),C(2,"p-tableCheckbox",53),n(),a(3,"td"),l(4),n(),a(5,"td"),l(6),n(),a(7,"td"),l(8),n(),a(9,"td"),l(10),p(11,"date"),n(),a(12,"td"),l(13),n(),a(14,"td"),E(15,Sr,1,0,"button",54)(16,Ir,1,0,"button",55)(17,Ar,1,0,"button",56),n()()),r&2){let e=v.$implicit,i=m(2);o(2),d("value",e),o(2),h(e.solde),o(2),h(e.debit),o(2),h(e.credit),o(2),h(G(11,9,e.dateCreation,"dd/MM/yyyy HH:mm")),o(3),h(e.caisse==null?null:e.caisse.libelle),o(2),d("ngIf",i.editActionIsValid),o(),d("ngIf",i.viewActionIsValid),o(),d("ngIf",i.deleteActionIsValid)}}function Mr(r,v){if(r&1&&(a(0,"tr",60)(1,"td",61),l(2,"Total"),n(),a(3,"td",62),l(4),p(5,"number"),n(),a(6,"td",62),l(7),p(8,"number"),n(),a(9,"td",62),l(10),p(11,"number"),n(),C(12,"td",63),n()),r&2){let e=m(2);o(4),h(G(5,3,e.totalSoldes,"1.2-2")),o(3),h(G(8,6,e.totalDebits,"1.2-2")),o(3),h(G(11,9,e.totalCredits,"1.2-2"))}}function Tr(r,v){if(r&1){let e=M();a(0,"p-paginator",64),A("onPageChange",function(t){g(e);let s=m(2);return u(s.onPage(t))}),n(),a(1,"div",65),l(2),n()}if(r&2){let e=m(2);d("rows",10)("totalRecords",e.totalRecords),o(2),$e(" En totale il ",(e.items&&e.totalRecords==1,"y a")," ",e.items?e.totalRecords:0," ",e.items?e.totalRecords==1?"compte":"comptes":0,". ")}}function Pr(r,v){r&1&&C(0,"app-caisse-create-admin")}function Dr(r,v){r&1&&C(0,"app-caisse-edit-admin")}function Vr(r,v){if(r&1&&C(0,"app-caisse-view-admin",66),r&2){let e=m(2);d("totalCredits",e.totalCredits_transactions)("totalDebits",e.totalDebits_transactions)}}function Br(r,v){if(r&1){let e=M();a(0,"div",3)(1,"div",4),C(2,"p-toast"),a(3,"div",5)(4,"p-toolbar",6),E(5,fr,2,6,"ng-template",7)(6,xr,3,5,"ng-template",8),n(),E(7,br,28,24,"div",9),a(8,"p-table",10,0),p(10,"translate"),y("selectionChange",function(t){g(e);let s=m();return b(s.selections,t)||(s.selections=t),u(t)}),E(11,yr,9,6,"ng-template",11)(12,wr,34,15,"ng-template",12)(13,Er,18,12,"ng-template",13)(14,Mr,13,12,"ng-template",14)(15,Tr,3,5,"ng-template",15),n()(),E(16,Pr,1,0,"app-caisse-create-admin",16)(17,Dr,1,0,"app-caisse-edit-admin",16)(18,Vr,1,2,"app-caisse-view-admin",17),C(19,"p-confirmDialog"),n()()}if(r&2){let e=m();o(7),d("ngIf",e.findByCriteriaShow),o(),f("currentPageReportTemplate",c(10,16,"les \xE9l\xE9ments de {first} \xE0 {last} sur {totalRecords} ")),d("value",e.comptes)("columns",e.cols)("rows",8)("paginator",!1)("globalFilterFields",V(18,_r)),x("selection",e.selections),d("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",V(19,vr)),o(8),d("ngIf",e.createDialog&&e.createActionIsValid),o(),d("ngIf",e.editDialog&&e.editActionIsValid),o(),d("ngIf",e.viewDialog&&e.viewActionIsValid),o(),H(V(20,Cr))}}function Lr(r,v){r&1&&(a(0,"p-card",67)(1,"p",68),l(2," You don't have permission to access ! "),n()())}var Sn=(()=>{class r{constructor(e,i,t,s){this.service=e,this.transactionService=i,this.compteService=t,this.platformId=s,this.fileName=`List de Caisses ${new Date().toLocaleDateString()}`,this.findByCriteriaShow=!1,this.cols=[],this.exportData=[],this.criteriaData=[],this._totalRecords=0,this.enableSecurity=!1,this.totalCredits=0,this.totalDebits=0,this.totalSoldes=0,this.totalCredits_transactions=0,this.totalDebits_transactions=0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.authService=w.injector.get(ot),this.exportService=w.injector.get(Ie)}ngOnInit(){this.findPaginatedByCriteria(),this.initExport(),this.initCol()}calculateTotals(){this.totalSoldes=this.comptes.reduce((e,i)=>e+(i.solde||0),0),this.totalDebits=this.comptes.reduce((e,i)=>e+(i.debit||0),0),this.totalCredits=this.comptes.reduce((e,i)=>e+(i.credit||0),0)}onExcelFileSelected(e){let i=e.target;i.files&&i.files.length>0&&(this.excelFile=i.files[0])}importExcel(){this.excelFile&&this.service.importExcel(this.excelFile).subscribe(e=>{this.items=e,this.messageService.add({severity:"success",summary:"Success",detail:"File uploaded successfully!",life:3e3})},e=>{this.messageService.add({severity:"error",summary:"Error",detail:"File uploaded with Error!",life:3e3})})}findPaginatedByCriteria(){this.compteService.findAllByCaisseNotNull().subscribe(e=>{this.comptes=e,this.totalRecords=e.length,this.selections=new Array,this.calculateTotals()})}findPaginatedByCriteria1(){this.compteService.findByCriteria(this.criteria).subscribe(e=>{this.comptes=e.filter(i=>i?.caisse!=null),this.totalRecords=this.comptes.length,this.selections=new Array,this.calculateTotals(),console.log(this.comptes)},e=>console.log(e))}onPage(e){this.criteria.page=e.page,this.criteria.maxResults=e.rows,this.findPaginatedByCriteria()}edit(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e.caisse).subscribe(i=>{this.item=i,console.log(i),this.editDialog=!0})})}view(e){return P(this,null,function*(){this.compteService.findByIdWithAssociatedList(e).subscribe(i=>{this.compte=i,this.viewDialog=!0,this.transactionService.findPaginatedByCriteria(this.transactionService.criteria).subscribe(t=>{this.transactionService.items=t.list.filter(s=>s?.compteSource?.id==i?.id||s?.compteDestination?.id==i?.id),this.totalCredits_transactions=0,this.totalDebits_transactions=0,this.transactionService.items&&this.transactionService.items.length>0&&this.transactionService.items.forEach(s=>{s.typePaiement?.label==="Credit"?this.totalCredits_transactions+=Number(s.montant||0):s.typePaiement?.label==="Debit"&&(this.totalDebits_transactions+=Number(s.montant||0))})})})})}openCreate(){return P(this,null,function*(){this.item=new yt,this.createDialog=!0})}deleteMultiple(){return P(this,null,function*(){this.confirmationService.confirm({message:"Voulez-vous supprimer ces \xE9l\xE9ments ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Ok"},accept:()=>{this.service.deleteMultiple().subscribe(()=>{for(let e of this.selections){let i=this.items.findIndex(t=>t.id===e.id);this.items.splice(i,1)}this.selections=new Array,this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Les \xE9l\xE9ments s\xE9lectionn\xE9s ont \xE9t\xE9 supprim\xE9s",life:3e3})},e=>console.log(e))}})})}isSelectionDisabled(){return this.selections==null||this.selections.length==0}delete(e){return P(this,null,function*(){this.confirmationService.confirm({message:"Voulez-vous supprimer cet \xE9l\xE9ment ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Ok"},accept:()=>{this.compteService.delete(e).subscribe(i=>{i>0&&(this.findPaginatedByCriteria(),this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Caisse Supprim\xE9",life:3e3}))},i=>console.log(i))}})})}duplicate(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.initDuplicate(i),this.item=i,this.item.id=null,this.createDialog=!0})})}initExport(){this.excelPdfButons=[{label:"CSV",icon:"pi pi-file",command:()=>{this.prepareColumnExport(),this.exportService.exporterCSV(this.criteriaData,this.exportData,this.fileName)}},{label:"XLS",icon:"pi pi-file-excel",command:()=>{this.prepareColumnExport(),this.exportService.exporterExcel(this.criteriaData,this.exportData,this.fileName)}},{label:"PDF",icon:"pi pi-file-pdf",command:()=>{this.prepareColumnExport(),this.exportService.exporterPdf(this.criteriaData,this.exportData,this.fileName)}}]}exportPdf(e){this.service.exportPdf(e).subscribe(i=>{let t=new Blob([i],{type:"application/pdf"}),s=window.URL.createObjectURL(t),_=document.createElement("a");_.href=s,_.download=this.pdfName,_.setAttribute("target","_blank"),_.click(),window.URL.revokeObjectURL(s)},i=>{console.error(i)})}showSearch(){this.findByCriteriaShow=!this.findByCriteriaShow}update(){this.service.edit().subscribe(e=>{let i=this.items.findIndex(t=>t.id===this.item.id);this.items[i]=e,this.editDialog=!1,this.item=new yt},e=>{console.log(e)})}save(){this.service.save().subscribe(e=>{e!=null?(this.items.push(K({},e)),this.createDialog=!1,this.item=new yt):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Element existant"})},e=>{console.log(e)})}initCol(){this.cols=[{field:"code",header:"Code"},{field:"libelle",header:"Libelle"},{field:"solde",header:"Solde"}]}initDuplicate(e){}prepareColumnExport(){this.exportData=this.comptes.map(e=>({"Nom De Compte":e.caisse?.libelle,Solde:e.solde,Debit:e.debit,Credit:e.credit,"Date De Creation":this.datePipe.transform(e.dateCreation,"dd/MM/yyyy hh:mm")})),this.exportData.push({"Nom De Compte":"TOTAL",Solde:this.totalSoldes,Debit:this.totalDebits,Credit:this.totalCredits}),this.criteriaData=[{"Nom De Compte":this.criteria.banque?.nom?this.criteria.banque?.nom:I.emptyForExport,"Debit Min":this.criteria.debitMin?this.criteria.debitMin:I.emptyForExport,"Debit Max":this.criteria.debitMax?this.criteria.debitMax:I.emptyForExport,"Credit Min":this.criteria.creditMin?this.criteria.creditMin:I.emptyForExport,"Credit Max":this.criteria.creditMax?this.criteria.creditMax:I.emptyForExport,"Solde Min":this.criteria.soldeMin?this.criteria.soldeMin:I.emptyForExport,"Solde Max":this.criteria.soldeMax?this.criteria.soldeMax:I.emptyForExport,"Date De Creation Min":this.criteria.dateCreationFrom?this.datePipe.transform(this.criteria.dateCreationFrom,"dd/MM/yyyy hh:mm"):I.emptyForExport,"Date De Creation Max":this.criteria.dateCreationTo?this.datePipe.transform(this.criteria.dateCreationTo,"dd/MM/yyyy hh:mm"):I.emptyForExport}]}get items(){return this.service.items}set items(e){this.service.items=e}get selections(){return this.service.selections}set selections(e){this.service.selections=e}get item(){return this.service.item}set item(e){this.service.item=e}get createDialog(){return this.service.createDialog}set createDialog(e){this.service.createDialog=e}get editDialog(){return this.service.editDialog}set editDialog(e){this.service.editDialog=e}get viewDialog(){return this.service.viewDialog}set viewDialog(e){this.service.viewDialog=e}get criteria(){return this.compteService.criteria}set criteria(e){this.compteService.criteria=e}get dateFormat(){return I.dateFormatList}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e}get pdfName(){return this._pdfName}set pdfName(e){this._pdfName=e}get createActionIsValid(){return this.service.createActionIsValid}set createActionIsValid(e){this.service.createActionIsValid=e}get editActionIsValid(){return this.service.editActionIsValid}set editActionIsValid(e){this.service.editActionIsValid=e}get listActionIsValid(){return this.service.listActionIsValid}set listActionIsValid(e){this.service.listActionIsValid=e}get deleteActionIsValid(){return this.service.deleteActionIsValid}set deleteActionIsValid(e){this.service.deleteActionIsValid=e}get viewActionIsValid(){return this.service.viewActionIsValid}set viewActionIsValid(e){this.service.viewActionIsValid=e}get duplicateActionIsValid(){return this.service.duplicateActionIsValid}set duplicateActionIsValid(e){this.service.duplicateActionIsValid=e}get createAction(){return this.service.createAction}set createAction(e){this.service.createAction=e}get listAction(){return this.service.listAction}set listAction(e){this.service.listAction=e}get editAction(){return this.service.editAction}set editAction(e){this.service.editAction=e}get deleteAction(){return this.service.deleteAction}set deleteAction(e){this.service.deleteAction=e}get viewAction(){return this.service.viewAction}set viewAction(e){this.service.viewAction=e}get duplicateAction(){return this.service.duplicateAction}set duplicateAction(e){this.service.duplicateAction=e}get entityName(){return this.service.entityName}set entityName(e){this.service.entityName=e}get comptes(){return this.compteService.items}set comptes(e){this.compteService.items=e}get compte(){return this.compteService.item}set compte(e){this.compteService.item=e}resetCriteria(){this.criteria=new yi,this.findPaginatedByCriteria()}static{this.\u0275fac=function(i){return new(i||r)(S(pt),S(me),S(Q),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-caisse-list-admin"]],standalone:!1,decls:2,vars:2,consts:[["dt",""],["class","grid",4,"ngIf"],["header","Permission not allowed",4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 border border-surface rounded-lg",4,"ngIf"],["dataKey","id","styleClass","p-datatable-customers","selectionMode","multiple",3,"selectionChange","value","columns","rows","paginator","globalFilterFields","selection","rowHover","currentPageReportTemplate","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","summary"],[4,"ngIf"],[3,"totalCredits","totalDebits",4,"ngIf"],["pButton","","pRipple","",1,"p-button-secondary","mr-2","mb-2",3,"click","label","icon"],[1,"flex"],["icon","pi pi-download","styleClass","p-button-secondary",3,"label","model"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","p-4","border","border-surface","rounded-lg"],[1,"flex","flex-col","gap-2"],["for","3-1",1,"text-sm","font-semibold"],["mode","decimal","id","3-1",3,"ngModelChange","ngModel"],["for","3-2",1,"text-sm","font-semibold"],["mode","decimal","id","3-2",3,"ngModelChange","ngModel"],["for","4-1",1,"text-sm","font-semibold"],["id","4-1","dateFormat","dd-MM-yy",1,"p-fluid",3,"ngModelChange","ngModel","showIcon"],["for","4-2",1,"text-sm","font-semibold"],["id","4-2","dateFormat","dd-MM-yy",1,"p-fluid",3,"ngModelChange","ngModel","showIcon"],[1,"col-span-full","flex","justify-end","mt-4"],["pButton","","pRipple","",1,"px-4","py-2","mx-4","rounded-md","bg-red-500",3,"click","label"],[1,"pi","pi-sort-amount-down"],["pButton","","pRipple","",1,"px-4","py-2","rounded-md",3,"click","label"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","p-2","gap-4"],[1,"text-center","md:text-left"],[1,"relative","w-full","md:w-auto"],["iconPosition","left",1,"w-full","md:w-auto"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full","md:w-72","border","border-gray-300","rounded-md","p-2","focus:ring","focus:ring-blue-300",3,"input","placeholder"],[2,"width","3rem"],["pSortableColumn","solde"],[1,"p-d-flex","p-jc-between","p-ai-center"],[1,"mr-2"],["field","solde"],["pSortableColumn","debit"],["field","debit"],["pSortableColumn","credit"],["field","credit"],["pSortableColumn","dateCreation"],["field","dateCreation"],["pSortableColumn","banque"],[3,"value"],["pButton","","pRipple","","icon","pi pi-pencil","class","p-button-rounded p-button-info mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-list","class","p-button-rounded p-button-secondary mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","class","p-button-rounded p-button-danger mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-info","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-list",1,"p-button-rounded","p-button-secondary","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger","mr-2",3,"click"],[1,"font-semibold","bg-gray-100"],["colspan","1",1,"text-right","text-blue-600"],[1,"text-blue-600"],["colspan","6"],[3,"onPageChange","rows","totalRecords"],[1,"p-d-flex","p-ai-center","p-jc-between"],[3,"totalCredits","totalDebits"],["header","Permission not allowed"],[1,"m-0"]],template:function(i,t){i&1&&E(0,Br,20,21,"div",1)(1,Lr,3,0,"p-card",2),i&2&&(d("ngIf",t.listActionIsValid),o(),d("ngIf",!t.listActionIsValid))},dependencies:[he,we,O,ze,ne,Ge,nt,Qe,Ke,rt,U,oe,R,q,Se,Y,z,it,at,Ue,He,be,wi,yn,wn,Zt,T,j],encapsulation:2})}}return r})();var Ai=(()=>{class r{constructor(e,i){this.service=e,this.platformId=i,this._submitted=!1,this._errorMessages=new Array,this._activeTab=0,this._validBanqueCode=!0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){}save(){this.submitted=!0,this.item.code=this.item.nom,this.validateForm(),this.errorMessages.length===0?this.saveWithShowOption(!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs sur le formulaire"})}saveWithShowOption(e){this.service.save().subscribe(i=>{i!=null?(this.messageService.add({severity:"success",summary:"",detail:"Banque Cree Avec Success"}),this.findPaginatedByCriteria(),this.createDialog=!1,this.submitted=!1,this.item=new Fe):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Une Banque existe d\xE9j\xE0"})},i=>{this.messageService.add({severity:"error",summary:"Erreurs",detail:"Une Banque existe d\xE9j\xE0"})})}hideCreateDialog(){this.createDialog=!1,this.setValidation(!0)}setValidation(e){this.validBanqueCode=e}validateForm(){this.errorMessages=new Array}validateBanqueCode(){this.stringUtilService.isEmpty(this.item.code)?(this.errorMessages.push("Code non valide"),this.validBanqueCode=!1):this.validBanqueCode=!0}get validBanqueCode(){return this._validBanqueCode}set validBanqueCode(e){this._validBanqueCode=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get createDialog(){return this.service.createDialog}set createDialog(e){this.service.createDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatCreate}get dateFormatColumn(){return I.dateFormatCreate}get submitted(){return this._submitted}set submitted(e){this._submitted=e}get errorMessages(){return this._errorMessages==null&&(this._errorMessages=new Array),this._errorMessages}set errorMessages(e){this._errorMessages=e}get validate(){return this.service.validate}set validate(e){this.service.validate=e}get activeTab(){return this._activeTab}set activeTab(e){this._activeTab=e}findPaginatedByCriteria(){this.service.findPaginatedByCriteria(this.criteria).subscribe(e=>{this.items=e.list},e=>console.log(e))}cancel(){this.navigateToList()}navigateToList(){this.router.navigate(["/app/admin/finance/banque/list"])}static{this.\u0275fac=function(i){return new(i||r)(S(_e),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-banque-create-admin"]],standalone:!1,decls:37,vars:42,consts:[[1,"container","mx-auto","p-4"],[1,"bg-white","shadow-md","rounded-lg"],[1,"border-b","p-4","flex","justify-between","items-center","bg-blue-200","text-white"],[1,"text-xl","font-semibold"],[1,"text-white","hover:bg-blue-600","p-2","rounded-md",3,"click"],[1,"pi","pi-times"],[1,"p-4"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","3",1,"text-sm","font-semibold"],["type","text","pInputText","","id","3",3,"ngModelChange","placeholder","ngModel"],["for","5",1,"text-sm","font-semibold"],["mode","decimal","locale","fr-FR","currency","MAD","id","5",3,"ngModelChange","minFractionDigits","maxFractionDigits","prefix","suffix","min","step","placeholder","ngModel"],[1,"field","flex","flex-col","gap-2"],["for","6",1,"text-sm","font-semibold"],["id","6","appendTo","body",1,"w-full",3,"ngModelChange","showTime","showSeconds","placeholder","ngModel","dateFormat"],[1,"flex","justify-end","space-x-3","p-4","border-t"],["icon","pi pi-check","styleClass","p-button-primary",3,"click","label"],["icon","pi pi-times","styleClass","p-button-secondary",3,"click","label"]],template:function(i,t){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),l(4),p(5,"translate"),n(),a(6,"button",4),A("click",function(){return t.cancel()}),C(7,"i",5),n()(),C(8,"p-toast"),a(9,"div",6)(10,"p-tabView")(11,"p-tabPanel",7),p(12,"translate"),a(13,"div",8)(14,"div",9)(15,"label",10),l(16),p(17,"translate"),n(),a(18,"input",11),p(19,"translate"),y("ngModelChange",function(_){return b(t.item.nom,_)||(t.item.nom=_),_}),n()(),a(20,"div",9)(21,"label",12),l(22),p(23,"translate"),n(),a(24,"p-inputNumber",13),p(25,"translate"),y("ngModelChange",function(_){return b(t.item.solde,_)||(t.item.solde=_),_}),n()(),a(26,"div",14)(27,"label",15),l(28),p(29,"translate"),n(),a(30,"p-calendar",16),p(31,"translate"),y("ngModelChange",function(_){return b(t.item.dateCreation,_)||(t.item.dateCreation=_),_}),n()()()()()(),a(32,"div",17)(33,"p-button",18),p(34,"translate"),A("click",function(){return t.save()}),n(),a(35,"p-button",19),p(36,"translate"),A("click",function(){return t.cancel()}),n()()()()),i&2&&(o(4),h(c(5,22,"banque.tabPan")),o(7),f("header",c(12,24,"banque.tabPan")),o(5),h(c(17,26,"banque.nom")),o(2),f("placeholder",c(19,28,"banque.nom")),x("ngModel",t.item.nom),o(4),h(c(23,30,"banque.solde")),o(2),f("placeholder",c(25,32,"banque.solde")),d("minFractionDigits",2)("maxFractionDigits",4)("prefix","")("suffix"," MAD")("min",0)("step",.01),x("ngModel",t.item.solde),o(4),h(c(29,34,"Date de cr\xE9ation")),o(2),f("placeholder",c(31,36,"Date de cr\xE9ation")),f("dateFormat",t.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",t.item.dateCreation),o(3),f("label",c(34,38,"validate")),o(2),f("label",c(36,40,"cancel")))},dependencies:[we,U,ye,re,R,q,J,ie,Y,z,j],encapsulation:2})}}return r})();var Wr=()=>({width:"85vw",maxWidth:"1200px"}),kr=()=>[5,10,25,50];function jr(r,v){r&1&&(a(0,"div",4),C(1,"i",5),a(2,"span",6),l(3),p(4,"translate"),n()()),r&2&&(o(3),h(c(4,1,"banque.tabPan")))}function Nr(r,v){if(r&1&&(a(0,"div",9)(1,"div",10)(2,"div",11)(3,"h5",12),C(4,"i",13),l(5," Informations de la banque "),n(),a(6,"div",14)(7,"div",15)(8,"label",16),l(9),p(10,"translate"),n(),C(11,"input",17),p(12,"translate"),n(),a(13,"div",15)(14,"label",16),l(15),p(16,"translate"),n(),C(17,"p-inputNumber",18),p(18,"translate"),n(),a(19,"div",15)(20,"label",19),l(21),p(22,"translate"),n(),C(23,"p-inputNumber",20),p(24,"translate"),n(),a(25,"div",15)(26,"label",21),l(27),p(28,"translate"),n(),C(29,"p-inputNumber",22),p(30,"translate"),n(),a(31,"div",15)(32,"label",23),l(33),p(34,"translate"),n(),C(35,"input",24),p(36,"translate"),n()()()()()),r&2){let e=m(2);o(9),h(c(10,38,"Nom de Compte")),o(2),f("placeholder",c(12,40,"Nom")),d("disabled",!0)("ngModel",e.compte.code),o(4),h(c(16,42,"compte.solde")),o(2),f("placeholder",c(18,44,"compte.solde")),d("minFractionDigits",2)("maxFractionDigits",4)("prefix","")("suffix"," MAD")("min",0)("step",.01)("disabled",!0)("ngModel",e.compte.solde),o(4),h(c(22,46,"compte.debit")),o(2),f("placeholder",c(24,48,"compte.debit")),d("minFractionDigits",2)("maxFractionDigits",4)("prefix","")("suffix"," MAD")("min",0)("step",.01)("disabled",!0)("ngModel",e.compte.debit),o(4),h(c(28,50,"compte.credit")),o(2),f("placeholder",c(30,52,"compte.credit")),d("minFractionDigits",2)("maxFractionDigits",4)("prefix","")("suffix"," MAD")("min",0)("step",.01)("disabled",!0)("ngModel",e.compte.credit),o(4),h(c(34,54,"Date de cr\xE9ation")),o(2),f("placeholder",c(36,56,"Date de cr\xE9ation")),d("disabled",!0)("ngModel",e.compte.dateCreation)}}function Rr(r,v){if(r&1){let e=M();a(0,"p-panel",36)(1,"div",14)(2,"div",15)(3,"label",37),l(4),p(5,"translate"),n(),a(6,"p-calendar",38),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.dateFrom,t)||(s.transactionCriteria.dateFrom=t),u(t)}),n()(),a(7,"div",15)(8,"label",37),l(9),p(10,"translate"),n(),a(11,"p-calendar",38),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.dateTo,t)||(s.transactionCriteria.dateTo=t),u(t)}),n()(),a(12,"div",15)(13,"label",37),l(14),p(15,"translate"),n(),a(16,"p-inputNumber",39),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.montantMin,t)||(s.transactionCriteria.montantMin=t),u(t)}),n()(),a(17,"div",15)(18,"label",37),l(19),p(20,"translate"),n(),a(21,"p-inputNumber",39),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.montantMax,t)||(s.transactionCriteria.montantMax=t),u(t)}),n()(),a(22,"div",15)(23,"label",37),l(24),p(25,"translate"),n(),a(26,"input",40),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.description,t)||(s.transactionCriteria.description=t),u(t)}),n()(),a(27,"div",15)(28,"label",37),l(29),p(30,"translate"),n(),a(31,"p-dropdown",41),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.typeTransaction,t)||(s.transactionCriteria.typeTransaction=t),u(t)}),n()(),a(32,"div",15)(33,"label",37),l(34),p(35,"translate"),n(),a(36,"p-dropdown",41),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.modePaiement,t)||(s.transactionCriteria.modePaiement=t),u(t)}),n()(),a(37,"div",42)(38,"div",43)(39,"button",44),A("click",function(){g(e);let t=m(3);return u(t.findPaginatedTransactions())}),n(),a(40,"button",45),A("click",function(){g(e);let t=m(3);return u(t.resetTransactionCriteria())}),n()()()()()}if(r&2){let e=m(3);d("showHeader",!1),o(4),h(c(5,21,"Date Min")),o(2),f("dateFormat",e.dateFormat),x("ngModel",e.transactionCriteria.dateFrom),o(3),h(c(10,23,"Date Max")),o(2),f("dateFormat",e.dateFormat),x("ngModel",e.transactionCriteria.dateTo),o(3),h(c(15,25,"Montant Min")),o(2),x("ngModel",e.transactionCriteria.montantMin),o(3),h(c(20,27,"Montant Max")),o(2),x("ngModel",e.transactionCriteria.montantMax),o(3),h(c(25,29,"Description")),o(2),x("ngModel",e.transactionCriteria.description),o(3),h(c(30,31,"Type transaction")),o(2),d("options",e.typeTransactions),x("ngModel",e.transactionCriteria.typeTransaction),d("showClear",!0),o(3),h(c(35,33,"Mode paiement")),o(2),d("options",e.modePaiements),x("ngModel",e.transactionCriteria.modePaiement),d("showClear",!0)}}function qr(r,v){r&1&&(a(0,"tr")(1,"th"),l(2,"Date"),n(),a(3,"th"),l(4,"Credit"),n(),a(5,"th"),l(6,"Debit"),n(),a(7,"th"),l(8,"Description"),n(),a(9,"th"),l(10,"Type transaction"),n(),a(11,"th"),l(12,"Mode paiement"),n(),a(13,"th"),l(14,"Compte source"),n(),a(15,"th"),l(16,"Compte destination"),n()())}function Or(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.montant," ")}}function Ur(r,v){r&1&&(ee(0),l(1," --- "),te())}function Hr(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.montant," ")}}function zr(r,v){r&1&&(ee(0),l(1," --- "),te())}function Gr(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.compteLocataire==null||e.compteLocataire.locataire==null?null:e.compteLocataire.locataire.fullName," ")}}function Qr(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.compteSource==null?null:e.compteSource.code," ")}}function Kr(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),Gt(" ",e.CompteInstantanee==null||e.CompteInstantanee.locataire==null?null:e.CompteInstantanee.locataire.nom," ",e.CompteInstantanee==null||e.CompteInstantanee.locataire==null?null:e.CompteInstantanee.locataire.prenom," ")}}function Xr(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.compteLocataire==null||e.compteLocataire.locataire==null?null:e.compteLocataire.locataire.fullName," ")}}function Yr(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.compteDestination==null?null:e.compteDestination.code," ")}}function Jr(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.CompteInstantanee==null||e.CompteInstantanee.locataire==null?null:e.CompteInstantanee.locataire.fullName," ")}}function Zr(r,v){if(r&1&&(a(0,"tr")(1,"td"),l(2),p(3,"date"),n(),a(4,"td",46),E(5,Or,2,1,"ng-container",47)(6,Ur,2,0,"ng-container",47),n(),a(7,"td",48),E(8,Hr,2,1,"ng-container",47)(9,zr,2,0,"ng-container",47),n(),a(10,"td"),l(11),p(12,"slice"),n(),a(13,"td"),C(14,"p-tag",49),n(),a(15,"td"),C(16,"p-tag",49),n(),a(17,"td"),E(18,Gr,2,1,"ng-container",47)(19,Qr,2,1,"ng-container",47)(20,Kr,2,2,"ng-container",47),n(),a(21,"td"),E(22,Xr,2,1,"ng-container",47)(23,Yr,2,1,"ng-container",47)(24,Jr,2,1,"ng-container",47),n()()),r&2){let e=v.$implicit,i=m(3);o(2),h(G(3,18,e.date,i.dateFormatColumn)),o(3),d("ngIf",(e.typePaiement==null?null:e.typePaiement.label)==="Credit"),o(),d("ngIf",(e.typePaiement==null?null:e.typePaiement.label)!=="Credit"),o(2),d("ngIf",(e.typePaiement==null?null:e.typePaiement.label)==="Debit"),o(),d("ngIf",(e.typePaiement==null?null:e.typePaiement.label)!=="Debit"),o(2),h(Wt(12,21,e.description,0,50)),o(3),d("severity",e.typeTransaction==null?null:e.typeTransaction.code)("value",e.typeTransaction==null?null:e.typeTransaction.label)("rounded",!0),o(2),d("severity",e.modePaiement==null?null:e.modePaiement.style)("value",e.modePaiement==null?null:e.modePaiement.label)("rounded",!0),o(2),d("ngIf",e.compteLocataire!=null&&(e.typeTransaction==null?null:e.typeTransaction.label)!=="avoir"),o(),d("ngIf",e.compteSource!=null),o(),d("ngIf",(e.typeTransaction==null?null:e.typeTransaction.label)==="reglement"),o(2),d("ngIf",e.compteLocataire!=null&&(e.typeTransaction==null?null:e.typeTransaction.label)==="avoir"),o(),d("ngIf",e.compteDestination!==null),o(),d("ngIf",e.CompteInstantanee!==null)}}function $r(r,v){if(r&1&&(a(0,"tr",50)(1,"td",51),l(2,"Total:"),n(),a(3,"td",52),l(4),n(),a(5,"td",53),l(6),n(),C(7,"td",54),n(),a(8,"tr",55)(9,"td",51),l(10,"Solde :"),n(),a(11,"td",56),l(12),n(),C(13,"td",54),n()),r&2){let e=m(3);o(4),h(e.totalCredits),o(2),h(e.totalDebits),o(6),h(e.compte.soldeInitial+(e.totalCredits-e.totalDebits))}}function eo(r,v){r&1&&(a(0,"tr")(1,"td",57),C(2,"i",58),l(3," Aucune transaction disponible pour cette banque "),n()())}function to(r,v){if(r&1){let e=M();a(0,"div",9)(1,"div",10)(2,"div",25)(3,"div",26)(4,"h5",27),C(5,"i",28),l(6," Historique des transactions "),n(),a(7,"div",29)(8,"button",30),A("click",function(){g(e);let t=m(2);return u(t.showTransactionSearch())}),n(),C(9,"p-splitButton",31),n()(),E(10,Rr,41,35,"p-panel",32),a(11,"p-table",33),p(12,"translate"),E(13,qr,17,0,"ng-template",1)(14,Zr,25,25,"ng-template",34)(15,$r,14,3,"ng-template",3)(16,eo,4,0,"ng-template",35),n()()()()}if(r&2){let e=m(2);o(9),d("model",e.transactionExcelPdfButons),o(),d("ngIf",e.transactionFindByCriteriaShow),o(),f("currentPageReportTemplate",c(12,8,"Affichage de {first} \xE0 {last} sur {totalRecords} \xE9l\xE9ments")),d("value",e.transactions)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("rowsPerPageOptions",V(10,kr))}}function io(r,v){if(r&1&&(a(0,"p-tabView")(1,"p-tabPanel",7),p(2,"translate"),E(3,Nr,37,58,"div",8),n(),a(4,"p-tabPanel",7),p(5,"translate"),E(6,to,17,11,"div",8),n()()),r&2){let e=m();o(),f("header",c(2,4,"Informations de la banque")),o(2),d("ngIf",e.compte),o(),f("header",c(5,6,"Historique des transactions")),o(2),d("ngIf",e.compte)}}function no(r,v){if(r&1){let e=M();a(0,"div",42)(1,"button",59),A("click",function(){g(e);let t=m();return u(t.hideViewDialog())}),n()()}}var In=(()=>{class r{constructor(e,i,t,s,_,D){this.compteService=e,this.transactionService=i,this.typeTransactionService=t,this.modePaiementService=s,this.exportService=_,this.service=D,this._submitted=!1,this._errorMessages=new Array,this.transactionFindByCriteriaShow=!1,this.transactionExportData=[],this.transactionCriteriaData=[],this._transactionFileName="Transaction",this.totalCredits=0,this.totalDebits=0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.findPaginatedByCriteria(),this.initTransactionExport(),this.loadReferenceDataForTransaction()}findPaginatedByCriteria(){this.service.findPaginatedByCriteria(this.criteria).subscribe(e=>{this.items=e.list,this.compteService.findPaginatedByCriteria(this.compteService.criteria).subscribe(i=>{this.comptes=i.list.filter(t=>t?.banque?.nom!=null)}),this.service.findPaginatedByCriteria(this.criteria).subscribe(i=>{this.items=i.list.filter(t=>t?.code!=null)},i=>console.log(i))},e=>console.log(e))}loadReferenceDataForTransaction(){this.typeTransactionService.findAll().subscribe(e=>this.typeTransactions=e),this.modePaiementService.findAll().subscribe(e=>this.modePaiements=e)}showTransactionSearch(){this.transactionFindByCriteriaShow=!this.transactionFindByCriteriaShow}resetTransactionCriteria(){this.transactionCriteria=new Mt,this.findPaginatedTransactions()}findPaginatedTransactions(){this.transactionService.findPaginatedByCriteria(this.transactionCriteria).subscribe(e=>{this.compte?this.transactions=e.list.filter(i=>i?.compteSource?.id==this.compte?.id||i?.compteDestination?.id==this.compte?.id):this.transactions=e.list,this.calculateTotals()},e=>console.log(e))}initTransactionExport(){this.transactionExcelPdfButons=[{label:"CSV",icon:"pi pi-file",command:()=>{this.prepareTransactionColumnExport(),this.exportService.exporterCSV(this.transactionCriteriaData,this.transactionExportData,this._transactionFileName)}},{label:"XLS",icon:"pi pi-file-excel",command:()=>{this.prepareTransactionColumnExport(),this.exportService.exporterExcel(this.transactionCriteriaData,this.transactionExportData,this._transactionFileName)}},{label:"PDF",icon:"pi pi-file-pdf",command:()=>{this.prepareTransactionColumnExport(),this.exportService.exporterPdf(this.transactionCriteriaData,this.transactionExportData,this._transactionFileName)}}]}prepareTransactionColumnExport(){this.transactionExportData=this.transactions.map(i=>{let t=0,s=0;i.typePaiement?.label==="Credit"&&(t=i.montant),i.typePaiement?.label==="Debit"&&(s=i.montant);let _="";i.typeTransaction?.label==="charge"||i.typeTransaction?.label==="avoir"?_=i.compteSource?.code||"":i.typeTransaction?.label==="reglement"&&(_=`${i.CompteInstantanee?.locataire?.nom||""} ${i.CompteInstantanee?.locataire?.prenom||""}`.trim());let D="";return i.typeTransaction?.label==="charge"||i.typeTransaction?.label==="reglement"?D=i.compteDestination?.code||"":i.typeTransaction?.label==="avoir"&&(D=`${i.CompteInstantanee?.locataire?.nom||""} ${i.CompteInstantanee?.locataire?.prenom||""}`.trim()),{Date:this.datePipe.transform(i.date,this.dateFormatColumn)||"",Cr\u00E9dit:t,D\u00E9bit:s,Description:(i.description||"").slice(0,50),"Type transaction":i.typeTransaction?.label||"","Mode paiement":i.modePaiement?.label||"","Compte source":_,"Compte destination":D}}),this.transactionExportData.push({Date:"TOTAL",Cr\u00E9dit:this.totalCredits,D\u00E9bit:this.totalDebits,Description:"","Type transaction":"","Mode paiement":"","Compte source":"","Compte destination":""});let e=this.totalCredits-this.totalDebits;this.transactionExportData.push({Date:"SOLDE",Cr\u00E9dit:e,D\u00E9bit:"",Description:"","Type transaction":"","Mode paiement":"","Compte source":"","Compte destination":""}),this.transactionCriteriaData=[{"Date Min":this.transactionCriteria.dateFrom?this.datePipe.transform(this.transactionCriteria.dateFrom,this.dateFormatColumn):I.emptyForExport,"Date Max":this.transactionCriteria.dateTo?this.datePipe.transform(this.transactionCriteria.dateTo,this.dateFormatColumn):I.emptyForExport,"Montant Min":this.transactionCriteria.montantMin||I.emptyForExport,"Montant Max":this.transactionCriteria.montantMax||I.emptyForExport,Description:this.transactionCriteria.description||I.emptyForExport,"Type transaction":this.transactionCriteria.typeTransaction?.label||I.emptyForExport,"Mode paiement":this.transactionCriteria.modePaiement?.label||I.emptyForExport}]}calculateTotals(){this.totalCredits=0,this.totalDebits=0,this.transactions&&this.transactions.length>0&&this.transactions.forEach(e=>{e.typePaiement?.label==="Credit"?(this.totalCredits+=Number(e.montant||0),console.log(e.montant)):e.typePaiement?.label==="Debit"&&(this.totalDebits+=Number(e.montant||0))})}hideViewDialog(){this.item=new Fe,this.viewDialog=!1}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get viewDialog(){return this.service.viewDialog}set viewDialog(e){this.service.viewDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get transactionCriteria(){return this.transactionService.criteria}set transactionCriteria(e){this.transactionService.criteria=e}get dateFormat(){return I.dateFormatView}get dateFormatColumn(){return I.dateFormatList}get comptes(){return this.compteService.items}get transactions(){return this.transactionService.items}set transactions(e){this.transactionService.items=e}set comptes(e){this.compteService.items=e}get compte(){return this.compteService.item}set compte(e){this.compteService.item=e}static{this.\u0275fac=function(i){return new(i||r)(S(Q),S(me),S(ge),S(ti),S(Ie),S(_e))}}static{this.\u0275cmp=L({type:r,selectors:[["app-banque-view-admin"]],inputs:{totalCredits:"totalCredits",totalDebits:"totalDebits"},standalone:!1,decls:4,vars:5,consts:[["closable","false","styleClass","p-fluid banque-view-dialog",3,"visibleChange","visible","modal"],["pTemplate","header"],["pTemplate","content"],["pTemplate","footer"],[1,"flex","align-items-center"],[1,"pi","pi-money-bill","text-primary","text-xl","mr-2"],[1,"font-semibold","text-lg"],[3,"header"],["class","grid",4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card","mb-4"],[1,"mb-3","font-medium"],[1,"pi","pi-info-circle","mr-2"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"field","flex","flex-col","gap-2"],["for","1",1,"text-sm","font-semibold"],["type","text","pInputText","","autofocus","","id","1",3,"disabled","placeholder","ngModel"],["mode","decimal","locale","fr-FR","currency","MAD","id","1",3,"minFractionDigits","maxFractionDigits","prefix","suffix","min","step","disabled","placeholder","ngModel"],["for","2",1,"text-sm","font-semibold"],["mode","decimal","locale","fr-FR","currency","MAD","id","2",3,"minFractionDigits","maxFractionDigits","prefix","suffix","min","step","disabled","placeholder","ngModel"],["for","3",1,"text-sm","font-semibold"],["mode","decimal","locale","fr-FR","currency","MAD","id","3",3,"minFractionDigits","maxFractionDigits","prefix","suffix","min","step","disabled","placeholder","ngModel"],["for","4",1,"text-sm","font-semibold"],["type","text","pInputText","","id","4",1,"w-full",3,"disabled","placeholder","ngModel"],[1,"card"],[1,"flex","flex-wrap","gap-2","align-items-center","justify-content-between","mb-2"],[1,"m-0","font-medium"],[1,"pi","pi-history","mr-2"],[1,"flex","align-items-center","gap-2"],["pButton","","pRipple","","label","Recherche","icon","pi pi-search",1,"p-button-outlined",3,"click"],["label","Exporter","icon","pi pi-download","styleClass","p-button-outlined",3,"model"],["styleClass","mb-2",3,"showHeader",4,"ngIf"],["styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","paginator","rows","showCurrentPageReport","currentPageReportTemplate","rowsPerPageOptions"],["pTemplate","body"],["pTemplate","emptymessage"],["styleClass","mb-2",3,"showHeader"],[1,"text-sm","font-medium"],[1,"w-full",3,"ngModelChange","ngModel","dateFormat"],[1,"w-full",3,"ngModelChange","ngModel"],["type","text","pInputText","",1,"w-full",3,"ngModelChange","ngModel"],["optionLabel","label","placeholder","S\xE9lectionner",1,"w-full",3,"ngModelChange","options","ngModel","showClear"],[1,"flex","justify-content-end"],[1,"flex","gap-2"],["pButton","","pRipple","","label","Rechercher","icon","pi pi-search",1,"p-button-primary",3,"click"],["pButton","","pRipple","","label","R\xE9initialiser","icon","pi pi-times",1,"p-button-outlined",3,"click"],[1,"text-green-500","font-medium"],[4,"ngIf"],[1,"text-red-500","font-medium"],[3,"severity","value","rounded"],[1,"text-center","bg-blue-700-400"],["colspan","1",1,"text-left","font-bold"],[1,"text-green-500","font-bold"],[1,"text-orange-500","font-bold"],["colspan","5"],[1,"text-center","bg-gray-400"],[1,"text-orange-500","font-bold","w-2"],["colspan","8",1,"text-center","p-4"],[1,"pi","pi-info-circle","text-primary","mr-2"],["pButton","","pRipple","","type","button","icon","pi pi-times","label","Fermer",1,"p-button-outlined",3,"click"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),y("visibleChange",function(_){return b(t.viewDialog,_)||(t.viewDialog=_),_}),E(1,jr,5,3,"ng-template",1)(2,io,7,8,"ng-template",2)(3,no,2,0,"ng-template",3),n()),i&2&&(H(V(4,Wr)),x("visible",t.viewDialog),d("modal",!0))},dependencies:[he,O,ne,se,U,oe,re,R,q,Se,ce,J,ie,Y,Dt,z,gt,be,jt,T,j],styles:["[_nghost-%COMP%]     .banque-view-dialog .p-dialog-content{padding:0}[_nghost-%COMP%]     .banque-view-dialog .p-tabview .p-tabview-nav{background:#f8f9fa;border-bottom:1px solid #dee2e6;padding:0 1rem}[_nghost-%COMP%]     .banque-view-dialog .p-tabview .p-tabview-nav li .p-tabview-nav-link{padding:1rem;font-weight:600}[_nghost-%COMP%]     .banque-view-dialog .p-tabview .p-tabview-nav li .p-tabview-nav-link:not(.p-disabled):focus{box-shadow:none}[_nghost-%COMP%]     .banque-view-dialog .p-tabview .p-tabview-panels{padding:1.5rem}[_nghost-%COMP%]     .banque-view-dialog .card{background-color:#fff;border-radius:.5rem;box-shadow:0 2px 4px #0000000d;padding:1.25rem}[_nghost-%COMP%]     .banque-view-dialog .card h5{color:#495057;border-bottom:1px solid #e9ecef;padding-bottom:.75rem}[_nghost-%COMP%]     .banque-view-dialog .field{margin-bottom:1rem}[_nghost-%COMP%]     .banque-view-dialog .field label{display:block;margin-bottom:.5rem;color:#555}[_nghost-%COMP%]     .banque-view-dialog .field input, [_nghost-%COMP%]     .banque-view-dialog .field textarea{width:100%;background-color:#f9f9f9}[_nghost-%COMP%]     .banque-view-dialog .p-datatable .p-datatable-header{background-color:#f8f9fa;border:1px solid #e9ecef}[_nghost-%COMP%]     .banque-view-dialog .p-datatable th{background-color:#f8f9fa;color:#495057;font-weight:600;padding:.75rem 1rem}[_nghost-%COMP%]     .banque-view-dialog .p-datatable td{padding:.75rem 1rem}[_nghost-%COMP%]     .banque-view-dialog .p-datatable .text-green-500{color:#4caf50}[_nghost-%COMP%]     .banque-view-dialog .p-datatable .text-red-500{color:#f44336}[_nghost-%COMP%]     .banque-view-dialog .p-button.p-button-outlined:focus{box-shadow:none}@media screen and (max-width: 768px){[_nghost-%COMP%]     .banque-view-dialog .p-tabview .p-tabview-panels{padding:1rem}[_nghost-%COMP%]     .banque-view-dialog .card{padding:1rem}}"]})}}return r})();var ro=()=>({width:"70vw"});function oo(r,v){if(r&1){let e=M();a(0,"p-tabView")(1,"p-tabPanel",3),p(2,"translate"),a(3,"div",4)(4,"div",5)(5,"label",6),l(6),p(7,"translate"),n(),a(8,"input",7),p(9,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.nom,t)||(s.item.nom=t),u(t)}),n()()()()()}if(r&2){let e=m();o(),f("header",c(2,4,"banque.tabPan")),o(5),h(c(7,6,"banque.nom")),o(2),f("placeholder",c(9,8,"banque.nom")),x("ngModel",e.item.nom)}}function so(r,v){if(r&1){let e=M();a(0,"div",8)(1,"button",9),p(2,"translate"),A("click",function(){g(e);let t=m();return u(t.edit())}),C(3,"i",10),l(4),p(5,"translate"),n(),a(6,"button",11),A("click",function(){g(e);let t=m();return u(t.hideEditDialog())}),C(7,"i",12),l(8),p(9,"translate"),n()()}r&2&&(o(),f("label",c(2,3,"validate")),o(3),B(" ",c(5,5,"validate")," "),o(4),B(" ",c(9,7,"cancel")," "))}var An=(()=>{class r{constructor(e,i,t){this.compteService=e,this.service=i,this.platformId=t,this._submitted=!1,this._errorMessages=new Array,this._activeTab=0,this._validBanqueCode=!0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){}prepareEdit(){}findPaginatedByCriteria(){this.service.findPaginatedByCriteria(this.criteria).subscribe(e=>{this.items=e.list,this.compteService.findPaginatedByCriteria(this.compteService.criteria).subscribe(i=>{this.comptes=i.list.filter(t=>t?.banque?.nom!=null)})},e=>console.log(e))}get comptes(){return this.compteService.items}set comptes(e){this.compteService.items=e}edit(){this.submitted=!0,this.prepareEdit(),this.validateForm(),this.errorMessages.length===0?this.editWithShowOption(!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs sur le formulaire"})}editWithShowOption(e){this.service.edit().subscribe(i=>{this.findPaginatedByCriteria(),this.editDialog=!1,this.submitted=!1,this.item=new Fe,this.messageService.add({severity:"success",summary:"",detail:"Banque a \xE9t\xE9 modifi\xE9e avec succ\xE8s"})},i=>{console.log(i)})}hideEditDialog(){this.item=new Fe,this.editDialog=!1,this.setValidation(!0)}setValidation(e){this.validBanqueCode=e}validateForm(){this.errorMessages=new Array,this.validateBanqueCode()}validateBanqueCode(){this.stringUtilService.isEmpty(this.item.code)?(this.errorMessages.push("Code non valide"),this.validBanqueCode=!1):this.validBanqueCode=!0}get validBanqueCode(){return this._validBanqueCode}set validBanqueCode(e){this._validBanqueCode=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get editDialog(){return this.service.editDialog}set editDialog(e){this.service.editDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatCreate}get dateFormatColumn(){return I.dateFormatCreate}get submitted(){return this._submitted}set submitted(e){this._submitted=e}get errorMessages(){return this._errorMessages==null&&(this._errorMessages=new Array),this._errorMessages}set errorMessages(e){this._errorMessages=e}get validate(){return this.service.validate}set validate(e){this.service.validate=e}get activeTab(){return this._activeTab}set activeTab(e){this._activeTab=e}static{this.\u0275fac=function(i){return new(i||r)(S(Q),S(_e),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-banque-edit-admin"]],standalone:!1,decls:4,vars:11,consts:[["closable","false","styleClass","p-fluid",3,"visibleChange","visible","header","modal","maximizable","draggable","resizable"],["pTemplate","content"],["pTemplate","footer"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","3",1,"text-sm","font-semibold"],["type","text","pInputText","","id","3",3,"ngModelChange","placeholder","ngModel"],[1,"flex","justify-end","space-x-3","p-4"],[1,"bg-blue-500","text-white","px-4","py-2","rounded-md","hover:bg-primary",3,"click","label"],[1,"pi","pi-check"],[1,"border","border-gray-400","text-gray-600","hover:bg-gray-200","px-4","py-2","rounded-md",3,"click"],[1,"pi","pi-times"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),p(1,"translate"),y("visibleChange",function(_){return b(t.editDialog,_)||(t.editDialog=_),_}),E(2,oo,10,10,"ng-template",1)(3,so,10,9,"ng-template",2),n()),i&2&&(H(V(10,ro)),f("header",c(1,8,"banque.tabPan")),x("visible",t.editDialog),d("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!1))},dependencies:[O,se,U,re,R,q,J,ie,j],encapsulation:2})}}return r})();var po=()=>["solde","debit","credit","numeroCompte","dateCreation","banquelabel"],co=()=>[10,25,50],mo=()=>({width:"450px"});function ho(r,v){if(r&1){let e=M();a(0,"button",18),p(1,"translate"),A("click",function(){g(e);let t=m(2);return u(t.showSearch())}),n()}if(r&2){let e=m(2);X("label"," ",c(1,4,"search"),""),X("icon","pi pi-",e.findByCriteriaShow?"angle-down":"angle-right","")}}function go(r,v){if(r&1&&(a(0,"div",19),C(1,"p-splitButton",20),p(2,"translate"),n()),r&2){let e=m(2);o(),X("label"," ",c(2,3,"export"),""),d("model",e.excelPdfButons)}}function uo(r,v){if(r&1){let e=M();a(0,"div",21)(1,"div",22)(2,"label",23),l(3),p(4,"translate"),n(),a(5,"p-inputNumber",24),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.soldeMin,t)||(s.criteria.soldeMin=t),u(t)}),n()(),a(6,"div",22)(7,"label",25),l(8),p(9,"translate"),n(),a(10,"p-inputNumber",26),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.soldeMax,t)||(s.criteria.soldeMax=t),u(t)}),n()(),a(11,"div",22)(12,"label",27),l(13),p(14,"translate"),n(),a(15,"p-calendar",28),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.dateCreationFrom,t)||(s.criteria.dateCreationFrom=t),u(t)}),n()(),a(16,"div",22)(17,"label",29),l(18),p(19,"translate"),n(),a(20,"p-calendar",30),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.dateCreationTo,t)||(s.criteria.dateCreationTo=t),u(t)}),n()(),a(21,"div",31)(22,"button",32),p(23,"translate"),A("click",function(){g(e);let t=m(2);return u(t.resetCriteria())}),C(24,"i",33),n(),a(25,"button",34),p(26,"translate"),A("click",function(){g(e);let t=m(2);return u(t.findPaginatedByCriteria1())}),C(27,"i",33),n()()()}if(r&2){let e=m(2);o(3),h(c(4,12,"banque.soldeMin")),o(2),x("ngModel",e.criteria.soldeMin),o(3),h(c(9,14,"banque.soldeMax")),o(2),x("ngModel",e.criteria.soldeMax),o(3),h(c(14,16,"charge.dateMin")),o(2),x("ngModel",e.criteria.dateCreationFrom),d("showIcon",!0),o(3),h(c(19,18,"charge.dateMax")),o(2),x("ngModel",e.criteria.dateCreationTo),d("showIcon",!0),o(2),f("label",c(23,20,"Reset")),o(3),f("label",c(26,22,"validate"))}}function _o(r,v){if(r&1){let e=M();a(0,"div",35)(1,"h5",36),l(2),p(3,"translate"),n(),a(4,"span",37)(5,"p-iconfield",38),C(6,"p-inputicon",39),a(7,"input",40),p(8,"translate"),A("input",function(t){g(e),m();let s=Oe(9);return u(s.filterGlobal(t.target.value,"contains"))}),n()()()()}r&2&&(o(2),h(c(3,2,"banque.header")),o(5),f("placeholder",c(8,4,"searchInput")))}function vo(r,v){r&1&&(a(0,"tr")(1,"th",41),C(2,"p-tableHeaderCheckbox"),n(),a(3,"th",42)(4,"div",43)(5,"span",44),l(6),p(7,"translate"),n(),C(8,"p-sortIcon",45),n()(),a(9,"th",46)(10,"div",43)(11,"span",44),l(12),p(13,"translate"),n(),C(14,"p-sortIcon",47),n()(),a(15,"th",48)(16,"div",43)(17,"span",44),l(18),p(19,"translate"),n(),C(20,"p-sortIcon",49),n()(),a(21,"th",50)(22,"div",43)(23,"span",44),l(24),p(25,"translate"),n(),C(26,"p-sortIcon",51),n()(),a(27,"th",52)(28,"div",43)(29,"span",44),l(30),p(31,"translate"),n()()(),a(32,"th"),l(33,"Actions"),n()()),r&2&&(o(6),h(c(7,5,"compte.solde")),o(6),h(c(13,7,"compte.debit")),o(6),h(c(19,9,"compte.credit")),o(6),h(c(25,11,"compte.dateCreation")),o(6),h(c(31,13,"compte.banque")))}function Co(r,v){if(r&1){let e=M();a(0,"button",57),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.edit(t))}),n()}}function fo(r,v){if(r&1){let e=M();a(0,"button",58),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.view(t))}),n()}}function xo(r,v){if(r&1){let e=M();a(0,"button",59),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.delete(t))}),n()}}function bo(r,v){if(r&1&&(a(0,"tr")(1,"td"),C(2,"p-tableCheckbox",53),n(),a(3,"td"),l(4),n(),a(5,"td"),l(6),n(),a(7,"td"),l(8),n(),a(9,"td"),l(10),p(11,"date"),n(),a(12,"td"),l(13),n(),a(14,"td"),E(15,Co,1,0,"button",54)(16,fo,1,0,"button",55)(17,xo,1,0,"button",56),n()()),r&2){let e=v.$implicit,i=m(2);o(2),d("value",e),o(2),h(e.solde),o(2),h(e.debit),o(2),h(e.credit),o(2),h(G(11,9,e.dateCreation,"dd/MM/yyyy HH:mm")),o(3),h(e.banque==null?null:e.banque.nom),o(2),d("ngIf",i.editActionIsValid),o(),d("ngIf",i.viewActionIsValid),o(),d("ngIf",i.deleteActionIsValid)}}function yo(r,v){if(r&1&&(a(0,"tr",60)(1,"td",61),l(2,"Total"),n(),a(3,"td",62),l(4),p(5,"number"),n(),a(6,"td",62),l(7),p(8,"number"),n(),a(9,"td",62),l(10),p(11,"number"),n(),C(12,"td",63),n()),r&2){let e=m(2);o(4),h(G(5,3,e.totalSoldes,"1.2-2")),o(3),h(G(8,6,e.totalDebits,"1.2-2")),o(3),h(G(11,9,e.totalCredits,"1.2-2"))}}function wo(r,v){if(r&1){let e=M();a(0,"div",64)(1,"p-paginator",65),A("onPageChange",function(t){g(e);let s=m(2);return u(s.onPage(t))}),n(),a(2,"div",66),l(3),n()()}if(r&2){let e=m(2);o(),d("rows",10)("totalRecords",e.totalRecords),o(2),$e(" En totale il ",(e.items&&e.totalRecords==1,"y a")," ",e.items?e.totalRecords:0," ",e.items?e.totalRecords==1?"compte":"comptes":0,". ")}}function So(r,v){r&1&&C(0,"app-banque-create-admin")}function Io(r,v){r&1&&C(0,"app-banque-edit-admin")}function Ao(r,v){if(r&1&&C(0,"app-banque-view-admin",67),r&2){let e=m(2);d("totalCredits",e.totalCredits_transactions)("totalDebits",e.totalDebits_transactions)}}function Eo(r,v){if(r&1){let e=M();a(0,"div",3)(1,"div",4),C(2,"p-toast"),a(3,"div",5)(4,"p-toolbar",6),E(5,ho,2,6,"ng-template",7)(6,go,3,5,"ng-template",8),n(),E(7,uo,28,24,"div",9),a(8,"p-table",10,0),p(10,"translate"),y("selectionChange",function(t){g(e);let s=m();return b(s.selections,t)||(s.selections=t),u(t)}),E(11,_o,9,6,"ng-template",11)(12,vo,34,15,"ng-template",12)(13,bo,18,12,"ng-template",13)(14,yo,13,12,"ng-template",14)(15,wo,4,5,"ng-template",15),n()(),E(16,So,1,0,"app-banque-create-admin",16)(17,Io,1,0,"app-banque-edit-admin",16)(18,Ao,1,2,"app-banque-view-admin",17),C(19,"p-confirmDialog"),n()()}if(r&2){let e=m();o(7),d("ngIf",e.findByCriteriaShow),o(),f("currentPageReportTemplate",c(10,16,"les \xE9l\xE9ments de {first} \xE0 {last} sur {totalRecords} ")),d("value",e.comptes)("columns",e.cols)("rows",8)("paginator",!1)("globalFilterFields",V(18,po)),x("selection",e.selections),d("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",V(19,co)),o(8),d("ngIf",e.createDialog&&e.createActionIsValid),o(),d("ngIf",e.editDialog&&e.editActionIsValid),o(),d("ngIf",e.viewDialog&&e.viewActionIsValid),o(),H(V(20,mo))}}function Mo(r,v){r&1&&(a(0,"p-card",68)(1,"p",69),l(2," You don't have permission to access ! "),n()())}var En=(()=>{class r{constructor(e,i,t,s){this.service=e,this.transactionService=i,this.compteService=t,this.platformId=s,this.fileName=`List de Banques ${new Date().toLocaleDateString()}`,this.findByCriteriaShow=!1,this.cols=[],this.exportData=[],this.criteriaData=[],this._totalRecords=0,this.enableSecurity=!1,this.totalCredits=0,this.totalDebits=0,this.totalSoldes=0,this.totalCredits_transactions=0,this.totalDebits_transactions=0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.authService=w.injector.get(ot),this.exportService=w.injector.get(Ie)}ngOnInit(){this.findPaginatedByCriteria(),this.initExport(),this.initCol()}onExcelFileSelected(e){let i=e.target;i.files&&i.files.length>0&&(this.excelFile=i.files[0])}importExcel(){this.excelFile&&this.service.importExcel(this.excelFile).subscribe(e=>{this.items=e,this.messageService.add({severity:"success",summary:"Success",detail:"File uploaded successfully!",life:3e3})},e=>{this.messageService.add({severity:"error",summary:"Error",detail:"File uploaded with Error!",life:3e3})})}findPaginatedByCriteria(){this.compteService.findAllByBanqueNotNull().subscribe(e=>{this.comptes=e,this.totalRecords=e.length,this.selections=new Array,this.calculateTotals(e)})}findPaginatedByCriteria1(){this.compteService.findAllByBanqueNotNull().subscribe(e=>{this.comptes=e,this.totalRecords=e.length,this.selections=new Array,this.calculateTotals(e)})}onPage(e){this.criteria.page=e.page,this.criteria.maxResults=e.rows,this.findPaginatedByCriteria()}edit(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e.banque).subscribe(i=>{this.item=i,console.log(i),this.editDialog=!0})})}calculateTotals(e){this.totalSoldes=e.reduce((i,t)=>i+(t.solde||0),0),this.totalDebits=e.reduce((i,t)=>i+(t.debit||0),0),this.totalCredits=e.reduce((i,t)=>i+(t.credit||0),0)}view(e){return P(this,null,function*(){this.compteService.findByIdWithAssociatedList(e).subscribe(i=>{this.compte=i,this.viewDialog=!0,this.transactionService.findPaginatedByCriteria(this.transactionService.criteria).subscribe(t=>{let _=t.list.filter(de=>de.compteSource?.id===i.id||de.compteDestination?.id===i.id),D=0,le=0;_.forEach(de=>{let tt=Number(de.montant||0);de.compteDestination?.id===i.id?D+=tt:de.compteSource?.id===i.id&&(le+=tt)}),this.transactionService.items=_,this.totalCredits_transactions=D,this.totalDebits_transactions=le})})})}openCreate(){return P(this,null,function*(){this.item=new Fe,this.createDialog=!0})}deleteMultiple(){return P(this,null,function*(){this.confirmationService.confirm({message:"Voulez-vous supprimer ces \xE9l\xE9ments ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Ok"},accept:()=>{this.service.deleteMultiple().subscribe(()=>{for(let e of this.selections){let i=this.items.findIndex(t=>t.id===e.id);this.items.splice(i,1)}this.selections=new Array,this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Les \xE9l\xE9ments s\xE9lectionn\xE9s ont \xE9t\xE9 supprim\xE9s",life:3e3})},e=>console.log(e))}})})}isSelectionDisabled(){return this.selections==null||this.selections.length==0}delete(e){return P(this,null,function*(){this.confirmationService.confirm({message:"Voulez-vous supprimer cet \xE9l\xE9ment ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Ok"},accept:()=>{this.compteService.delete(e).subscribe(i=>{i>0&&(this.findPaginatedByCriteria(),this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Banque Supprim\xE9",life:3e3}))},i=>console.log(i))}})})}duplicate(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.initDuplicate(i),this.item=i,this.item.id=null,this.createDialog=!0})})}initExport(){this.excelPdfButons=[{label:"CSV",icon:"pi pi-file",command:()=>{this.prepareColumnExport(),this.exportService.exporterCSV(this.criteriaData,this.exportData,this.fileName)}},{label:"XLS",icon:"pi pi-file-excel",command:()=>{this.prepareColumnExport(),this.exportService.exporterExcel(this.criteriaData,this.exportData,this.fileName)}},{label:"PDF",icon:"pi pi-file-pdf",command:()=>{this.prepareColumnExport(),this.exportService.exporterPdf(this.criteriaData,this.exportData,this.fileName)}}]}exportPdf(e){this.service.exportPdf(e).subscribe(i=>{let t=new Blob([i],{type:"application/pdf"}),s=window.URL.createObjectURL(t),_=document.createElement("a");_.href=s,_.download=this.pdfName,_.setAttribute("target","_blank"),_.click(),window.URL.revokeObjectURL(s)},i=>{console.error(i)})}showSearch(){this.findByCriteriaShow=!this.findByCriteriaShow}update(){this.service.edit().subscribe(e=>{let i=this.items.findIndex(t=>t.id===this.item.id);this.items[i]=e,this.editDialog=!1,this.item=new Fe},e=>{console.log(e)})}save(){this.service.save().subscribe(e=>{e!=null?(this.items.push(K({},e)),this.createDialog=!1,this.item=new Fe):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Element existant"})},e=>{console.log(e)})}initCol(){this.cols=[{field:"code",header:"Code"},{field:"label",header:"Label"},{field:"nom",header:"Nom"},{field:"numeroCompte",header:"Numero compte"},{field:"solde",header:"Solde"}]}initDuplicate(e){}prepareColumnExport(){this.exportData=this.comptes.map(e=>({"Nom De Compte":e.banque?.nom,Solde:e.solde,Debit:e.debit,Credit:e.credit,"Date De Creation":this.datePipe.transform(e.dateCreation,"dd/MM/yyyy hh:mm")})),this.exportData.push({"Nom De Compte":"TOTAL",Solde:this.totalSoldes,Debit:this.totalDebits,Credit:this.totalCredits}),this.criteriaData=[{"Nom De Compte":this.criteria.banque?.nom?this.criteria.banque?.nom:I.emptyForExport,"Debit Min":this.criteria.debitMin?this.criteria.debitMin:I.emptyForExport,"Debit Max":this.criteria.debitMax?this.criteria.debitMax:I.emptyForExport,"Credit Min":this.criteria.creditMin?this.criteria.creditMin:I.emptyForExport,"Credit Max":this.criteria.creditMax?this.criteria.creditMax:I.emptyForExport,"Solde Min":this.criteria.soldeMin?this.criteria.soldeMin:I.emptyForExport,"Solde Max":this.criteria.soldeMax?this.criteria.soldeMax:I.emptyForExport,"Date De Creation Min":this.criteria.dateCreationFrom?this.datePipe.transform(this.criteria.dateCreationFrom,"dd/MM/yyyy hh:mm"):I.emptyForExport,"Date De Creation Max":this.criteria.dateCreationTo?this.datePipe.transform(this.criteria.dateCreationTo,"dd/MM/yyyy hh:mm"):I.emptyForExport}]}get items(){return this.service.items}set items(e){this.service.items=e}get selections(){return this.service.selections}set selections(e){this.service.selections=e}get item(){return this.service.item}set item(e){this.service.item=e}get createDialog(){return this.service.createDialog}set createDialog(e){this.service.createDialog=e}get editDialog(){return this.service.editDialog}set editDialog(e){this.service.editDialog=e}get viewDialog(){return this.service.viewDialog}set viewDialog(e){this.service.viewDialog=e}get criteria(){return this.compteService.criteria}set criteria(e){this.compteService.criteria=e}get dateFormat(){return I.dateFormatList}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e}get pdfName(){return this._pdfName}set pdfName(e){this._pdfName=e}get createActionIsValid(){return this.service.createActionIsValid}set createActionIsValid(e){this.service.createActionIsValid=e}get editActionIsValid(){return this.service.editActionIsValid}set editActionIsValid(e){this.service.editActionIsValid=e}get listActionIsValid(){return this.service.listActionIsValid}set listActionIsValid(e){this.service.listActionIsValid=e}get deleteActionIsValid(){return this.service.deleteActionIsValid}set deleteActionIsValid(e){this.service.deleteActionIsValid=e}get viewActionIsValid(){return this.service.viewActionIsValid}set viewActionIsValid(e){this.service.viewActionIsValid=e}get duplicateActionIsValid(){return this.service.duplicateActionIsValid}set duplicateActionIsValid(e){this.service.duplicateActionIsValid=e}get createAction(){return this.service.createAction}set createAction(e){this.service.createAction=e}get listAction(){return this.service.listAction}set listAction(e){this.service.listAction=e}get editAction(){return this.service.editAction}set editAction(e){this.service.editAction=e}get deleteAction(){return this.service.deleteAction}set deleteAction(e){this.service.deleteAction=e}get viewAction(){return this.service.viewAction}set viewAction(e){this.service.viewAction=e}get duplicateAction(){return this.service.duplicateAction}set duplicateAction(e){this.service.duplicateAction=e}get entityName(){return this.service.entityName}set entityName(e){this.service.entityName=e}get comptes(){return this.compteService.items}set comptes(e){this.compteService.items=e}get compte(){return this.compteService.item}set compte(e){this.compteService.item=e}resetCriteria(){this.criteria=new yi,this.findPaginatedByCriteria()}static{this.\u0275fac=function(i){return new(i||r)(S(_e),S(me),S(Q),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-banque-list-admin"]],standalone:!1,decls:2,vars:2,consts:[["dt",""],["class","grid",4,"ngIf"],["header","Permission not allowed",4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 border border-surface rounded-lg",4,"ngIf"],["dataKey","id","styleClass","p-datatable-customers","selectionMode","multiple",3,"selectionChange","value","columns","rows","paginator","globalFilterFields","selection","rowHover","currentPageReportTemplate","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","summary"],[4,"ngIf"],[3,"totalCredits","totalDebits",4,"ngIf"],["pButton","","pRipple","",1,"p-button-secondary","mr-2","mb-2",3,"click","label","icon"],[1,"flex"],["icon","pi pi-download","styleClass","p-button-secondary",3,"label","model"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","p-4","border","border-surface","rounded-lg"],[1,"flex","flex-col","gap-2"],["for","5-1",1,"text-sm","font-semibold"],["mode","decimal","id","5-1",3,"ngModelChange","ngModel"],["for","5-2",1,"text-sm","font-semibold"],["mode","decimal","id","5-2",3,"ngModelChange","ngModel"],["for","4-1",1,"text-sm","font-semibold"],["id","4-1","dateFormat","dd-MM-yy",1,"p-fluid",3,"ngModelChange","ngModel","showIcon"],["for","4-2",1,"text-sm","font-semibold"],["id","4-2","dateFormat","dd-MM-yy",1,"p-fluid",3,"ngModelChange","ngModel","showIcon"],[1,"col-span-full","flex","justify-end","mt-4"],["pButton","","pRipple","",1,"px-4","py-2","mx-4","rounded-md","bg-red-500",3,"click","label"],[1,"pi","pi-sort-amount-down"],["pButton","","pRipple","",1,"px-4","py-2","rounded-md",3,"click","label"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","p-2","gap-4"],[1,"text-center","md:text-left"],[1,"relative","w-full","md:w-auto"],["iconPosition","left",1,"w-full","md:w-auto"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full","md:w-72","border","border-gray-300","rounded-md","p-2","focus:ring","focus:ring-blue-300",3,"input","placeholder"],[2,"width","3rem"],["pSortableColumn","solde"],[1,"p-d-flex","p-jc-between","p-ai-center"],[1,"mr-2"],["field","solde"],["pSortableColumn","debit"],["field","debit"],["pSortableColumn","credit"],["field","credit"],["pSortableColumn","dateCreation"],["field","dateCreation"],["pSortableColumn","banque"],[3,"value"],["pButton","","pRipple","","icon","pi pi-pencil","class","p-button-rounded p-button-info mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-list","class","p-button-rounded p-button-secondary mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","class","p-button-rounded p-button-danger mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-info","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-list",1,"p-button-rounded","p-button-secondary","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger","mr-2",3,"click"],[1,"font-semibold","bg-gray-100"],["colspan","1",1,"text-right","text-blue-600"],[1,"text-blue-600"],["colspan","4"],[1,"flex","flex-col","md:flex-row","justify-between","items-center"],[3,"onPageChange","rows","totalRecords"],[1,"p-d-flex","p-ai-center","p-jc-between"],[3,"totalCredits","totalDebits"],["header","Permission not allowed"],[1,"m-0"]],template:function(i,t){i&1&&E(0,Eo,20,21,"div",1)(1,Mo,3,0,"p-card",2),i&2&&(d("ngIf",t.listActionIsValid),o(),d("ngIf",!t.listActionIsValid))},dependencies:[he,we,O,ze,ne,Ge,nt,Qe,Ke,rt,U,oe,R,q,Se,Y,z,it,at,Ue,He,be,Ai,In,An,Zt,T,j],encapsulation:2})}}return r})();var Mn=ri(oi());var Ei=class extends At{};var Be=(()=>{class r{constructor(e){this.http=e,this._API="",this._validate=!1,this._createActionIsValid=!0,this._editActionIsValid=!0,this._listActionIsValid=!0,this._deleteActionIsValid=!0,this._viewActionIsValid=!0,this._duplicateActionIsValid=!0,this._createAction="create",this._listAction="list",this._editAction="edit",this._deleteAction="delete",this._viewAction="view",this._duplicateAction="duplicate",this.API_PERMISSION=I.apiUrl+"modelPermissionUser/"}findAll(){return this.http.get(this.API)}findAllOptimized(){return this.http.get(this.API+"optimized")}findPaginatedByCriteria(e){return this.http.post(this.API+"find-paginated-by-criteria",e)}save(){return this.http.post(this.API,this.item)}delete(e){return this.http.delete(this.API+"id/"+e.id)}edit(){return this.http.put(this.API,this.item)}findByCriteria(e){return this.http.post(this.API+"find-by-criteria",e)}findByIdWithAssociatedList(e){return this.http.get(this.API+"id/"+e.id)}deleteMultiple(){return this.http.post(this.API+"multiple",this.selections)}exportPdf(e){return this.http.post(this.API+"exportPdf/",e,{responseType:"arraybuffer"})}hasActionPermission(e,i){return this.http.get(this.API_PERMISSION+"user/"+e+"/model/"+this.entityName+"/action/"+i)}importExcel(e){let i=new FormData;return i.append("file",e,e.name),this.http.post(this.API+"import-excel",i)}format(e){if(e!=null){let i=new Date(e),t=(0,Mn.default)(i).format(I.dateFormatEdit);console.log(t),e=new Date(t)}return e}get API(){return I.apiUrlRentalmanagementms1+"admin/typePaiement/"}get items(){return this._items==null&&(this._items=new Array),this._items}set items(e){this._items=e}get item(){return this._item==null&&(this._item=new je),this._item}set item(e){this._item=e}get selections(){return this._selections==null&&(this._selections=new Array),this._selections}set selections(e){this._selections=e}get createDialog(){return this._createDialog}set createDialog(e){this._createDialog=e}get editDialog(){return this._editDialog}set editDialog(e){this._editDialog=e}get viewDialog(){return this._viewDialog}set viewDialog(e){this._viewDialog=e}get criteria(){return this._criteria==null&&(this._criteria=new Ei),this._criteria}set criteria(e){this._criteria=e}setApi(e){this._API=e}set validate(e){this._validate=e}get createAction(){return this._createAction}set createAction(e){this._createAction=e}get listAction(){return this._listAction}set listAction(e){this._listAction=e}get editAction(){return this._editAction}set editAction(e){this._editAction=e}get deleteAction(){return this._deleteAction}set deleteAction(e){this._deleteAction=e}get createActionIsValid(){return this._createActionIsValid}set createActionIsValid(e){this._createActionIsValid=e}get editActionIsValid(){return this._editActionIsValid}set editActionIsValid(e){this._editActionIsValid=e}get listActionIsValid(){return this._listActionIsValid}set listActionIsValid(e){this._listActionIsValid=e}get deleteActionIsValid(){return this._deleteActionIsValid}set deleteActionIsValid(e){this._deleteActionIsValid=e}get viewAction(){return this._viewAction}set viewAction(e){this._viewAction=e}get duplicateAction(){return this._duplicateAction}set duplicateAction(e){this._duplicateAction=e}get viewActionIsValid(){return this._viewActionIsValid}set viewActionIsValid(e){this._viewActionIsValid=e}get duplicateActionIsValid(){return this._duplicateActionIsValid}set duplicateActionIsValid(e){this._duplicateActionIsValid=e}get entityName(){return this._entityName}set entityName(e){this._entityName=e}static{this.\u0275fac=function(i){return new(i||r)(St(It))}}static{this.\u0275prov=ht({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var To=()=>({width:"70vw"});function Po(r,v){r&1&&(a(0,"tr")(1,"th"),l(2,"Date"),n(),a(3,"th"),l(4,"Montant"),n(),a(5,"th"),l(6,"Description"),n(),a(7,"th"),l(8,"Type transaction"),n(),a(9,"th"),l(10,"Mode paiement"),n(),a(11,"th"),l(12,"Type paiement"),n(),a(13,"th"),l(14,"Actions"),n()())}function Do(r,v){if(r&1){let e=M();a(0,"tr")(1,"td"),l(2),p(3,"date"),n(),a(4,"td"),l(5),n(),a(6,"td"),l(7),n(),a(8,"td"),l(9),n(),a(10,"td"),l(11),n(),a(12,"td"),l(13),n(),a(14,"td")(15,"p-button",35),A("click",function(){let t=g(e),s=t.$implicit,_=t.rowIndex,D=m(2);return u(D.deleteTransactions(s,_))}),n(),a(16,"p-button",36),A("click",function(){let t=g(e),s=t.$implicit,_=t.rowIndex,D=m(2);return u(D.editTransactions(s,_))}),n()()()}if(r&2){let e=v.$implicit,i=m(2);o(2),h(G(3,8,e.date,i.dateFormatColumn)),o(3),h(e.montant),o(2),h(e.description),o(2),h(e.typeTransaction==null?null:e.typeTransaction.label),o(2),h(e.modePaiement==null?null:e.modePaiement.label),o(2),h(e.typePaiement==null?null:e.typePaiement.label),o(2),d("rounded",!0),o(),d("rounded",!0)}}function Vo(r,v){if(r&1){let e=M();a(0,"p-tabView")(1,"p-tabPanel",3),p(2,"translate"),a(3,"div",4)(4,"div",5)(5,"label",6),l(6),p(7,"translate"),n(),a(8,"p-inputNumber",7),p(9,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.solde,t)||(s.item.solde=t),u(t)}),n()(),a(10,"div",5)(11,"label",8),l(12),p(13,"translate"),n(),a(14,"p-inputNumber",9),p(15,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.debit,t)||(s.item.debit=t),u(t)}),n()(),a(16,"div",5)(17,"label",10),l(18),p(19,"translate"),n(),a(20,"p-inputNumber",11),p(21,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.credit,t)||(s.item.credit=t),u(t)}),n()(),a(22,"div",5)(23,"label",12),l(24),p(25,"translate"),n(),a(26,"p-inputNumber",13),p(27,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.numeroCompte,t)||(s.item.numeroCompte=t),u(t)}),n()(),a(28,"div",5)(29,"label",14),l(30),p(31,"translate"),n(),a(32,"p-calendar",15),p(33,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.dateCreation,t)||(s.item.dateCreation=t),u(t)}),n()(),a(34,"div",5)(35,"label",16),l(36),p(37,"translate"),n(),a(38,"p-dropdown",17),p(39,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.banque,t)||(s.item.banque=t),u(t)}),n()()()(),a(40,"p-tabPanel",3),p(41,"translate"),a(42,"p-tabView",18),y("activeIndexChange",function(t){g(e);let s=m();return b(s.activeTab,t)||(s.activeTab=t),u(t)}),a(43,"p-tabPanel",19)(44,"div",20)(45,"div",5)(46,"label",6),l(47,"Date"),n(),a(48,"p-calendar",21),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.date,t)||(s.transactionsElement.date=t),u(t)}),n()(),a(49,"div",5)(50,"label",8),l(51,"Montant"),n(),a(52,"p-inputNumber",22),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.montant,t)||(s.transactionsElement.montant=t),u(t)}),n()(),a(53,"div",5)(54,"label",10),l(55,"Description"),n(),a(56,"input",23),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.description,t)||(s.transactionsElement.description=t),u(t)}),n()(),a(57,"div",5)(58,"label",24),l(59,"Type transaction"),n(),a(60,"p-dropdown",25),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.typeTransaction,t)||(s.transactionsElement.typeTransaction=t),u(t)}),n()(),a(61,"div",5)(62,"label",24),l(63,"Mode paiement"),n(),a(64,"p-dropdown",26),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.modePaiement,t)||(s.transactionsElement.modePaiement=t),u(t)}),n()(),a(65,"div",5)(66,"label",24),l(67,"Type paiement"),n(),a(68,"p-dropdown",27),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.typePaiement,t)||(s.transactionsElement.typePaiement=t),u(t)}),n()(),a(69,"div",28)(70,"button",29),A("click",function(){g(e);let t=m();return u(t.addTransactions())}),C(71,"i",30),l(72," OK "),n()()()(),a(73,"p-tabPanel",3)(74,"div",31)(75,"p-table",32),E(76,Po,15,0,"ng-template",33)(77,Do,17,11,"ng-template",34),n()()()()()()}if(r&2){let e=m();o(),f("header",c(2,50,"compte.tabPan")),o(5),h(c(7,52,"compte.solde")),o(2),f("placeholder",c(9,54,"compte.solde")),x("ngModel",e.item.solde),o(4),h(c(13,56,"compte.debit")),o(2),f("placeholder",c(15,58,"compte.debit")),x("ngModel",e.item.debit),o(4),h(c(19,60,"compte.credit")),o(2),f("placeholder",c(21,62,"compte.credit")),x("ngModel",e.item.credit),o(4),h(c(25,64,"compte.numeroCompte")),o(2),f("placeholder",c(27,66,"compte.numeroCompte")),x("ngModel",e.item.numeroCompte),o(4),h(c(31,68,"compte.dateCreation")),o(2),f("placeholder",c(33,70,"compte.dateCreation")),f("dateFormat",e.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",e.item.dateCreation),o(4),h(c(37,72,"compte.banque")),o(2),f("placeholder",c(39,74,"compte.banque")),d("options",e.banques),x("ngModel",e.item.banque),d("filter",!0)("showClear",!0),o(2),f("header",c(41,76,"compte.transactions")),o(2),x("activeIndex",e.activeTab),o(6),f("dateFormat",e.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",e.transactionsElement.date),d("showIcon",!0),o(4),x("ngModel",e.transactionsElement.montant),o(4),x("ngModel",e.transactionsElement.description),o(4),d("options",e.typeTransactions),x("ngModel",e.transactionsElement.typeTransaction),d("filter",!0)("showClear",!0),o(4),d("options",e.modePaiements),x("ngModel",e.transactionsElement.modePaiement),d("filter",!0)("showClear",!0),o(4),d("options",e.typePaiements),x("ngModel",e.transactionsElement.typePaiement),d("filter",!0)("showClear",!0),o(5),X("header","Liste ",(e.item.transactions==null?null:e.item.transactions.length)>0?"("+(e.item.transactions==null?null:e.item.transactions.length)+")":"",""),o(2),d("value",e.item.transactions)("scrollable",!0)}}function Bo(r,v){if(r&1){let e=M();a(0,"div",37)(1,"button",38),p(2,"translate"),A("click",function(){g(e);let t=m();return u(t.save())}),C(3,"i",39),l(4),p(5,"translate"),n(),a(6,"button",40),A("click",function(){g(e);let t=m();return u(t.hideCreateDialog())}),C(7,"i",41),l(8),p(9,"translate"),n()()}r&2&&(o(),f("label",c(2,3,"validate")),o(3),B(" ",c(5,5,"validate")," "),o(4),B(" ",c(9,7,"cancel")," "))}var Tn=(()=>{class r{constructor(e,i,t,s,_,D,le){this.service=e,this.transactionService=i,this.typePaiementService=t,this.banqueService=s,this.modePaiementService=_,this.typeTransactiontService=D,this.platformId=le,this._submitted=!1,this._errorMessages=new Array,this._activeTab=0,this.transactionsIndex=-1,this._transactionsElement=new Ae,this._validBanqueCode=!0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.transactionsElement.typeTransaction=new ut,this.typeTransactiontService.findAll().subscribe(e=>this.typeTransactions=e),this.transactionsElement.modePaiement=new Ne,this.modePaiementService.findAll().subscribe(e=>this.modePaiements=e),this.transactionsElement.typePaiement=new je,this.typePaiementService.findAll().subscribe(e=>this.typePaiements=e),this.banqueService.findAll().subscribe(e=>this.banques=e)}save(){this.submitted=!0,this.validateForm(),this.errorMessages.length===0?this.saveWithShowOption(!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs sur le formulaire"})}saveWithShowOption(e){this.service.save().subscribe(i=>{i!=null?(this.items.push(K({},i)),this.createDialog=!1,this.submitted=!1,this.item=new ae):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Element existant"})},i=>{console.log(i)})}hideCreateDialog(){this.createDialog=!1,this.setValidation(!0)}validateTransactions(){this.errorMessages=new Array}setValidation(e){}addTransactions(){this.item.transactions==null&&(this.item.transactions=new Array),this.validateTransactions(),this.errorMessages.length===0?(this.transactionsIndex==-1?this.item.transactions.push(K({},this.transactionsElement)):this.item.transactions[this.transactionsIndex]=this.transactionsElement,this.transactionsElement=new Ae,this.transactionsIndex=-1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs suivant : "+this.errorMessages})}deleteTransactions(e,i){this.item.transactions.splice(i,1)}editTransactions(e,i){this.transactionsElement=K({},e),this.transactionsIndex=i,this.activeTab=0}validateForm(){this.errorMessages=new Array}openCreateBanque(e){return P(this,null,function*(){(yield this.roleService.isPermitted("Banque","add"))?(this.banque=new Fe,this.createBanqueDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}openCreateTypePaiement(e){return P(this,null,function*(){(yield this.roleService.isPermitted("TypePaiement","add"))?(this.typePaiement=new je,this.createTypePaiementDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}openCreateModePaiement(e){return P(this,null,function*(){(yield this.roleService.isPermitted("ModePaiement","add"))?(this.modePaiement=new Ne,this.createModePaiementDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}get typeTransaction(){return this.typeTransactiontService.item}set typeTransaction(e){this.typeTransactiontService.item=e}get typeTransactions(){return this.typeTransactiontService.items}set typeTransactions(e){this.typeTransactiontService.items=e}get createTypeTransactionDialog(){return this.typeTransactiontService.createDialog}set createTypeTransactionDialog(e){this.typeTransactiontService.createDialog=e}get banque(){return this.banqueService.item}set banque(e){this.banqueService.item=e}get banques(){return this.banqueService.items}set banques(e){this.banqueService.items=e}get createBanqueDialog(){return this.banqueService.createDialog}set createBanqueDialog(e){this.banqueService.createDialog=e}get typePaiement(){return this.typePaiementService.item}set typePaiement(e){this.typePaiementService.item=e}get typePaiements(){return this.typePaiementService.items}set typePaiements(e){this.typePaiementService.items=e}get createTypePaiementDialog(){return this.typePaiementService.createDialog}set createTypePaiementDialog(e){this.typePaiementService.createDialog=e}get modePaiement(){return this.modePaiementService.item}set modePaiement(e){this.modePaiementService.item=e}get modePaiements(){return this.modePaiementService.items}set modePaiements(e){this.modePaiementService.items=e}get createModePaiementDialog(){return this.modePaiementService.createDialog}set createModePaiementDialog(e){this.modePaiementService.createDialog=e}get validBanqueCode(){return this._validBanqueCode}set validBanqueCode(e){this._validBanqueCode=e}get transactionsElement(){return this._transactionsElement==null&&(this._transactionsElement=new Ae),this._transactionsElement}set transactionsElement(e){this._transactionsElement=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get createDialog(){return this.service.createDialog}set createDialog(e){this.service.createDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatCreate}get dateFormatColumn(){return I.dateFormatCreate}get submitted(){return this._submitted}set submitted(e){this._submitted=e}get errorMessages(){return this._errorMessages==null&&(this._errorMessages=new Array),this._errorMessages}set errorMessages(e){this._errorMessages=e}get validate(){return this.service.validate}set validate(e){this.service.validate=e}get activeTab(){return this._activeTab}set activeTab(e){this._activeTab=e}static{this.\u0275fac=function(i){return new(i||r)(S(Q),S(me),S(Be),S(_e),S(ve),S(ge),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-create-admin"]],standalone:!1,decls:4,vars:11,consts:[["styleClass","p-fluid",3,"visibleChange","visible","header","modal","maximizable","draggable","resizable"],["pTemplate","content"],["pTemplate","footer"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","1",1,"text-sm","font-semibold"],["id","1",3,"ngModelChange","placeholder","ngModel"],["for","2",1,"text-sm","font-semibold"],["id","2",3,"ngModelChange","placeholder","ngModel"],["for","3",1,"text-sm","font-semibold"],["id","3",3,"ngModelChange","placeholder","ngModel"],["for","4",1,"text-sm","font-semibold"],["id","4",3,"ngModelChange","placeholder","ngModel"],["for","6",1,"text-sm","font-semibold"],["appendTo","body","id","6",1,"w-full",3,"ngModelChange","showTime","showSeconds","placeholder","ngModel","dateFormat"],["for","7",1,"text-sm","font-semibold"],["appendTo","body","id","7","filterMatchMode","contains","optionLabel","label",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],[3,"activeIndexChange","activeIndex"],["header","Cre\u0301ation"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","p-4"],["appendTo","body","id","1","placeholder","Date",1,"w-full",3,"ngModelChange","showTime","showSeconds","ngModel","dateFormat","showIcon"],["id","montant","placeholder","Montant",3,"ngModelChange","ngModel"],["type","text","pInputText","","placeholder","Description","id","3","autofocus","",3,"ngModelChange","ngModel"],[1,"text-sm","font-semibold"],["appendTo","body","id","4","filterMatchMode","contains","optionLabel","label","placeholder","Type transaction",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],["appendTo","body","id","5","filterMatchMode","contains","optionLabel","label","placeholder","Mode paiement",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],["appendTo","body","id","6","filterMatchMode","contains","optionLabel","label","placeholder","Type paiement",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],[1,"flex","justify-end","md:col-span-3"],["pButton","","type","button",1,"bg-green-500","text-white","px-4","py-2","rounded-md","hover:bg-green-700",3,"click"],[1,"pi","pi-plus"],[1,"card","p-4"],["scrollHeight","200px",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],["pButton","","type","button","icon","pi pi-times","severity","danger",1,"mr-2",3,"click","rounded"],["pButton","","type","button","icon","pi pi-pencil","severity","success",1,"mr-2",3,"click","rounded"],[1,"flex","justify-end","space-x-3","p-4"],[1,"bg-blue-500","text-white","px-4","py-2","rounded-md","hover:bg-primary",3,"click","label"],[1,"pi","pi-check"],[1,"border","border-gray-400","text-gray-600","hover:bg-gray-200","px-4","py-2","rounded-md",3,"click"],[1,"pi","pi-times"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),p(1,"translate"),y("visibleChange",function(_){return b(t.createDialog,_)||(t.createDialog=_),_}),E(2,Vo,78,78,"ng-template",1)(3,Bo,10,9,"ng-template",2),n()),i&2&&(H(V(10,To)),f("header",c(1,8,"compte.tabPan")),x("visible",t.createDialog),d("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!1))},dependencies:[O,ne,se,U,oe,ye,re,R,q,ce,J,ie,Y,z,T,j],encapsulation:2})}}return r})();var Fo=()=>({width:"70vw"});function Wo(r,v){r&1&&(a(0,"tr")(1,"th"),l(2,"Date"),n(),a(3,"th"),l(4,"Montant"),n(),a(5,"th"),l(6,"Description"),n(),a(7,"th"),l(8,"Type transaction"),n(),a(9,"th"),l(10,"Mode paiement"),n(),a(11,"th"),l(12,"Type paiement"),n()())}function ko(r,v){if(r&1&&(a(0,"tr")(1,"td"),l(2),p(3,"date"),n(),a(4,"td"),l(5),n(),a(6,"td"),l(7),n(),a(8,"td"),l(9),n(),a(10,"td"),l(11),n(),a(12,"td"),l(13),n()()),r&2){let e=v.$implicit,i=m(2);o(2),h(G(3,6,e.date,i.dateFormatColumn)),o(3),h(e.montant),o(2),h(e.description),o(2),h(e.typeTransaction==null?null:e.typeTransaction.label),o(2),h(e.modePaiement==null?null:e.modePaiement.label),o(2),h(e.typePaiement==null?null:e.typePaiement.label)}}function jo(r,v){if(r&1&&(a(0,"p-tabView")(1,"p-tabPanel",3),p(2,"translate"),a(3,"div",4)(4,"div",5)(5,"label",6),l(6),p(7,"translate"),n(),C(8,"p-inputNumber",7),p(9,"translate"),n(),a(10,"div",5)(11,"label",8),l(12),p(13,"translate"),n(),C(14,"p-inputNumber",9),p(15,"translate"),n(),a(16,"div",5)(17,"label",10),l(18),p(19,"translate"),n(),C(20,"p-inputNumber",11),p(21,"translate"),n(),a(22,"div",5)(23,"label",12),l(24),p(25,"translate"),n(),C(26,"p-inputNumber",13),p(27,"translate"),n(),a(28,"div",5)(29,"label",14),l(30),p(31,"translate"),n(),C(32,"p-calendar",15),p(33,"translate"),n(),a(34,"div",5)(35,"label",16),l(36),p(37,"translate"),n(),C(38,"input",17),p(39,"translate"),n()()(),a(40,"p-tabPanel",3),p(41,"translate"),a(42,"div",18)(43,"p-table",19),E(44,Wo,13,0,"ng-template",20)(45,ko,14,9,"ng-template",21),n()()()()),r&2){let e=m();o(),f("header",c(2,31,"compte.tabPan")),o(5),h(c(7,33,"compte.solde")),o(2),f("placeholder",c(9,35,"compte.solde")),d("disabled",!0)("ngModel",e.item.solde),o(4),h(c(13,37,"compte.debit")),o(2),f("placeholder",c(15,39,"compte.debit")),d("disabled",!0)("ngModel",e.item.debit),o(4),h(c(19,41,"compte.credit")),o(2),f("placeholder",c(21,43,"compte.credit")),d("disabled",!0)("ngModel",e.item.credit),o(4),h(c(25,45,"compte.numeroCompte")),o(2),f("placeholder",c(27,47,"compte.numeroCompte")),d("disabled",!0)("ngModel",e.item.numeroCompte),o(4),h(c(31,49,"compte.dateCreation")),o(2),f("placeholder",c(33,51,"compte.dateCreation")),f("dateFormat",e.dateFormat),d("disabled",!0)("showTime",!0)("showSeconds",!1)("ngModel",e.item.dateCreation),o(4),h(c(37,53,"compte.banque")),o(2),f("placeholder",c(39,55,"compte.banque")),d("disabled",!0)("ngModel",e.item.banque==null?null:e.item.banque.label),o(2),f("header",c(41,57,"compte.transactions")),o(3),d("value",e.item.transactions)("scrollable",!0)}}function No(r,v){if(r&1){let e=M();a(0,"div",22)(1,"div")(2,"button",23),A("click",function(){g(e);let t=m();return u(t.hideViewDialog())}),C(3,"i",24),l(4," Annuler "),n()()()}}var Pn=(()=>{class r{constructor(e,i,t,s,_,D){this.service=e,this.transactionService=i,this.typePaiementService=t,this.banqueService=s,this.modePaiementService=_,this.typeTransactiontService=D,this._submitted=!1,this._errorMessages=new Array,this.transactions=new Ae,this.transactionss=[],this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){}get typeTransaction(){return this.typeTransactiontService.item}set typeTransaction(e){this.typeTransactiontService.item=e}get typeTransactions(){return this.typeTransactiontService.items}set typeTransactions(e){this.typeTransactiontService.items=e}get banque(){return this.banqueService.item}set banque(e){this.banqueService.item=e}get banques(){return this.banqueService.items}set banques(e){this.banqueService.items=e}get typePaiement(){return this.typePaiementService.item}set typePaiement(e){this.typePaiementService.item=e}get typePaiements(){return this.typePaiementService.items}set typePaiements(e){this.typePaiementService.items=e}get modePaiement(){return this.modePaiementService.item}set modePaiement(e){this.modePaiementService.item=e}get modePaiements(){return this.modePaiementService.items}set modePaiements(e){this.modePaiementService.items=e}hideViewDialog(){this.viewDialog=!1}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get viewDialog(){return this.service.viewDialog}set viewDialog(e){this.service.viewDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatView}get dateFormatColumn(){return I.dateFormatList}static{this.\u0275fac=function(i){return new(i||r)(S(Q),S(me),S(Be),S(_e),S(ve),S(ge))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-view-admin"]],standalone:!1,decls:4,vars:8,consts:[["styleClass","p-fluid",3,"visibleChange","visible","header","modal"],["pTemplate","content"],["pTemplate","footer"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","1",1,"text-sm","font-semibold"],["id","1",3,"disabled","placeholder","ngModel"],["for","2",1,"text-sm","font-semibold"],["id","2",3,"disabled","placeholder","ngModel"],["for","3",1,"text-sm","font-semibold"],["id","3",3,"disabled","placeholder","ngModel"],["for","4",1,"text-sm","font-semibold"],["id","4",3,"disabled","placeholder","ngModel"],["for","6",1,"text-sm","font-semibold"],["id","6",1,"w-full",3,"disabled","showTime","showSeconds","placeholder","ngModel","dateFormat"],["for","7",1,"text-sm","font-semibold"],["type","text","pInputText","","autofocus","","id","7",3,"disabled","placeholder","ngModel"],[1,"card","p-4"],["scrollHeight","200px",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],[1,"flex","justify-end","p-4"],[1,"border","border-gray-400","font-semibold","py-2","px-4","rounded","shadow",3,"click"],[1,"pi","pi-times"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),p(1,"translate"),y("visibleChange",function(_){return b(t.viewDialog,_)||(t.viewDialog=_),_}),E(2,jo,46,59,"ng-template",1)(3,No,5,0,"ng-template",2),n()),i&2&&(H(V(7,Fo)),f("header",c(1,5,"compte.tabPan")),x("visible",t.viewDialog),d("modal",!0))},dependencies:[O,ne,se,U,re,R,q,J,ie,Y,z,T,j],encapsulation:2})}}return r})();var qo=()=>({width:"70vw"});function Oo(r,v){r&1&&(a(0,"tr")(1,"th"),l(2,"Date"),n(),a(3,"th"),l(4,"Montant"),n(),a(5,"th"),l(6,"Description"),n(),a(7,"th"),l(8,"Type transaction"),n(),a(9,"th"),l(10,"Mode paiement"),n(),a(11,"th"),l(12,"Type paiement"),n(),a(13,"th"),l(14,"Actions"),n()())}function Uo(r,v){if(r&1){let e=M();a(0,"tr")(1,"td"),l(2),p(3,"date"),n(),a(4,"td"),l(5),n(),a(6,"td"),l(7),n(),a(8,"td"),l(9),n(),a(10,"td"),l(11),n(),a(12,"td"),l(13),n(),a(14,"td")(15,"p-button",35),A("click",function(){let t=g(e),s=t.$implicit,_=t.rowIndex,D=m(2);return u(D.deleteTransactions(s,_))}),n(),a(16,"p-button",36),A("click",function(){let t=g(e),s=t.$implicit,_=t.rowIndex,D=m(2);return u(D.editTransactions(s,_))}),n()()()}if(r&2){let e=v.$implicit,i=m(2);o(2),h(G(3,8,e.date,i.dateFormatColumn)),o(3),h(e.montant),o(2),h(e.description),o(2),h(e.typeTransaction==null?null:e.typeTransaction.label),o(2),h(e.modePaiement==null?null:e.modePaiement.label),o(2),h(e.typePaiement==null?null:e.typePaiement.label),o(2),d("rounded",!0),o(),d("rounded",!0)}}function Ho(r,v){if(r&1){let e=M();a(0,"p-tabView")(1,"p-tabPanel",3),p(2,"translate"),a(3,"div",4)(4,"div",5)(5,"label",6),l(6),p(7,"translate"),n(),a(8,"p-inputNumber",7),p(9,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.solde,t)||(s.item.solde=t),u(t)}),n()(),a(10,"div",5)(11,"label",8),l(12),p(13,"translate"),n(),a(14,"p-inputNumber",9),p(15,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.debit,t)||(s.item.debit=t),u(t)}),n()(),a(16,"div",5)(17,"label",10),l(18),p(19,"translate"),n(),a(20,"p-inputNumber",11),p(21,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.credit,t)||(s.item.credit=t),u(t)}),n()(),a(22,"div",5)(23,"label",12),l(24),p(25,"translate"),n(),a(26,"p-inputNumber",13),p(27,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.numeroCompte,t)||(s.item.numeroCompte=t),u(t)}),n()(),a(28,"div",5)(29,"label",14),l(30),p(31,"translate"),n(),a(32,"p-calendar",15),p(33,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.dateCreation,t)||(s.item.dateCreation=t),u(t)}),n()(),a(34,"div",5)(35,"label",16),l(36),p(37,"translate"),n(),a(38,"p-dropdown",17),p(39,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.banque,t)||(s.item.banque=t),u(t)}),n()()()(),a(40,"p-tabPanel",3),p(41,"translate"),a(42,"p-tabView",18),y("activeIndexChange",function(t){g(e);let s=m();return b(s.activeTab,t)||(s.activeTab=t),u(t)}),a(43,"p-tabPanel",19)(44,"div",20)(45,"div",5)(46,"label",6),l(47,"Date"),n(),a(48,"p-calendar",21),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.date,t)||(s.transactionsElement.date=t),u(t)}),n()(),a(49,"div",5)(50,"label",8),l(51,"Montant"),n(),a(52,"p-inputNumber",22),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.montant,t)||(s.transactionsElement.montant=t),u(t)}),n()(),a(53,"div",5)(54,"label",10),l(55,"Description"),n(),a(56,"input",23),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.description,t)||(s.transactionsElement.description=t),u(t)}),n()(),a(57,"div",5)(58,"label",24),l(59,"Type transaction"),n(),a(60,"p-dropdown",25),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.typeTransaction,t)||(s.transactionsElement.typeTransaction=t),u(t)}),n()(),a(61,"div",5)(62,"label",24),l(63,"Mode paiement"),n(),a(64,"p-dropdown",26),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.modePaiement,t)||(s.transactionsElement.modePaiement=t),u(t)}),n()(),a(65,"div",5)(66,"label",24),l(67,"Type paiement"),n(),a(68,"p-dropdown",27),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.typePaiement,t)||(s.transactionsElement.typePaiement=t),u(t)}),n()(),a(69,"div",28)(70,"button",29),A("click",function(){g(e);let t=m();return u(t.addTransactions())}),C(71,"i",30),l(72," OK "),n()()()(),a(73,"p-tabPanel",3)(74,"div",31)(75,"p-table",32),E(76,Oo,15,0,"ng-template",33)(77,Uo,17,11,"ng-template",34),n()()()()()()}if(r&2){let e=m();o(),f("header",c(2,50,"compte.tabPan")),o(5),h(c(7,52,"compte.solde")),o(2),f("placeholder",c(9,54,"compte.solde")),x("ngModel",e.item.solde),o(4),h(c(13,56,"compte.debit")),o(2),f("placeholder",c(15,58,"compte.debit")),x("ngModel",e.item.debit),o(4),h(c(19,60,"compte.credit")),o(2),f("placeholder",c(21,62,"compte.credit")),x("ngModel",e.item.credit),o(4),h(c(25,64,"compte.numeroCompte")),o(2),f("placeholder",c(27,66,"compte.numeroCompte")),x("ngModel",e.item.numeroCompte),o(4),h(c(31,68,"compte.dateCreation")),o(2),f("placeholder",c(33,70,"compte.dateCreation")),f("dateFormat",e.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",e.item.dateCreation),o(4),h(c(37,72,"compte.banque")),o(2),f("placeholder",c(39,74,"compte.banque")),d("options",e.banques),x("ngModel",e.item.banque),d("filter",!0)("showClear",!0),o(2),f("header",c(41,76,"compte.transactions")),o(2),x("activeIndex",e.activeTab),o(6),f("dateFormat",e.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",e.transactionsElement.date),d("showIcon",!0),o(4),x("ngModel",e.transactionsElement.montant),o(4),x("ngModel",e.transactionsElement.description),o(4),d("options",e.typeTransactions),x("ngModel",e.transactionsElement.typeTransaction),d("filter",!0)("showClear",!0),o(4),d("options",e.modePaiements),x("ngModel",e.transactionsElement.modePaiement),d("filter",!0)("showClear",!0),o(4),d("options",e.typePaiements),x("ngModel",e.transactionsElement.typePaiement),d("filter",!0)("showClear",!0),o(5),X("header","Liste ",(e.item.transactions==null?null:e.item.transactions.length)>0?"("+(e.item.transactions==null?null:e.item.transactions.length)+")":"",""),o(2),d("value",e.item.transactions)("scrollable",!0)}}function zo(r,v){if(r&1){let e=M();a(0,"div",37)(1,"button",38),p(2,"translate"),A("click",function(){g(e);let t=m();return u(t.edit())}),C(3,"i",39),l(4),p(5,"translate"),n(),a(6,"button",40),A("click",function(){g(e);let t=m();return u(t.hideEditDialog())}),C(7,"i",41),l(8),p(9,"translate"),n()()}r&2&&(o(),f("label",c(2,3,"validate")),o(3),B(" ",c(5,5,"validate")," "),o(4),B(" ",c(9,7,"cancel")," "))}var Dn=(()=>{class r{constructor(e,i,t,s,_,D,le){this.service=e,this.transactionService=i,this.typePaiementService=t,this.banqueService=s,this.modePaiementService=_,this.typeTransactiontService=D,this.platformId=le,this._submitted=!1,this._errorMessages=new Array,this._activeTab=0,this.transactionsIndex=-1,this._transactionsElement=new Ae,this._validBanqueCode=!0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.transactionsElement.typeTransaction=new ut,this.typeTransactiontService.findAll().subscribe(e=>this.typeTransactions=e),this.transactionsElement.modePaiement=new Ne,this.modePaiementService.findAll().subscribe(e=>this.modePaiements=e),this.transactionsElement.typePaiement=new je,this.typePaiementService.findAll().subscribe(e=>this.typePaiements=e),this.banqueService.findAll().subscribe(e=>this.banques=e)}prepareEdit(){this.item.dateCreation=this.service.format(this.item.dateCreation)}edit(){this.submitted=!0,this.prepareEdit(),this.validateForm(),this.errorMessages.length===0?this.editWithShowOption(!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs sur le formulaire"})}editWithShowOption(e){this.service.edit().subscribe(i=>{let t=this.items.findIndex(s=>s.id===this.item.id);this.items[t]=i,this.editDialog=!1,this.submitted=!1,this.item=new ae},i=>{console.log(i)})}hideEditDialog(){this.editDialog=!1,this.setValidation(!0)}validateTransactions(){this.errorMessages=new Array}setValidation(e){}addTransactions(){this.item.transactions==null&&(this.item.transactions=new Array),this.validateTransactions(),this.errorMessages.length===0?(this.transactionsIndex==-1?this.item.transactions.push(K({},this.transactionsElement)):this.item.transactions[this.transactionsIndex]=this.transactionsElement,this.transactionsElement=new Ae,this.transactionsIndex=-1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs suivant : "+this.errorMessages})}deleteTransactions(e,i){this.item.transactions.splice(i,1)}editTransactions(e,i){this.transactionsElement=K({},e),this.transactionsIndex=i,this.activeTab=0}validateForm(){this.errorMessages=new Array}openCreateBanque(e){return P(this,null,function*(){(yield this.roleService.isPermitted("Banque","edit"))?(this.banque=new Fe,this.createBanqueDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}openCreateTypePaiement(e){return P(this,null,function*(){(yield this.roleService.isPermitted("TypePaiement","edit"))?(this.typePaiement=new je,this.createTypePaiementDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}openCreateModePaiement(e){return P(this,null,function*(){(yield this.roleService.isPermitted("ModePaiement","edit"))?(this.modePaiement=new Ne,this.createModePaiementDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}get typeTransaction(){return this.typeTransactiontService.item}set typeTransaction(e){this.typeTransactiontService.item=e}get typeTransactions(){return this.typeTransactiontService.items}set typeTransactions(e){this.typeTransactiontService.items=e}get createTypeTransactionDialog(){return this.typeTransactiontService.createDialog}set createTypeTransactionDialog(e){this.typeTransactiontService.createDialog=e}get banque(){return this.banqueService.item}set banque(e){this.banqueService.item=e}get banques(){return this.banqueService.items}set banques(e){this.banqueService.items=e}get createBanqueDialog(){return this.banqueService.createDialog}set createBanqueDialog(e){this.banqueService.createDialog=e}get typePaiement(){return this.typePaiementService.item}set typePaiement(e){this.typePaiementService.item=e}get typePaiements(){return this.typePaiementService.items}set typePaiements(e){this.typePaiementService.items=e}get createTypePaiementDialog(){return this.typePaiementService.createDialog}set createTypePaiementDialog(e){this.typePaiementService.createDialog=e}get modePaiement(){return this.modePaiementService.item}set modePaiement(e){this.modePaiementService.item=e}get modePaiements(){return this.modePaiementService.items}set modePaiements(e){this.modePaiementService.items=e}get createModePaiementDialog(){return this.modePaiementService.createDialog}set createModePaiementDialog(e){this.modePaiementService.createDialog=e}get transactionsElement(){return this._transactionsElement==null&&(this._transactionsElement=new Ae),this._transactionsElement}set transactionsElement(e){this._transactionsElement=e}get validBanqueCode(){return this._validBanqueCode}set validBanqueCode(e){this._validBanqueCode=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get editDialog(){return this.service.editDialog}set editDialog(e){this.service.editDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatCreate}get dateFormatColumn(){return I.dateFormatCreate}get submitted(){return this._submitted}set submitted(e){this._submitted=e}get errorMessages(){return this._errorMessages==null&&(this._errorMessages=new Array),this._errorMessages}set errorMessages(e){this._errorMessages=e}get validate(){return this.service.validate}set validate(e){this.service.validate=e}get activeTab(){return this._activeTab}set activeTab(e){this._activeTab=e}static{this.\u0275fac=function(i){return new(i||r)(S(Q),S(me),S(Be),S(_e),S(ve),S(ge),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-edit-admin"]],standalone:!1,decls:4,vars:11,consts:[["styleClass","p-fluid",3,"visibleChange","visible","header","modal","maximizable","draggable","resizable"],["pTemplate","content"],["pTemplate","footer"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","1",1,"text-sm","font-semibold"],["id","1",3,"ngModelChange","placeholder","ngModel"],["for","2",1,"text-sm","font-semibold"],["id","2",3,"ngModelChange","placeholder","ngModel"],["for","3",1,"text-sm","font-semibold"],["id","3",3,"ngModelChange","placeholder","ngModel"],["for","4",1,"text-sm","font-semibold"],["id","4",3,"ngModelChange","placeholder","ngModel"],["for","6",1,"text-sm","font-semibold"],["appendTo","body","id","6",1,"w-full",3,"ngModelChange","showTime","showSeconds","placeholder","ngModel","dateFormat"],["for","7",1,"text-sm","font-semibold"],["appendTo","body","id","7","filterMatchMode","contains","optionLabel","label",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],[3,"activeIndexChange","activeIndex"],["header","Cre\u0301ation"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","p-4"],["appendTo","body","id","1","placeholder","Date",1,"w-full",3,"ngModelChange","showTime","showSeconds","ngModel","dateFormat","showIcon"],["id","montant","placeholder","Montant",3,"ngModelChange","ngModel"],["type","text","pInputText","","placeholder","Description","id","3","autofocus","",3,"ngModelChange","ngModel"],[1,"text-sm","font-semibold"],["appendTo","body","id","4","filterMatchMode","contains","optionLabel","label","placeholder","Type transaction",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],["appendTo","body","id","5","filterMatchMode","contains","optionLabel","label","placeholder","Mode paiement",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],["appendTo","body","id","6","filterMatchMode","contains","optionLabel","label","placeholder","Type paiement",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],[1,"flex","justify-end","md:col-span-3"],["pButton","","type","button",1,"bg-green-500","text-white","px-4","py-2","rounded-md","hover:bg-green-700",3,"click"],[1,"pi","pi-plus"],[1,"card","p-4"],["scrollHeight","200px",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],["pButton","","type","button","icon","pi pi-times","severity","danger",1,"mr-2",3,"click","rounded"],["pButton","","type","button","icon","pi pi-pencil","severity","success",1,"mr-2",3,"click","rounded"],[1,"flex","justify-end","space-x-3","p-4"],[1,"bg-blue-500","text-white","px-4","py-2","rounded-md","hover:bg-primary",3,"click","label"],[1,"pi","pi-check"],[1,"border","border-gray-400","text-gray-600","hover:bg-gray-200","px-4","py-2","rounded-md",3,"click"],[1,"pi","pi-times"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),p(1,"translate"),y("visibleChange",function(_){return b(t.editDialog,_)||(t.editDialog=_),_}),E(2,Ho,78,78,"ng-template",1)(3,zo,10,9,"ng-template",2),n()),i&2&&(H(V(10,qo)),f("header",c(1,8,"compte.tabPan")),x("visible",t.editDialog),d("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!1))},dependencies:[O,ne,se,U,oe,ye,re,R,q,ce,J,ie,Y,z,T,j],encapsulation:2})}}return r})();var Qo=()=>["solde","debit","credit","numeroCompte","dateCreation","banquelabel"],Ko=()=>[10,25,50],Xo=()=>({width:"450px"});function Yo(r,v){if(r&1){let e=M();a(0,"button",18),p(1,"translate"),A("click",function(){g(e);let t=m(3);return u(t.openCreate())}),n()}r&2&&X("label"," ",c(1,2,"new"),"")}function Jo(r,v){if(r&1){let e=M();E(0,Yo,2,4,"button",16),a(1,"button",17),p(2,"translate"),A("click",function(){g(e);let t=m(2);return u(t.showSearch())}),n()}if(r&2){let e=m(2);d("ngIf",e.createActionIsValid),o(),X("label"," ",c(2,5,"search"),""),X("icon","pi pi-",e.findByCriteriaShow?"angle-down":"angle-right","")}}function Zo(r,v){if(r&1&&(a(0,"div",19),C(1,"p-splitButton",20),p(2,"translate"),n()),r&2){let e=m(2);o(),X("label"," ",c(2,3,"export"),""),d("model",e.excelPdfButons)}}function $o(r,v){if(r&1){let e=M();a(0,"div",21)(1,"div",22)(2,"label",23),l(3),p(4,"translate"),n(),a(5,"p-inputNumber",24),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.soldeMin,t)||(s.criteria.soldeMin=t),u(t)}),n()(),a(6,"div",22)(7,"label",25),l(8),p(9,"translate"),n(),a(10,"p-inputNumber",26),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.soldeMax,t)||(s.criteria.soldeMax=t),u(t)}),n()(),a(11,"div",22)(12,"label",27),l(13),p(14,"translate"),n(),a(15,"p-inputNumber",28),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.debitMin,t)||(s.criteria.debitMin=t),u(t)}),n()(),a(16,"div",22)(17,"label",29),l(18),p(19,"translate"),n(),a(20,"p-inputNumber",30),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.debitMax,t)||(s.criteria.debitMax=t),u(t)}),n()(),a(21,"div",22)(22,"label",31),l(23),p(24,"translate"),n(),a(25,"p-inputNumber",32),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.creditMin,t)||(s.criteria.creditMin=t),u(t)}),n()(),a(26,"div",22)(27,"label",33),l(28),p(29,"translate"),n(),a(30,"p-inputNumber",34),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.creditMax,t)||(s.criteria.creditMax=t),u(t)}),n()(),a(31,"div",22)(32,"label",35),l(33),p(34,"translate"),n(),a(35,"p-inputNumber",36),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.numeroCompteMin,t)||(s.criteria.numeroCompteMin=t),u(t)}),n()(),a(36,"div",22)(37,"label",37),l(38),p(39,"translate"),n(),a(40,"p-inputNumber",38),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.numeroCompteMax,t)||(s.criteria.numeroCompteMax=t),u(t)}),n()(),a(41,"div",22)(42,"label",39),l(43),p(44,"translate"),n(),a(45,"p-calendar",40),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.dateCreationFrom,t)||(s.criteria.dateCreationFrom=t),u(t)}),n()(),a(46,"div",22)(47,"label",41),l(48),p(49,"translate"),n(),a(50,"p-calendar",42),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.dateCreationTo,t)||(s.criteria.dateCreationTo=t),u(t)}),n()(),a(51,"div",22)(52,"label",43),l(53),p(54,"translate"),n(),a(55,"p-dropdown",44),p(56,"translate"),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.banque,t)||(s.criteria.banque=t),u(t)}),n()(),a(57,"div",45)(58,"button",46),p(59,"translate"),A("click",function(){g(e);let t=m(2);return u(t.findPaginatedByCriteria())}),C(60,"i",47),l(61),p(62,"translate"),n()()()}if(r&2){let e=m(2);o(3),h(c(4,30,"compte.soldeMin")),o(2),x("ngModel",e.criteria.soldeMin),o(3),h(c(9,32,"compte.soldeMax")),o(2),x("ngModel",e.criteria.soldeMax),o(3),h(c(14,34,"compte.debitMin")),o(2),x("ngModel",e.criteria.debitMin),o(3),h(c(19,36,"compte.debitMax")),o(2),x("ngModel",e.criteria.debitMax),o(3),h(c(24,38,"compte.creditMin")),o(2),x("ngModel",e.criteria.creditMin),o(3),h(c(29,40,"compte.creditMax")),o(2),x("ngModel",e.criteria.creditMax),o(3),h(c(34,42,"compte.numeroCompteMin")),o(2),x("ngModel",e.criteria.numeroCompteMin),o(3),h(c(39,44,"compte.numeroCompteMax")),o(2),x("ngModel",e.criteria.numeroCompteMax),o(3),h(c(44,46,"compte.dateCreationMin")),o(2),x("ngModel",e.criteria.dateCreationFrom),d("showIcon",!0),o(3),h(c(49,48,"compte.dateCreationMax")),o(2),x("ngModel",e.criteria.dateCreationTo),d("showIcon",!0),o(3),h(c(54,50,"compte.banque")),o(2),f("placeholder",c(56,52,"compte.banque")),d("options",e.banques),x("ngModel",e.criteria.banque),d("filter",!0)("showClear",!0),o(3),f("label",c(59,54,"validate")),o(3),B(" ",c(62,56,"validate")," ")}}function es(r,v){if(r&1){let e=M();a(0,"div",48)(1,"h5",49),l(2),p(3,"translate"),n(),a(4,"span",50)(5,"p-iconfield",51),C(6,"p-inputicon",52),a(7,"input",53),p(8,"translate"),A("input",function(t){g(e),m();let s=Oe(9);return u(s.filterGlobal(t.target.value,"contains"))}),n()()()()}r&2&&(o(2),h(c(3,2,"compte.header")),o(5),f("placeholder",c(8,4,"searchInput")))}function ts(r,v){r&1&&(a(0,"tr")(1,"th",54),C(2,"p-tableHeaderCheckbox"),n(),a(3,"th",55)(4,"div",56)(5,"span",57),l(6),p(7,"translate"),n(),C(8,"p-sortIcon",58),n()(),a(9,"th",59)(10,"div",56)(11,"span",57),l(12),p(13,"translate"),n(),C(14,"p-sortIcon",60),n()(),a(15,"th",61)(16,"div",56)(17,"span",57),l(18),p(19,"translate"),n(),C(20,"p-sortIcon",62),n()(),a(21,"th",63)(22,"div",56)(23,"span",57),l(24),p(25,"translate"),n(),C(26,"p-sortIcon",64),n()(),a(27,"th",65)(28,"div",56)(29,"span",57),l(30),p(31,"translate"),n(),C(32,"p-sortIcon",66),n()(),a(33,"th",67)(34,"div",56)(35,"span",57),l(36),p(37,"translate"),n(),C(38,"p-sortIcon",68),n()(),a(39,"th"),l(40,"Actions"),n()()),r&2&&(o(6),h(c(7,6,"compte.solde")),o(6),h(c(13,8,"compte.debit")),o(6),h(c(19,10,"compte.credit")),o(6),h(c(25,12,"compte.numeroCompte")),o(6),h(c(31,14,"compte.dateCreation")),o(6),h(c(37,16,"compte.banque")))}function is(r,v){if(r&1){let e=M();a(0,"button",73),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.edit(t))}),n()}}function ns(r,v){if(r&1){let e=M();a(0,"button",74),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.view(t))}),n()}}function as(r,v){if(r&1){let e=M();a(0,"button",75),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.delete(t))}),n()}}function rs(r,v){if(r&1&&(a(0,"tr")(1,"td"),C(2,"p-tableCheckbox",69),n(),a(3,"td"),l(4),n(),a(5,"td"),l(6),n(),a(7,"td"),l(8),n(),a(9,"td"),l(10),n(),a(11,"td"),l(12),p(13,"date"),n(),a(14,"td"),l(15),n(),a(16,"td"),E(17,is,1,0,"button",70)(18,ns,1,0,"button",71)(19,as,1,0,"button",72),n()()),r&2){let e=v.$implicit,i=m(2);o(2),d("value",e),o(2),h(e.solde),o(2),h(e.debit),o(2),h(e.credit),o(2),h(e.numeroCompte),o(2),h(G(13,10,e.dateCreation,"dd/MM/yyyy HH:mm")),o(3),h(e.banque==null?null:e.banque.label),o(2),d("ngIf",i.editActionIsValid),o(),d("ngIf",i.viewActionIsValid),o(),d("ngIf",i.deleteActionIsValid)}}function os(r,v){if(r&1){let e=M();a(0,"p-paginator",76),A("onPageChange",function(t){g(e);let s=m(2);return u(s.onPage(t))}),n(),a(1,"div",77),l(2),n()}if(r&2){let e=m(2);d("rows",10)("totalRecords",e.totalRecords),o(2),$e(" En totale il ",(e.items&&e.totalRecords==1,"y a")," ",e.items?e.totalRecords:0," ",e.items?e.totalRecords==1?"compte":"comptes":0,". ")}}function ss(r,v){r&1&&C(0,"app-compte-create-admin")}function ls(r,v){r&1&&C(0,"app-compte-edit-admin")}function ps(r,v){r&1&&C(0,"app-compte-view-admin")}function cs(r,v){if(r&1){let e=M();a(0,"div",3)(1,"div",4),C(2,"p-toast"),a(3,"div",5)(4,"p-toolbar",6),E(5,Jo,3,7,"ng-template",7)(6,Zo,3,5,"ng-template",8),n(),E(7,$o,63,58,"div",9),a(8,"p-table",10,0),p(10,"translate"),y("selectionChange",function(t){g(e);let s=m();return b(s.selections,t)||(s.selections=t),u(t)}),E(11,es,9,6,"ng-template",11)(12,ts,41,18,"ng-template",12)(13,rs,20,13,"ng-template",13)(14,os,3,5,"ng-template",14),n()(),E(15,ss,1,0,"app-compte-create-admin",15)(16,ls,1,0,"app-compte-edit-admin",15)(17,ps,1,0,"app-compte-view-admin",15),C(18,"p-confirmDialog"),n()()}if(r&2){let e=m();o(7),d("ngIf",e.findByCriteriaShow),o(),f("currentPageReportTemplate",c(10,16,"les \xE9l\xE9ments de {first} \xE0 {last} sur {totalRecords} ")),d("value",e.items)("columns",e.cols)("rows",8)("paginator",!1)("globalFilterFields",V(18,Qo)),x("selection",e.selections),d("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",V(19,Ko)),o(7),d("ngIf",e.createDialog&&e.createActionIsValid),o(),d("ngIf",e.editDialog&&e.editActionIsValid),o(),d("ngIf",e.viewDialog&&e.viewActionIsValid),o(),H(V(20,Xo))}}function ms(r,v){r&1&&(a(0,"p-card",78)(1,"p",79),l(2," You don't have permission to access ! "),n()())}var Vn=(()=>{class r{constructor(e,i,t,s,_,D,le){this.service=e,this.transactionService=i,this.typePaiementService=t,this.banqueService=s,this.modePaiementService=_,this.typeTransactiontService=D,this.platformId=le,this.fileName="Compte",this.findByCriteriaShow=!1,this.cols=[],this.exportData=[],this.criteriaData=[],this._totalRecords=0,this.enableSecurity=!1,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.authService=w.injector.get(ot),this.exportService=w.injector.get(Ie)}ngOnInit(){this.findPaginatedByCriteria(),this.initExport(),this.initCol(),this.loadBanque()}onExcelFileSelected(e){let i=e.target;i.files&&i.files.length>0&&(this.excelFile=i.files[0])}importExcel(){this.excelFile&&this.service.importExcel(this.excelFile).subscribe(e=>{this.items=e,this.messageService.add({severity:"success",summary:"Success",detail:"File uploaded successfully!",life:3e3})},e=>{this.messageService.add({severity:"error",summary:"Error",detail:"File uploaded with Error!",life:3e3})})}findPaginatedByCriteria(){this.service.findPaginatedByCriteria(this.criteria).subscribe(e=>{this.items=e.list,this.totalRecords=e.dataSize,this.selections=new Array},e=>console.log(e))}onPage(e){this.criteria.page=e.page,this.criteria.maxResults=e.rows,this.findPaginatedByCriteria()}edit(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.item=i,console.log(i),this.editDialog=!0})})}view(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.item=i,this.viewDialog=!0})})}openCreate(){return P(this,null,function*(){this.item=new ae,this.createDialog=!0})}deleteMultiple(){return P(this,null,function*(){this.confirmationService.confirm({message:"Voulez-vous supprimer ces \xE9l\xE9ments ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Ok"},accept:()=>{this.service.deleteMultiple().subscribe(()=>{for(let e of this.selections){let i=this.items.findIndex(t=>t.id===e.id);this.items.splice(i,1)}this.selections=new Array,this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Les \xE9l\xE9ments s\xE9lectionn\xE9s ont \xE9t\xE9 supprim\xE9s",life:3e3})},e=>console.log(e))}})})}isSelectionDisabled(){return this.selections==null||this.selections.length==0}delete(e){return P(this,null,function*(){this.confirmationService.confirm({message:"Voulez-vous supprimer cet \xE9l\xE9ment ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Ok"},accept:()=>{this.service.delete(e).subscribe(i=>{if(i>0){let t=this.items.indexOf(e);t>-1&&this.items.splice(t,1),this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Element Supprim\xE9",life:3e3})}},i=>console.log(i))}})})}duplicate(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.initDuplicate(i),this.item=i,this.item.id=null,this.createDialog=!0})})}initExport(){this.excelPdfButons=[{label:"CSV",icon:"pi pi-file",command:()=>{this.prepareColumnExport(),this.exportService.exporterCSV(this.criteriaData,this.exportData,this.fileName)}},{label:"XLS",icon:"pi pi-file-excel",command:()=>{this.prepareColumnExport(),this.exportService.exporterExcel(this.criteriaData,this.exportData,this.fileName)}},{label:"PDF",icon:"pi pi-file-pdf",command:()=>{this.prepareColumnExport(),this.exportService.exporterPdf(this.criteriaData,this.exportData,this.fileName)}}]}exportPdf(e){this.service.exportPdf(e).subscribe(i=>{let t=new Blob([i],{type:"application/pdf"}),s=window.URL.createObjectURL(t),_=document.createElement("a");_.href=s,_.download=this.pdfName,_.setAttribute("target","_blank"),_.click(),window.URL.revokeObjectURL(s)},i=>{console.error(i)})}showSearch(){this.findByCriteriaShow=!this.findByCriteriaShow}update(){this.service.edit().subscribe(e=>{let i=this.items.findIndex(t=>t.id===this.item.id);this.items[i]=e,this.editDialog=!1,this.item=new ae},e=>{console.log(e)})}save(){this.service.save().subscribe(e=>{e!=null?(this.items.push(K({},e)),this.createDialog=!1,this.item=new ae):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Element existant"})},e=>{console.log(e)})}initCol(){this.cols=[{field:"solde",header:"Solde"},{field:"debit",header:"Debit"},{field:"credit",header:"Credit"},{field:"numeroCompte",header:"Numero compte"},{field:"dateCreation",header:"Date creation"},{field:"banque?.label",header:"Banque"}]}loadBanque(){return P(this,null,function*(){this.banqueService.findAllOptimized().subscribe(e=>this.banques=e,e=>console.log(e))})}initDuplicate(e){e.transactions!=null&&e.transactions.forEach(i=>{i.compteSource=null,i.id=null})}prepareColumnExport(){this.service.findByCriteria(this.criteria).subscribe(e=>{this.exportData=e.map(i=>({Solde:i.solde,Debit:i.debit,Credit:i.credit,"Numero compte":i.numeroCompte,"Date creation":this.datePipe.transform(i.dateCreation,"dd/MM/yyyy hh:mm"),Banque:i.banque?.nom})),this.criteriaData=[{"Solde Min":this.criteria.soldeMin?this.criteria.soldeMin:I.emptyForExport,"Solde Max":this.criteria.soldeMax?this.criteria.soldeMax:I.emptyForExport,"Debit Min":this.criteria.debitMin?this.criteria.debitMin:I.emptyForExport,"Debit Max":this.criteria.debitMax?this.criteria.debitMax:I.emptyForExport,"Credit Min":this.criteria.creditMin?this.criteria.creditMin:I.emptyForExport,"Credit Max":this.criteria.creditMax?this.criteria.creditMax:I.emptyForExport,"Numero compte Min":this.criteria.numeroCompteMin?this.criteria.numeroCompteMin:I.emptyForExport,"Numero compte Max":this.criteria.numeroCompteMax?this.criteria.numeroCompteMax:I.emptyForExport,"Date creation Min":this.criteria.dateCreationFrom?this.datePipe.transform(this.criteria.dateCreationFrom,this.dateFormat):I.emptyForExport,"Date creation Max":this.criteria.dateCreationTo?this.datePipe.transform(this.criteria.dateCreationTo,this.dateFormat):I.emptyForExport}]})}get items(){return this.service.items}set items(e){this.service.items=e}get selections(){return this.service.selections}set selections(e){this.service.selections=e}get item(){return this.service.item}set item(e){this.service.item=e}get createDialog(){return this.service.createDialog}set createDialog(e){this.service.createDialog=e}get editDialog(){return this.service.editDialog}set editDialog(e){this.service.editDialog=e}get viewDialog(){return this.service.viewDialog}set viewDialog(e){this.service.viewDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatList}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e}get pdfName(){return this._pdfName}set pdfName(e){this._pdfName=e}get createActionIsValid(){return this.service.createActionIsValid}set createActionIsValid(e){this.service.createActionIsValid=e}get editActionIsValid(){return this.service.editActionIsValid}set editActionIsValid(e){this.service.editActionIsValid=e}get listActionIsValid(){return this.service.listActionIsValid}set listActionIsValid(e){this.service.listActionIsValid=e}get deleteActionIsValid(){return this.service.deleteActionIsValid}set deleteActionIsValid(e){this.service.deleteActionIsValid=e}get viewActionIsValid(){return this.service.viewActionIsValid}set viewActionIsValid(e){this.service.viewActionIsValid=e}get duplicateActionIsValid(){return this.service.duplicateActionIsValid}set duplicateActionIsValid(e){this.service.duplicateActionIsValid=e}get createAction(){return this.service.createAction}set createAction(e){this.service.createAction=e}get listAction(){return this.service.listAction}set listAction(e){this.service.listAction=e}get editAction(){return this.service.editAction}set editAction(e){this.service.editAction=e}get deleteAction(){return this.service.deleteAction}set deleteAction(e){this.service.deleteAction=e}get viewAction(){return this.service.viewAction}set viewAction(e){this.service.viewAction=e}get duplicateAction(){return this.service.duplicateAction}set duplicateAction(e){this.service.duplicateAction=e}get entityName(){return this.service.entityName}set entityName(e){this.service.entityName=e}static{this.\u0275fac=function(i){return new(i||r)(S(Q),S(me),S(Be),S(_e),S(ve),S(ge),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-list-admin"]],standalone:!1,decls:2,vars:2,consts:[["dt",""],["class","grid",4,"ngIf"],["header","Permission not allowed",4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 border border-surface rounded-lg",4,"ngIf"],["dataKey","id","styleClass","p-datatable-customers","selectionMode","multiple",3,"selectionChange","value","columns","rows","paginator","globalFilterFields","selection","rowHover","currentPageReportTemplate","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[4,"ngIf"],["pButton","","pRipple","","icon","pi pi-plus","class","p-button-info mr-2 mb-2",3,"label","click",4,"ngIf"],["pButton","","pRipple","",1,"p-button-secondary","mr-2","mb-2",3,"click","label","icon"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button-info","mr-2","mb-2",3,"click","label"],[1,"flex"],["icon","pi pi-download","styleClass","p-button-secondary",3,"label","model"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","p-4","border","border-surface","rounded-lg"],[1,"flex","flex-col","gap-2"],["for","1-1",1,"text-sm","font-semibold"],["mode","decimal","id","1-1",3,"ngModelChange","ngModel"],["for","1-2",1,"text-sm","font-semibold"],["mode","decimal","id","1-2",3,"ngModelChange","ngModel"],["for","2-1",1,"text-sm","font-semibold"],["mode","decimal","id","2-1",3,"ngModelChange","ngModel"],["for","2-2",1,"text-sm","font-semibold"],["mode","decimal","id","2-2",3,"ngModelChange","ngModel"],["for","3-1",1,"text-sm","font-semibold"],["mode","decimal","id","3-1",3,"ngModelChange","ngModel"],["for","3-2",1,"text-sm","font-semibold"],["mode","decimal","id","3-2",3,"ngModelChange","ngModel"],["for","4-1",1,"text-sm","font-semibold"],["mode","decimal","id","4-1",3,"ngModelChange","ngModel"],["for","4-2",1,"text-sm","font-semibold"],["mode","decimal","id","4-2",3,"ngModelChange","ngModel"],["for","6-1",1,"text-sm","font-semibold"],["id","6-1","dateFormat","dd-MM-yy",1,"p-fluid",3,"ngModelChange","ngModel","showIcon"],["for","6-2",1,"text-sm","font-semibold"],["id","6-2","dateFormat","dd-MM-yy",1,"p-fluid",3,"ngModelChange","ngModel","showIcon"],["for","7-2",1,"text-sm","font-semibold"],["id","7","optionLabel","label",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],[1,"col-span-full","flex","justify-end","mt-4"],["pButton","","pRipple","",1,"px-4","py-2","rounded-md",3,"click","label"],[1,"pi","pi-sort-amount-down"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","p-2","gap-4"],[1,"text-center","md:text-left"],[1,"relative","w-full","md:w-auto"],["iconPosition","left",1,"w-full","md:w-auto"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full","md:w-72","border","border-gray-300","rounded-md","p-2","focus:ring","focus:ring-blue-300",3,"input","placeholder"],[2,"width","3rem"],["pSortableColumn","solde"],[1,"p-d-flex","p-jc-between","p-ai-center"],[1,"mr-2"],["field","solde"],["pSortableColumn","debit"],["field","debit"],["pSortableColumn","credit"],["field","credit"],["pSortableColumn","numeroCompte"],["field","numeroCompte"],["pSortableColumn","dateCreation"],["field","dateCreation"],["pSortableColumn","banque"],["field","banque"],[3,"value"],["pButton","","pRipple","","icon","pi pi-pencil","class","p-button-rounded p-button-info mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-list","class","p-button-rounded p-button-secondary mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","class","p-button-rounded p-button-danger mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-info","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-list",1,"p-button-rounded","p-button-secondary","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger","mr-2",3,"click"],[3,"onPageChange","rows","totalRecords"],[1,"p-d-flex","p-ai-center","p-jc-between"],["header","Permission not allowed"],[1,"m-0"]],template:function(i,t){i&1&&E(0,cs,19,21,"div",1)(1,ms,3,0,"p-card",2),i&2&&(d("ngIf",t.listActionIsValid),o(),d("ngIf",!t.listActionIsValid))},dependencies:[he,we,O,ze,ne,Ge,nt,Qe,Ke,rt,U,oe,R,q,Se,ce,Y,z,it,at,Ue,He,be,Tn,Pn,Dn,T,j],encapsulation:2})}}return r})();var Ye=class extends $t{constructor(){super(),this.code="",this.label="",this.style="",this.description="",this.comptesCharges=new Array}};var qe=class extends $t{constructor(){super(),this.modePaiement=new Ne,this.code="",this.compteCharge=new wt,this.compteSource=new ae,this.label="",this.montant=null,this.date=null,this.isPaid=null,this.description="",this.typeCharge=new Ye,this.local=new ei}};var ni=class extends At{};var Bn=ri(oi());var Je=(()=>{class r{constructor(e){this.http=e,this._API="",this._validate=!1,this._createActionIsValid=!0,this._editActionIsValid=!0,this._listActionIsValid=!0,this._deleteActionIsValid=!0,this._viewActionIsValid=!0,this._duplicateActionIsValid=!0,this._createAction="create",this._listAction="list",this._editAction="edit",this._deleteAction="delete",this._viewAction="view",this._duplicateAction="duplicate",this.API_PERMISSION=I.apiUrl+"modelPermissionUser/"}findAll(){return this.http.get(this.API)}findAllOptimized(){return this.http.get(this.API+"optimized")}findPaginatedByCriteria(e){return this.http.post(this.API+"find-paginated-by-criteria",e)}save(){return this.http.post(this.API,this.item)}delete(e){return this.http.delete(this.API+"id/"+e.id)}edit(){return this.http.put(this.API,this.item)}findByCriteria(e){return this.http.post(this.API+"find-by-criteria",e)}findByIdWithAssociatedList(e){return this.http.get(this.API+"id/"+e.id)}deleteMultiple(){return this.http.post(this.API+"multiple",this.selections)}exportPdf(e){return this.http.post(this.API+"exportPdf/",e,{responseType:"arraybuffer"})}hasActionPermission(e,i){return this.http.get(this.API_PERMISSION+"user/"+e+"/model/"+this.entityName+"/action/"+i)}importExcel(e){let i=new FormData;return i.append("file",e,e.name),this.http.post(this.API+"import-excel",i)}format(e){if(e!=null){let i=new Date(e),t=(0,Bn.default)(i).format(I.dateFormatEdit);console.log(t),e=new Date(t)}return e}get API(){return I.apiUrlRentalmanagementms1+"admin/charge/"}get items(){return this._items==null&&(this._items=new Array),this._items}set items(e){this._items=e}get item(){return this._item==null&&(this._item=new qe),this._item}set item(e){this._item=e}get selections(){return this._selections==null&&(this._selections=new Array),this._selections}set selections(e){this._selections=e}get createDialog(){return this._createDialog}set createDialog(e){this._createDialog=e}get editDialog(){return this._editDialog}set editDialog(e){this._editDialog=e}get viewDialog(){return this._viewDialog}set viewDialog(e){this._viewDialog=e}get criteria(){return this._criteria==null&&(this._criteria=new ni),this._criteria}set criteria(e){this._criteria=e}setApi(e){this._API=e}set validate(e){this._validate=e}get createAction(){return this._createAction}set createAction(e){this._createAction=e}get listAction(){return this._listAction}set listAction(e){this._listAction=e}get editAction(){return this._editAction}set editAction(e){this._editAction=e}get deleteAction(){return this._deleteAction}set deleteAction(e){this._deleteAction=e}get createActionIsValid(){return this._createActionIsValid}set createActionIsValid(e){this._createActionIsValid=e}get editActionIsValid(){return this._editActionIsValid}set editActionIsValid(e){this._editActionIsValid=e}get listActionIsValid(){return this._listActionIsValid}set listActionIsValid(e){this._listActionIsValid=e}get deleteActionIsValid(){return this._deleteActionIsValid}set deleteActionIsValid(e){this._deleteActionIsValid=e}get viewAction(){return this._viewAction}set viewAction(e){this._viewAction=e}get duplicateAction(){return this._duplicateAction}set duplicateAction(e){this._duplicateAction=e}get viewActionIsValid(){return this._viewActionIsValid}set viewActionIsValid(e){this._viewActionIsValid=e}get duplicateActionIsValid(){return this._duplicateActionIsValid}set duplicateActionIsValid(e){this._duplicateActionIsValid=e}get entityName(){return this._entityName}set entityName(e){this._entityName=e}static{this.\u0275fac=function(i){return new(i||r)(St(It))}}static{this.\u0275prov=ht({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Ln=ri(oi());var Ti=class extends At{};var Ze=(()=>{class r{constructor(e){this.http=e,this._API="",this._validate=!1,this._createActionIsValid=!0,this._editActionIsValid=!0,this._listActionIsValid=!0,this._deleteActionIsValid=!0,this._viewActionIsValid=!0,this._duplicateActionIsValid=!0,this._createAction="create",this._listAction="list",this._editAction="edit",this._deleteAction="delete",this._viewAction="view",this._duplicateAction="duplicate",this.API_PERMISSION=I.apiUrl+"modelPermissionUser/"}findAll(){return this.http.get(this.API)}findAllOptimized(){return this.http.get(this.API+"optimized")}findPaginatedByCriteria(e){return this.http.post(this.API+"find-paginated-by-criteria",e)}save(){return this.http.post(this.API,this.item)}delete(e){return this.http.delete(this.API+"id/"+e.id)}edit(){return this.http.put(this.API,this.item)}findByCriteria(e){return this.http.post(this.API+"find-by-criteria",e)}findByIdWithAssociatedList(e){return this.http.get(this.API+"id/"+e.id)}deleteMultiple(){return this.http.post(this.API+"multiple",this.selections)}exportPdf(e){return this.http.post(this.API+"exportPdf/",e,{responseType:"arraybuffer"})}hasActionPermission(e,i){return this.http.get(this.API_PERMISSION+"user/"+e+"/model/"+this.entityName+"/action/"+i)}importExcel(e){let i=new FormData;return i.append("file",e,e.name),this.http.post(this.API+"import-excel",i)}format(e){if(e!=null){let i=new Date(e),t=(0,Ln.default)(i).format(I.dateFormatEdit);console.log(t),e=new Date(t)}return e}get API(){return I.apiUrlRentalmanagementms1+"admin/typeCharge/"}get items(){return this._items==null&&(this._items=new Array),this._items}set items(e){this._items=e}get item(){return this._item==null&&(this._item=new Ye),this._item}set item(e){this._item=e}get selections(){return this._selections==null&&(this._selections=new Array),this._selections}set selections(e){this._selections=e}get createDialog(){return this._createDialog}set createDialog(e){this._createDialog=e}get editDialog(){return this._editDialog}set editDialog(e){this._editDialog=e}get viewDialog(){return this._viewDialog}set viewDialog(e){this._viewDialog=e}get criteria(){return this._criteria==null&&(this._criteria=new Ti),this._criteria}set criteria(e){this._criteria=e}setApi(e){this._API=e}set validate(e){this._validate=e}get createAction(){return this._createAction}set createAction(e){this._createAction=e}get listAction(){return this._listAction}set listAction(e){this._listAction=e}get editAction(){return this._editAction}set editAction(e){this._editAction=e}get deleteAction(){return this._deleteAction}set deleteAction(e){this._deleteAction=e}get createActionIsValid(){return this._createActionIsValid}set createActionIsValid(e){this._createActionIsValid=e}get editActionIsValid(){return this._editActionIsValid}set editActionIsValid(e){this._editActionIsValid=e}get listActionIsValid(){return this._listActionIsValid}set listActionIsValid(e){this._listActionIsValid=e}get deleteActionIsValid(){return this._deleteActionIsValid}set deleteActionIsValid(e){this._deleteActionIsValid=e}get viewAction(){return this._viewAction}set viewAction(e){this._viewAction=e}get duplicateAction(){return this._duplicateAction}set duplicateAction(e){this._duplicateAction=e}get viewActionIsValid(){return this._viewActionIsValid}set viewActionIsValid(e){this._viewActionIsValid=e}get duplicateActionIsValid(){return this._duplicateActionIsValid}set duplicateActionIsValid(e){this._duplicateActionIsValid=e}get entityName(){return this._entityName}set entityName(e){this._entityName=e}static{this.\u0275fac=function(i){return new(i||r)(St(It))}}static{this.\u0275prov=ht({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Fn=ri(oi());var Pi=class extends At{};var xt=(()=>{class r{constructor(e){this.http=e,this._API="",this._validate=!1,this._createActionIsValid=!0,this._editActionIsValid=!0,this._listActionIsValid=!0,this._deleteActionIsValid=!0,this._viewActionIsValid=!0,this._duplicateActionIsValid=!0,this._createAction="create",this._listAction="list",this._editAction="edit",this._deleteAction="delete",this._viewAction="view",this._duplicateAction="duplicate",this.API_PERMISSION=I.apiUrl+"modelPermissionUser/"}findAll(){return this.http.get(this.API)}findAllOptimized(){return this.http.get(this.API+"optimized")}findPaginatedByCriteria(e){return this.http.post(this.API+"find-paginated-by-criteria",e)}save(){return this.http.post(this.API,this.item)}delete(e){return this.http.delete(this.API+"id/"+e.id)}edit(){return this.http.put(this.API,this.item)}findByCriteria(e){return this.http.post(this.API+"find-by-criteria",e)}findByIdWithAssociatedList(e){return this.http.get(this.API+"id/"+e.id)}deleteMultiple(){return this.http.post(this.API+"multiple",this.selections)}exportPdf(e){return this.http.post(this.API+"exportPdf/",e,{responseType:"arraybuffer"})}hasActionPermission(e,i){return this.http.get(this.API_PERMISSION+"user/"+e+"/model/"+this.entityName+"/action/"+i)}importExcel(e){let i=new FormData;return i.append("file",e,e.name),this.http.post(this.API+"import-excel",i)}format(e){if(e!=null){let i=new Date(e),t=(0,Fn.default)(i).format(I.dateFormatEdit);console.log(t),e=new Date(t)}return e}get API(){return I.apiUrlRentalmanagementms1+"admin/compteCharge/"}get items(){return this._items==null&&(this._items=new Array),this._items}set items(e){this._items=e}get item(){return this._item==null&&(this._item=new wt),this._item}set item(e){this._item=e}get selections(){return this._selections==null&&(this._selections=new Array),this._selections}set selections(e){this._selections=e}get createDialog(){return this._createDialog}set createDialog(e){this._createDialog=e}get editDialog(){return this._editDialog}set editDialog(e){this._editDialog=e}get viewDialog(){return this._viewDialog}set viewDialog(e){this._viewDialog=e}get criteria(){return this._criteria==null&&(this._criteria=new Pi),this._criteria}set criteria(e){this._criteria=e}setApi(e){this._API=e}set validate(e){this._validate=e}get createAction(){return this._createAction}set createAction(e){this._createAction=e}get listAction(){return this._listAction}set listAction(e){this._listAction=e}get editAction(){return this._editAction}set editAction(e){this._editAction=e}get deleteAction(){return this._deleteAction}set deleteAction(e){this._deleteAction=e}get createActionIsValid(){return this._createActionIsValid}set createActionIsValid(e){this._createActionIsValid=e}get editActionIsValid(){return this._editActionIsValid}set editActionIsValid(e){this._editActionIsValid=e}get listActionIsValid(){return this._listActionIsValid}set listActionIsValid(e){this._listActionIsValid=e}get deleteActionIsValid(){return this._deleteActionIsValid}set deleteActionIsValid(e){this._deleteActionIsValid=e}get viewAction(){return this._viewAction}set viewAction(e){this._viewAction=e}get duplicateAction(){return this._duplicateAction}set duplicateAction(e){this._duplicateAction=e}get viewActionIsValid(){return this._viewActionIsValid}set viewActionIsValid(e){this._viewActionIsValid=e}get duplicateActionIsValid(){return this._duplicateActionIsValid}set duplicateActionIsValid(e){this._duplicateActionIsValid=e}get entityName(){return this._entityName}set entityName(e){this._entityName=e}static{this.\u0275fac=function(i){return new(i||r)(St(It))}}static{this.\u0275prov=ht({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Di=(()=>{class r{constructor(e,i,t,s,_,D,le,de,tt){this.service=e,this.banqueService=i,this.compteService=t,this.compteChargeService=s,this.modePaiementService=_,this.caisseService=D,this.localService=le,this.typeChargeService=de,this.platformId=tt,this._submitted=!1,this._errorMessages=new Array,this._activeTab=0,this._validChargeCode=!0,this._validChargeLabel=!0,this._validTypeChargeCode=!0,this._validTypeChargeStyle=!0,this._validLocalCode=!0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.typeChargeService.findAll().subscribe(e=>this.typeCharges=e),this.localService.findAll().subscribe(e=>this.locals=e),this.banqueService.findPaginatedByCriteria(this.banqueService.criteria).subscribe(e=>{this.banqueService.items=e.list}),this.caisseService.findPaginatedByCriteria(this.caisseService.criteria).subscribe(e=>{this.caisseService.items=e.list}),this.compteService.findAllByBanqueNotNull().subscribe(e=>{this.comptes=e}),this.compteService.findAllByCaisseNotNull().subscribe(e=>{this.comptes.push(...e)}),this.modePaiementService.findPaginatedByCriteria(this.modePaiementService.criteria).subscribe(e=>{this.modePaiementService.items=e.list}),this.compteChargeService.findPaginatedByCriteria(this.compteChargeService.criteria).subscribe(e=>{this.compteCharges=e.list.filter(i=>i.code!="CHARGE")}),this.initCode()}initCode(){let e=Date.now();this.item.code=`CHARGE-${e}`}save(){this.submitted=!0,this.item.typeCharge=this.item.compteCharge.typeCharges.at(0),this.item.local=this.item.compteCharge.local,this.validateForm(),this.errorMessages.length===0?this.saveWithShowOption(!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs sur le formulaire"})}saveWithShowOption(e){this.service.save().subscribe(i=>{i!=null?(this.messageService.add({severity:"success",summary:"",detail:"Charge Cree avec Success"}),this.findPaginatedByCriteria(),this.createDialog=!1,this.submitted=!1,this.item=new qe):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Element existant"})},i=>{this.messageService.add({severity:"error",summary:"Erreurs",detail:"Erreur lors de la cr\xE9ation de la charge"})})}hideCreateDialog(){this.createDialog=!1,this.setValidation(!0)}get comptes(){return this.compteService.items}set comptes(e){this.compteService.items=e}setValidation(e){this.validChargeCode=e,this.validChargeLabel=e}validateForm(){this.errorMessages=new Array}validateChargeCode(){this.stringUtilService.isEmpty(this.item.code)?(this.errorMessages.push("Code non valide"),this.validChargeCode=!1):this.validChargeCode=!0}validateChargeLabel(){this.stringUtilService.isEmpty(this.item.label)?(this.errorMessages.push("Label non valide"),this.validChargeLabel=!1):this.validChargeLabel=!0}openCreateTypeCharge(e){return P(this,null,function*(){(yield this.roleService.isPermitted("TypeCharge","add"))?(this.typeCharge=new Ye,this.createTypeChargeDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}get local(){return this.localService.item}set local(e){this.localService.item=e}get locals(){return this.localService.items}set locals(e){this.localService.items=e}get createLocalDialog(){return this.localService.createDialog}set createLocalDialog(e){this.localService.createDialog=e}get typeCharge(){return this.typeChargeService.item}set typeCharge(e){this.typeChargeService.item=e}get typeCharges(){return this.typeChargeService.items}set typeCharges(e){this.typeChargeService.items=e}get createTypeChargeDialog(){return this.typeChargeService.createDialog}set createTypeChargeDialog(e){this.typeChargeService.createDialog=e}get validChargeCode(){return this._validChargeCode}set validChargeCode(e){this._validChargeCode=e}get validChargeLabel(){return this._validChargeLabel}set validChargeLabel(e){this._validChargeLabel=e}get validTypeChargeCode(){return this._validTypeChargeCode}set validTypeChargeCode(e){this._validTypeChargeCode=e}get validTypeChargeStyle(){return this._validTypeChargeStyle}set validTypeChargeStyle(e){this._validTypeChargeStyle=e}get validLocalCode(){return this._validLocalCode}set validLocalCode(e){this._validLocalCode=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get compteCharge(){return this.compteChargeService.item}set compteCharge(e){this.compteChargeService.item=e}get compteCharges(){return this.compteChargeService.items}set compteCharges(e){this.compteChargeService.items=e}get createDialog(){return this.service.createDialog}set createDialog(e){this.service.createDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatCreate}get dateFormatColumn(){return I.dateFormatCreate}get submitted(){return this._submitted}set submitted(e){this._submitted=e}get errorMessages(){return this._errorMessages==null&&(this._errorMessages=new Array),this._errorMessages}set errorMessages(e){this._errorMessages=e}get validate(){return this.service.validate}set validate(e){this.service.validate=e}get activeTab(){return this._activeTab}set activeTab(e){this._activeTab=e}findPaginatedByCriteria(){this.service.findPaginatedByCriteria(this.criteria).subscribe(e=>{this.items=e.list,this.compteService.findPaginatedByCriteria(this.compteService.criteria).subscribe(i=>{this.comptes=i.list})},e=>console.log(e))}get compte(){return this.compteService.item}set compte(e){this.compteService.item=e}get modePaiements(){return this.modePaiementService.items}set modePaiements(e){this.modePaiementService.items=e}cancel(){this.navigateToList()}navigateToList(){this.router.navigate(["/app/admin/finance/charge/list"])}static{this.\u0275fac=function(i){return new(i||r)(S(Je),S(_e),S(Q),S(xt),S(ve),S(pt),S(ke),S(Ze),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-charge-create-admin"]],standalone:!1,decls:55,vars:72,consts:[[1,"container","mx-auto","p-4"],[1,"bg-white","shadow-md","rounded-lg"],[1,"border-b","p-4","flex","justify-between","items-center","bg-blue-200","text-white"],[1,"text-xl","font-semibold"],[1,"text-white","hover:bg-blue-600","p-2","rounded-md",3,"click"],[1,"pi","pi-times"],[1,"p-4"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","3",1,"text-sm","font-semibold"],["mode","decimal","locale","fr-FR","currency","MAD","id","3",3,"ngModelChange","minFractionDigits","maxFractionDigits","prefix","suffix","min","step","placeholder","ngModel"],["for","4",1,"text-sm","font-semibold"],["appendTo","body","id","4",1,"w-full",3,"ngModelChange","showTime","showSeconds","placeholder","ngModel","dateFormat"],["for","source",1,"text-sm","font-semibold"],["appendTo","body","filterMatchMode","contains","optionLabel","code",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],["appendTo","body","id","4","filterMatchMode","contains","optionLabel","nom",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],["appendTo","body","id","4","filterMatchMode","contains","optionLabel","label",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],["for","8",1,"text-sm","font-semibold"],["rows","8","type","text","pInputText","","id","8",3,"ngModelChange","placeholder","ngModel"],[1,"flex","justify-end","space-x-3","p-4","border-t"],["icon","pi pi-check","styleClass","p-button-primary",3,"click","label"],["icon","pi pi-times","styleClass","p-button-secondary",3,"click","label"]],template:function(i,t){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),l(4),p(5,"translate"),n(),a(6,"button",4),A("click",function(){return t.cancel()}),C(7,"i",5),n()(),C(8,"p-toast"),a(9,"div",6)(10,"p-tabView")(11,"p-tabPanel",7),p(12,"translate"),a(13,"div",8)(14,"div",9)(15,"label",10),l(16),p(17,"translate"),n(),a(18,"p-inputNumber",11),p(19,"translate"),y("ngModelChange",function(_){return b(t.item.montant,_)||(t.item.montant=_),_}),n()(),a(20,"div",9)(21,"label",12),l(22),p(23,"translate"),n(),a(24,"p-calendar",13),p(25,"translate"),y("ngModelChange",function(_){return b(t.item.date,_)||(t.item.date=_),_}),n()(),a(26,"div",9)(27,"label",14),l(28),p(29,"translate"),n(),a(30,"p-dropdown",15),p(31,"translate"),y("ngModelChange",function(_){return b(t.item.compteSource,_)||(t.item.compteSource=_),_}),n()(),a(32,"div",9)(33,"label",12),l(34),p(35,"translate"),n(),a(36,"p-dropdown",16),p(37,"translate"),y("ngModelChange",function(_){return b(t.item.compteCharge,_)||(t.item.compteCharge=_),_}),n()(),a(38,"div",9)(39,"label",12),l(40),p(41,"translate"),n(),a(42,"p-dropdown",17),p(43,"translate"),y("ngModelChange",function(_){return b(t.item.modePaiement,_)||(t.item.modePaiement=_),_}),n()(),a(44,"div",9)(45,"label",18),l(46),p(47,"translate"),n(),a(48,"textarea",19),p(49,"translate"),y("ngModelChange",function(_){return b(t.item.description,_)||(t.item.description=_),_}),n()()()()()(),a(50,"div",20)(51,"p-button",21),p(52,"translate"),A("click",function(){return t.save()}),n(),a(53,"p-button",22),p(54,"translate"),A("click",function(){return t.cancel()}),n()()()()),i&2&&(o(4),h(c(5,40,"charge.tabPan")),o(7),f("header",c(12,42,"charge.tabPan")),o(5),h(c(17,44,"charge.montant")),o(2),f("placeholder",c(19,46,"charge.montant")),d("minFractionDigits",2)("maxFractionDigits",4)("prefix","")("suffix"," MAD")("min",0)("step",.01),x("ngModel",t.item.montant),o(4),h(c(23,48,"charge.date")),o(2),f("placeholder",c(25,50,"charge.date")),f("dateFormat",t.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",t.item.date),o(4),h(c(29,52,"Compte Source")),o(2),f("placeholder",c(31,54,"Compte Source")),d("options",t.comptes),x("ngModel",t.item.compteSource),d("filter",!0)("showClear",!0),o(4),h(c(35,56,"Compte Charge")),o(2),f("placeholder",c(37,58,"Compte Charge")),d("options",t.compteCharges),x("ngModel",t.item.compteCharge),d("filter",!0)("showClear",!0),o(4),h(c(41,60,"reglement.modepaiement")),o(2),f("placeholder",c(43,62,"reglement.modepaiement")),d("options",t.modePaiements),x("ngModel",t.item.modePaiement),d("filter",!0)("showClear",!0),o(4),h(c(47,64,"charge.description")),o(2),f("placeholder",c(49,66,"charge.description")),x("ngModel",t.item.description),o(3),f("label",c(52,68,"validate")),o(2),f("label",c(54,70,"cancel")))},dependencies:[we,U,ye,re,R,q,ce,J,ie,Y,z,j],encapsulation:2})}}return r})();var gs=()=>({width:"70vw"});function us(r,v){if(r&1&&(a(0,"p-tabView")(1,"p-tabPanel",3),p(2,"translate"),a(3,"div",4)(4,"div",5)(5,"label",6),l(6),p(7,"translate"),n(),C(8,"input",7),p(9,"translate"),n(),a(10,"div",5)(11,"label",8),l(12),p(13,"translate"),n(),C(14,"input",9),p(15,"translate"),n(),a(16,"div",5)(17,"label",10),l(18),p(19,"translate"),n(),C(20,"p-inputNumber",11),p(21,"translate"),n(),a(22,"div",5)(23,"label",12),l(24),p(25,"translate"),n(),C(26,"p-calendar",13),p(27,"translate"),n(),a(28,"div",5)(29,"label",14),l(30),p(31,"translate"),n(),C(32,"input",15),p(33,"translate"),n(),a(34,"div",5)(35,"label",16),l(36),p(37,"translate"),n(),C(38,"input",17),p(39,"translate"),n(),a(40,"div",5)(41,"label",18),l(42),p(43,"translate"),n(),C(44,"p-inputSwitch",19),n(),a(45,"div",5)(46,"label",20),l(47),p(48,"translate"),n(),C(49,"input",21),p(50,"translate"),n()()()()),r&2){let e=m();o(),f("header",c(2,35,"charge.tabPan")),o(5),h(c(7,37,"charge.code")),o(2),f("placeholder",c(9,39,"charge.code")),d("disabled",!0)("ngModel",e.item.code),o(4),h(c(13,41,"charge.label")),o(2),f("placeholder",c(15,43,"charge.label")),d("disabled",!0)("ngModel",e.item.label),o(4),h(c(19,45,"charge.montant")),o(2),f("placeholder",c(21,47,"charge.montant")),d("disabled",!0)("ngModel",e.item.montant),o(4),h(c(25,49,"charge.date")),o(2),f("placeholder",c(27,51,"charge.date")),f("dateFormat",e.dateFormat),d("disabled",!0)("showTime",!0)("showSeconds",!1)("ngModel",e.item.date),o(4),h(c(31,53,"charge.typeCharge")),o(2),f("placeholder",c(33,55,"charge.typeCharge")),d("disabled",!0)("ngModel",e.item.typeCharge==null?null:e.item.typeCharge.label),o(4),h(c(37,57,"charge.local")),o(2),f("placeholder",c(39,59,"charge.local")),d("disabled",!0)("ngModel",e.item.local==null?null:e.item.local.code),o(4),h(c(43,61,"charge.isPaid")),o(2),d("disabled",!0)("ngModel",e.item.isPaid),o(3),h(c(48,63,"charge.description")),o(2),f("placeholder",c(50,65,"charge.description")),d("disabled",!0)("ngModel",e.item.description)}}function _s(r,v){if(r&1){let e=M();a(0,"div",22)(1,"div")(2,"button",23),A("click",function(){g(e);let t=m();return u(t.hideViewDialog())}),C(3,"i",24),l(4," Annuler "),n()()()}}var Wn=(()=>{class r{constructor(e,i,t){this.service=e,this.localService=i,this.typeChargeService=t,this._submitted=!1,this._errorMessages=new Array,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){}get local(){return this.localService.item}set local(e){this.localService.item=e}get locals(){return this.localService.items}set locals(e){this.localService.items=e}get typeCharge(){return this.typeChargeService.item}set typeCharge(e){this.typeChargeService.item=e}get typeCharges(){return this.typeChargeService.items}set typeCharges(e){this.typeChargeService.items=e}hideViewDialog(){this.viewDialog=!1}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get viewDialog(){return this.service.viewDialog}set viewDialog(e){this.service.viewDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatView}get dateFormatColumn(){return I.dateFormatList}static{this.\u0275fac=function(i){return new(i||r)(S(Je),S(ke),S(Ze))}}static{this.\u0275cmp=L({type:r,selectors:[["app-charge-view-admin"]],standalone:!1,decls:4,vars:8,consts:[["styleClass","p-fluid",3,"visibleChange","visible","header","modal"],["pTemplate","content"],["pTemplate","footer"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","1",1,"text-sm","font-semibold"],["type","text","pInputText","","autofocus","","id","1",3,"disabled","placeholder","ngModel"],["for","2",1,"text-sm","font-semibold"],["type","text","pInputText","","autofocus","","id","2",3,"disabled","placeholder","ngModel"],["for","3",1,"text-sm","font-semibold"],["id","3",3,"disabled","placeholder","ngModel"],["for","4",1,"text-sm","font-semibold"],["id","4",1,"w-full",3,"disabled","showTime","showSeconds","placeholder","ngModel","dateFormat"],["for","5",1,"text-sm","font-semibold"],["type","text","pInputText","","autofocus","","id","5",3,"disabled","placeholder","ngModel"],["for","6",1,"text-sm","font-semibold"],["type","text","pInputText","","autofocus","","id","6",3,"disabled","placeholder","ngModel"],["for","7",1,"text-sm","font-semibold"],["id","7",3,"disabled","ngModel"],["for","8",1,"text-sm","font-semibold"],["type","text","pInputText","","autofocus","","id","8",3,"disabled","placeholder","ngModel"],[1,"flex","justify-end","p-4"],[1,"border","border-gray-400","font-semibold","py-2","px-4","rounded","shadow",3,"click"],[1,"pi","pi-times"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),p(1,"translate"),y("visibleChange",function(_){return b(t.viewDialog,_)||(t.viewDialog=_),_}),E(2,us,51,67,"ng-template",1)(3,_s,5,0,"ng-template",2),n()),i&2&&(H(V(7,gs)),f("header",c(1,5,"charge.tabPan")),x("visible",t.viewDialog),d("modal",!0))},dependencies:[O,se,U,re,R,q,J,ie,bi,Y,z,j],encapsulation:2})}}return r})();var Cs=()=>({width:"70vw"}),kn=r=>({"ng-invalid ng-dirty":r});function fs(r,v){r&1&&(a(0,"small",7),l(1,"Code is obligatory."),n())}function xs(r,v){r&1&&(a(0,"small",7),l(1,"Label is obligatory."),n())}function bs(r,v){if(r&1){let e=M();a(0,"p-tabView")(1,"p-tabPanel",3),p(2,"translate"),a(3,"div",4)(4,"div",5)(5,"label",6),l(6),p(7,"translate"),a(8,"span",7),l(9,"*"),n()(),a(10,"input",8),p(11,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.code,t)||(s.item.code=t),u(t)}),n(),E(12,fs,2,0,"small",9),n(),a(13,"div",5)(14,"label",10),l(15),p(16,"translate"),a(17,"span",7),l(18,"*"),n()(),a(19,"input",11),p(20,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.label,t)||(s.item.label=t),u(t)}),n(),E(21,xs,2,0,"small",9),n(),a(22,"div",5)(23,"label",12),l(24),p(25,"translate"),n(),a(26,"p-inputNumber",13),p(27,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.montant,t)||(s.item.montant=t),u(t)}),n()(),a(28,"div",5)(29,"label",14),l(30),p(31,"translate"),n(),a(32,"p-calendar",15),p(33,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.date,t)||(s.item.date=t),u(t)}),n()(),a(34,"div",5)(35,"label",16),l(36),p(37,"translate"),n(),a(38,"p-dropdown",17),p(39,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.typeCharge,t)||(s.item.typeCharge=t),u(t)}),n()(),a(40,"div",5)(41,"label",18),l(42),p(43,"translate"),n(),a(44,"p-dropdown",19),p(45,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.local,t)||(s.item.local=t),u(t)}),n()(),a(46,"div",5)(47,"label",20),l(48),p(49,"translate"),n(),a(50,"p-inputSwitch",21),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.isPaid,t)||(s.item.isPaid=t),u(t)}),n()(),a(51,"div",5)(52,"label",22),l(53),p(54,"translate"),n(),a(55,"input",23),p(56,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.description,t)||(s.item.description=t),u(t)}),n()()()()()}if(r&2){let e=m();o(),f("header",c(2,37,"charge.tabPan")),o(5),h(c(7,39,"charge.code")),o(4),f("placeholder",c(11,41,"charge.code")),x("ngModel",e.item.code),d("ngClass",dt(69,kn,!e.validChargeCode)),o(2),d("ngIf",!e.validChargeCode),o(3),h(c(16,43,"charge.label")),o(4),f("placeholder",c(20,45,"charge.label")),x("ngModel",e.item.label),d("ngClass",dt(71,kn,!e.validChargeLabel)),o(2),d("ngIf",!e.validChargeLabel),o(3),h(c(25,47,"charge.montant")),o(2),f("placeholder",c(27,49,"charge.montant")),x("ngModel",e.item.montant),o(4),h(c(31,51,"charge.date")),o(2),f("placeholder",c(33,53,"charge.date")),f("dateFormat",e.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",e.item.date),o(4),h(c(37,55,"charge.typeCharge")),o(2),f("placeholder",c(39,57,"charge.typeCharge")),d("options",e.typeCharges),x("ngModel",e.item.typeCharge),d("filter",!0)("showClear",!0),o(4),h(c(43,59,"charge.local")),o(2),f("placeholder",c(45,61,"charge.local")),d("options",e.locals),x("ngModel",e.item.local),d("filter",!0)("showClear",!0),o(4),h(c(49,63,"charge.isPaid")),o(2),x("ngModel",e.item.isPaid),o(3),h(c(54,65,"charge.description")),o(2),f("placeholder",c(56,67,"charge.description")),x("ngModel",e.item.description)}}function ys(r,v){if(r&1){let e=M();a(0,"div",24)(1,"button",25),p(2,"translate"),A("click",function(){g(e);let t=m();return u(t.edit())}),C(3,"i",26),l(4),p(5,"translate"),n(),a(6,"button",27),A("click",function(){g(e);let t=m();return u(t.hideEditDialog())}),C(7,"i",28),l(8),p(9,"translate"),n()()}r&2&&(o(),f("label",c(2,3,"validate")),o(3),B(" ",c(5,5,"validate")," "),o(4),B(" ",c(9,7,"cancel")," "))}var jn=(()=>{class r{constructor(e,i,t,s){this.service=e,this.localService=i,this.typeChargeService=t,this.platformId=s,this._submitted=!1,this._errorMessages=new Array,this._activeTab=0,this._validChargeCode=!0,this._validChargeLabel=!0,this._validTypeChargeCode=!0,this._validTypeChargeStyle=!0,this._validLocalCode=!0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.typeChargeService.findAll().subscribe(e=>this.typeCharges=e),this.localService.findAll().subscribe(e=>this.locals=e)}prepareEdit(){this.item.date=this.service.format(this.item.date)}edit(){this.submitted=!0,this.prepareEdit(),this.validateForm(),this.errorMessages.length===0?this.editWithShowOption(!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs sur le formulaire"})}editWithShowOption(e){this.service.edit().subscribe(i=>{let t=this.items.findIndex(s=>s.id===this.item.id);this.items[t]=i,this.editDialog=!1,this.submitted=!1,this.item=new qe},i=>{console.log(i)})}hideEditDialog(){this.editDialog=!1,this.setValidation(!0)}setValidation(e){this.validChargeCode=e,this.validChargeLabel=e}validateForm(){this.errorMessages=new Array,this.validateChargeCode(),this.validateChargeLabel()}validateChargeCode(){this.stringUtilService.isEmpty(this.item.code)?(this.errorMessages.push("Code non valide"),this.validChargeCode=!1):this.validChargeCode=!0}validateChargeLabel(){this.stringUtilService.isEmpty(this.item.label)?(this.errorMessages.push("Label non valide"),this.validChargeLabel=!1):this.validChargeLabel=!0}openCreateTypeCharge(e){return P(this,null,function*(){(yield this.roleService.isPermitted("TypeCharge","edit"))?(this.typeCharge=new Ye,this.createTypeChargeDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}get local(){return this.localService.item}set local(e){this.localService.item=e}get locals(){return this.localService.items}set locals(e){this.localService.items=e}get createLocalDialog(){return this.localService.createDialog}set createLocalDialog(e){this.localService.createDialog=e}get typeCharge(){return this.typeChargeService.item}set typeCharge(e){this.typeChargeService.item=e}get typeCharges(){return this.typeChargeService.items}set typeCharges(e){this.typeChargeService.items=e}get createTypeChargeDialog(){return this.typeChargeService.createDialog}set createTypeChargeDialog(e){this.typeChargeService.createDialog=e}get validChargeCode(){return this._validChargeCode}set validChargeCode(e){this._validChargeCode=e}get validChargeLabel(){return this._validChargeLabel}set validChargeLabel(e){this._validChargeLabel=e}get validTypeChargeCode(){return this._validTypeChargeCode}set validTypeChargeCode(e){this._validTypeChargeCode=e}get validTypeChargeStyle(){return this._validTypeChargeStyle}set validTypeChargeStyle(e){this._validTypeChargeStyle=e}get validLocalCode(){return this._validLocalCode}set validLocalCode(e){this._validLocalCode=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get editDialog(){return this.service.editDialog}set editDialog(e){this.service.editDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatCreate}get dateFormatColumn(){return I.dateFormatCreate}get submitted(){return this._submitted}set submitted(e){this._submitted=e}get errorMessages(){return this._errorMessages==null&&(this._errorMessages=new Array),this._errorMessages}set errorMessages(e){this._errorMessages=e}get validate(){return this.service.validate}set validate(e){this.service.validate=e}get activeTab(){return this._activeTab}set activeTab(e){this._activeTab=e}static{this.\u0275fac=function(i){return new(i||r)(S(Je),S(ke),S(Ze),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-charge-edit-admin"]],standalone:!1,decls:4,vars:11,consts:[["styleClass","p-fluid",3,"visibleChange","visible","header","modal","maximizable","draggable","resizable"],["pTemplate","content"],["pTemplate","footer"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","1",1,"text-sm","font-semibold"],[1,"text-red-500"],["type","text","pInputText","","id","1",3,"ngModelChange","placeholder","ngModel","ngClass"],["class","text-red-500",4,"ngIf"],["for","2",1,"text-sm","font-semibold"],["type","text","pInputText","","id","2",3,"ngModelChange","placeholder","ngModel","ngClass"],["for","3",1,"text-sm","font-semibold"],["id","3",3,"ngModelChange","placeholder","ngModel"],["for","4",1,"text-sm","font-semibold"],["appendTo","body","id","4",1,"w-full",3,"ngModelChange","showTime","showSeconds","placeholder","ngModel","dateFormat"],["for","5",1,"text-sm","font-semibold"],["appendTo","body","id","5","filterMatchMode","contains","optionLabel","label",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],["for","6",1,"text-sm","font-semibold"],["appendTo","body","id","6","filterMatchMode","contains","optionLabel","code",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],["for","7",1,"text-sm","font-semibold"],["id","7",3,"ngModelChange","ngModel"],["for","8",1,"text-sm","font-semibold"],["type","text","pInputText","","id","8",3,"ngModelChange","placeholder","ngModel"],[1,"flex","justify-end","space-x-3","p-4"],[1,"bg-blue-500","text-white","px-4","py-2","rounded-md","hover:bg-primary",3,"click","label"],[1,"pi","pi-check"],[1,"border","border-gray-400","text-gray-600","hover:bg-gray-200","px-4","py-2","rounded-md",3,"click"],[1,"pi","pi-times"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),p(1,"translate"),y("visibleChange",function(_){return b(t.editDialog,_)||(t.editDialog=_),_}),E(2,bs,57,73,"ng-template",1)(3,ys,10,9,"ng-template",2),n()),i&2&&(H(V(10,Cs)),f("header",c(1,8,"charge.tabPan")),x("visible",t.editDialog),d("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!1))},dependencies:[kt,he,O,se,U,re,R,q,ce,J,ie,bi,Y,z,j],encapsulation:2})}}return r})();var Ss=()=>["code","label","montant","date","typeChargelabel","localcode","isPaid","description"],Is=()=>[10,25,50],As=()=>({width:"450px"});function Es(r,v){if(r&1){let e=M();a(0,"button",17),p(1,"translate"),A("click",function(){g(e);let t=m(2);return u(t.showSearch())}),n()}if(r&2){let e=m(2);X("label"," ",c(1,4,"search"),""),X("icon","pi pi-",e.findByCriteriaShow?"angle-down":"angle-right","")}}function Ms(r,v){if(r&1&&(a(0,"div",18),C(1,"p-splitButton",19),p(2,"translate"),n()),r&2){let e=m(2);o(),X("label"," ",c(2,3,"export"),""),d("model",e.excelPdfButons)}}function Ts(r,v){if(r&1){let e=M();a(0,"div",20)(1,"div",21)(2,"label",22),l(3),p(4,"translate"),n(),a(5,"p-inputNumber",23),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.montantMin,t)||(s.criteria.montantMin=t),u(t)}),n()(),a(6,"div",21)(7,"label",24),l(8),p(9,"translate"),n(),a(10,"p-inputNumber",25),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.montantMax,t)||(s.criteria.montantMax=t),u(t)}),n()(),a(11,"div",21)(12,"label",26),l(13),p(14,"translate"),n(),a(15,"p-calendar",27),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.dateFrom,t)||(s.criteria.dateFrom=t),u(t)}),n()(),a(16,"div",21)(17,"label",28),l(18),p(19,"translate"),n(),a(20,"p-calendar",29),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.dateTo,t)||(s.criteria.dateTo=t),u(t)}),n()(),a(21,"div",21)(22,"label",30),l(23),p(24,"translate"),n(),a(25,"p-dropdown",31),p(26,"translate"),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.typeCharges,t)||(s.criteria.typeCharges=t),u(t)}),n()(),a(27,"div",21)(28,"label",32),l(29),p(30,"translate"),n(),a(31,"p-dropdown",33),p(32,"translate"),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.local,t)||(s.criteria.local=t),u(t)}),n()(),a(33,"div",34)(34,"button",35),p(35,"translate"),A("click",function(){g(e);let t=m(2);return u(t.resetCriteria())}),C(36,"i",36),n(),a(37,"button",37),p(38,"translate"),A("click",function(){g(e);let t=m(2);return u(t.findPaginatedByCriteria())}),C(39,"i",36),n()()()}if(r&2){let e=m(2);o(3),h(c(4,24,"charge.montantMin")),o(2),x("ngModel",e.criteria.montantMin),o(3),h(c(9,26,"charge.montantMax")),o(2),x("ngModel",e.criteria.montantMax),o(3),h(c(14,28,"charge.dateMin")),o(2),x("ngModel",e.criteria.dateFrom),d("showIcon",!0),o(3),h(c(19,30,"charge.dateMax")),o(2),x("ngModel",e.criteria.dateTo),d("showIcon",!0),o(3),h(c(24,32,"Type De Charge")),o(2),f("placeholder",c(26,34,"Type De Charge")),d("options",e.typeCharges),x("ngModel",e.criteria.typeCharges),d("filter",!0)("showClear",!0),o(4),h(c(30,36,"charge.local")),o(2),f("placeholder",c(32,38,"charge.local")),d("options",e.locals),x("ngModel",e.criteria.local),d("filter",!0)("showClear",!0),o(3),f("label",c(35,40,"Reset")),o(3),f("label",c(38,42,"validate"))}}function Ps(r,v){if(r&1){let e=M();a(0,"div",38)(1,"h5",39),l(2),p(3,"translate"),n(),a(4,"span",40)(5,"p-iconfield",41),C(6,"p-inputicon",42),a(7,"input",43),p(8,"translate"),A("input",function(t){g(e),m();let s=Oe(9);return u(s.filterGlobal(t.target.value,"contains"))}),n()()()()}r&2&&(o(2),h(c(3,2,"charge.header")),o(5),f("placeholder",c(8,4,"searchInput")))}function Ds(r,v){r&1&&(a(0,"tr")(1,"th",44),C(2,"p-tableHeaderCheckbox"),n(),a(3,"th",45)(4,"div",46)(5,"span",47),l(6),p(7,"translate"),n(),C(8,"p-sortIcon",48),n()(),a(9,"th",49)(10,"div",46)(11,"span",47),l(12),p(13,"translate"),n(),C(14,"p-sortIcon",50),n()(),a(15,"th",51)(16,"div",46)(17,"span",47),l(18),p(19,"translate"),n()()(),a(20,"th",52)(21,"div",46)(22,"span",47),l(23),p(24,"translate"),n()()(),a(25,"th",53)(26,"div",46)(27,"span",47),l(28),p(29,"translate"),n(),C(30,"p-sortIcon",54)(31,"p-columnFilter",55),n()(),a(32,"th"),l(33,"Actions"),n()()),r&2&&(o(6),h(c(7,5,"charge.montant")),o(6),h(c(13,7,"charge.date")),o(6),h(c(19,9,"charge.typeCharge")),o(5),h(c(24,11,"charge.local")),o(5),h(c(29,13,"charge.description")))}function Vs(r,v){if(r&1){let e=M();a(0,"button",59),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.delete(t))}),n()}}function Bs(r,v){if(r&1&&(a(0,"tr")(1,"td"),C(2,"p-tableCheckbox",56),n(),a(3,"td"),l(4),n(),a(5,"td"),l(6),p(7,"date"),n(),a(8,"td"),C(9,"p-tag",57),n(),a(10,"td"),l(11),n(),a(12,"td"),l(13),n(),a(14,"td"),E(15,Vs,1,0,"button",58),n()()),r&2){let e=v.$implicit,i=m(2);o(2),d("value",e),o(2),B("",e.montant," MAD"),o(2),h(G(7,9,e.date,"dd/MM/yyyy HH:mm")),o(3),f("severity",e.typeCharge==null?null:e.typeCharge.code),f("value",e.typeCharge==null?null:e.typeCharge.label),d("rounded",!0),o(2),h(e.local==null?null:e.local.label),o(2),h(e.description),o(2),d("ngIf",i.deleteActionIsValid)}}function Ls(r,v){if(r&1&&(a(0,"tr",60)(1,"td",61),l(2,"Total"),n(),a(3,"td",62),l(4),p(5,"number"),n(),C(6,"td",63),n()),r&2){let e=m(2);o(4),h(G(5,1,e.totalSoldes,"1.2-2"))}}function Fs(r,v){if(r&1){let e=M();a(0,"p-paginator",64),A("onPageChange",function(t){g(e);let s=m(2);return u(s.onPage(t))}),n(),a(1,"div",65),l(2),n()}if(r&2){let e=m(2);d("rows",10)("totalRecords",e.totalRecords),o(2),$e(" En totale il ",(e.items&&e.totalRecords==1,"y a")," ",e.items?e.totalRecords:0," ",e.items?e.totalRecords==1?"charge":"charges":0,". ")}}function Ws(r,v){r&1&&C(0,"app-charge-create-admin")}function ks(r,v){r&1&&C(0,"app-charge-edit-admin")}function js(r,v){r&1&&C(0,"app-charge-view-admin")}function Ns(r,v){if(r&1){let e=M();a(0,"div",3)(1,"div",4),C(2,"p-toast"),a(3,"div",5)(4,"p-toolbar",6),E(5,Es,2,6,"ng-template",7)(6,Ms,3,5,"ng-template",8),n(),E(7,Ts,40,44,"div",9),a(8,"p-table",10,0),p(10,"translate"),y("selectionChange",function(t){g(e);let s=m();return b(s.selections,t)||(s.selections=t),u(t)}),E(11,Ps,9,6,"ng-template",11)(12,Ds,34,15,"ng-template",12)(13,Bs,16,12,"ng-template",13)(14,Ls,7,4,"ng-template",14)(15,Fs,3,5,"ng-template",15),n()(),E(16,Ws,1,0,"app-charge-create-admin",16)(17,ks,1,0,"app-charge-edit-admin",16)(18,js,1,0,"app-charge-view-admin",16),C(19,"p-confirmDialog"),n()()}if(r&2){let e=m();o(7),d("ngIf",e.findByCriteriaShow),o(),f("currentPageReportTemplate",c(10,16,"les \xE9l\xE9ments de {first} \xE0 {last} sur {totalRecords} ")),d("value",e.items)("columns",e.cols)("rows",8)("paginator",!1)("globalFilterFields",V(18,Ss)),x("selection",e.selections),d("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",V(19,Is)),o(8),d("ngIf",e.createDialog&&e.createActionIsValid),o(),d("ngIf",e.editDialog&&e.editActionIsValid),o(),d("ngIf",e.viewDialog&&e.viewActionIsValid),o(),H(V(20,As))}}function Rs(r,v){r&1&&(a(0,"p-card",66)(1,"p",67),l(2," You don't have permission to access ! "),n()())}var Nn=(()=>{class r{constructor(e,i,t,s){this.service=e,this.localService=i,this.typeChargeService=t,this.platformId=s,this.fileName=`List de Charges ${new Date().toLocaleDateString()}`,this.findByCriteriaShow=!1,this.cols=[],this.exportData=[],this.criteriaData=[],this._totalRecords=0,this.enableSecurity=!1,this.totalSoldes=0,this.yesOrNoIsPaid=[],this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.authService=w.injector.get(ot),this.exportService=w.injector.get(Ie)}ngOnInit(){this.findPaginatedByCriteria(),this.initExport(),this.initCol(),this.loadTypeCharge(),this.loadLocal(),this.yesOrNoIsPaid=[{label:"IsPaid",value:null},{label:"Oui",value:1},{label:"Non",value:0}]}calculateTotals(){this.totalSoldes=this.items.reduce((e,i)=>e+(i.montant||0),0)}onExcelFileSelected(e){let i=e.target;i.files&&i.files.length>0&&(this.excelFile=i.files[0])}importExcel(){this.excelFile&&this.service.importExcel(this.excelFile).subscribe(e=>{this.items=e,this.messageService.add({severity:"success",summary:"Success",detail:"File uploaded successfully!",life:3e3})},e=>{this.messageService.add({severity:"error",summary:"Error",detail:"File uploaded with Error!",life:3e3})})}findPaginatedByCriteria(){this.service.findPaginatedByCriteria(this.criteria).subscribe(e=>{this.items=e.list,this.totalRecords=e.dataSize,this.selections=new Array,this.calculateTotals()},e=>console.log(e))}onPage(e){this.criteria.page=e.page,this.criteria.maxResults=e.rows,this.findPaginatedByCriteria()}edit(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.item=i,console.log(i),this.editDialog=!0})})}view(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.item=i,this.viewDialog=!0})})}openCreate(){return P(this,null,function*(){this.item=new qe,this.createDialog=!0})}deleteMultiple(){return P(this,null,function*(){this.confirmationService.confirm({message:"Voulez-vous supprimer ces \xE9l\xE9ments ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Ok"},accept:()=>{this.service.deleteMultiple().subscribe(()=>{for(let e of this.selections){let i=this.items.findIndex(t=>t.id===e.id);this.items.splice(i,1)}this.selections=new Array,this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Les \xE9l\xE9ments s\xE9lectionn\xE9s ont \xE9t\xE9 supprim\xE9s",life:3e3})},e=>console.log(e))}})})}isSelectionDisabled(){return this.selections==null||this.selections.length==0}delete(e){return P(this,null,function*(){this.confirmationService.confirm({message:"Voulez-vous supprimer cet \xE9l\xE9ment ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Ok"},accept:()=>{this.service.delete(e).subscribe(i=>{i>0&&(this.findPaginatedByCriteria(),this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Element Supprim\xE9",life:3e3}))},i=>console.log(i))}})})}duplicate(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.initDuplicate(i),this.item=i,this.item.id=null,this.createDialog=!0})})}initExport(){this.excelPdfButons=[{label:"CSV",icon:"pi pi-file",command:()=>{this.prepareColumnExport(),this.exportService.exporterCSV(this.criteriaData,this.exportData,this.fileName)}},{label:"XLS",icon:"pi pi-file-excel",command:()=>{this.prepareColumnExport(),this.exportService.exporterExcel(this.criteriaData,this.exportData,this.fileName)}},{label:"PDF",icon:"pi pi-file-pdf",command:()=>{this.prepareColumnExport(),this.exportService.exporterPdf(this.criteriaData,this.exportData,this.fileName)}}]}exportPdf(e){this.service.exportPdf(e).subscribe(i=>{let t=new Blob([i],{type:"application/pdf"}),s=window.URL.createObjectURL(t),_=document.createElement("a");_.href=s,_.download=this.pdfName,_.setAttribute("target","_blank"),_.click(),window.URL.revokeObjectURL(s)},i=>{console.error(i)})}showSearch(){this.findByCriteriaShow=!this.findByCriteriaShow}update(){this.service.edit().subscribe(e=>{let i=this.items.findIndex(t=>t.id===this.item.id);this.items[i]=e,this.editDialog=!1,this.item=new qe},e=>{console.log(e)})}save(){this.service.save().subscribe(e=>{e!=null?(this.items.push(K({},e)),this.createDialog=!1,this.item=new qe):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Element existant"})},e=>{console.log(e)})}initCol(){this.cols=[{field:"montant",header:"Montant"},{field:"date",header:"Date"},{field:"typeCharge?.label",header:"Type charge"},{field:"local?.label",header:"Local"},{field:"description",header:"Description"}]}loadTypeCharge(){return P(this,null,function*(){this.typeChargeService.findAllOptimized().subscribe(e=>this.typeCharges=e,e=>console.log(e))})}loadLocal(){return P(this,null,function*(){this.localService.findAllOptimized().subscribe(e=>this.locals=e,e=>console.log(e))})}initDuplicate(e){}prepareColumnExport(){this.exportData=this.items.map(e=>({Date:this.datePipe.transform(e.date,"dd/MM/yyyy hh:mm"),Montant:e.montant,"Type charge":e.typeCharge?.label,Local:e.local?.label,Description:e.description})),this.exportData.push({Date:"TOTAL",Montant:this.totalSoldes,Description:"","Type transaction":"","Mode paiement":"","Compte source":"","Compte destination":""}),this.criteriaData=[{}]}get items(){return this.service.items}set items(e){this.service.items=e}get selections(){return this.service.selections}set selections(e){this.service.selections=e}get item(){return this.service.item}set item(e){this.service.item=e}get createDialog(){return this.service.createDialog}set createDialog(e){this.service.createDialog=e}get editDialog(){return this.service.editDialog}set editDialog(e){this.service.editDialog=e}get viewDialog(){return this.service.viewDialog}set viewDialog(e){this.service.viewDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatList}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e}get pdfName(){return this._pdfName}set pdfName(e){this._pdfName=e}get createActionIsValid(){return this.service.createActionIsValid}set createActionIsValid(e){this.service.createActionIsValid=e}get editActionIsValid(){return this.service.editActionIsValid}set editActionIsValid(e){this.service.editActionIsValid=e}get listActionIsValid(){return this.service.listActionIsValid}set listActionIsValid(e){this.service.listActionIsValid=e}get deleteActionIsValid(){return this.service.deleteActionIsValid}set deleteActionIsValid(e){this.service.deleteActionIsValid=e}get viewActionIsValid(){return this.service.viewActionIsValid}set viewActionIsValid(e){this.service.viewActionIsValid=e}get duplicateActionIsValid(){return this.service.duplicateActionIsValid}set duplicateActionIsValid(e){this.service.duplicateActionIsValid=e}get createAction(){return this.service.createAction}set createAction(e){this.service.createAction=e}get listAction(){return this.service.listAction}set listAction(e){this.service.listAction=e}get editAction(){return this.service.editAction}set editAction(e){this.service.editAction=e}get deleteAction(){return this.service.deleteAction}set deleteAction(e){this.service.deleteAction=e}get viewAction(){return this.service.viewAction}set viewAction(e){this.service.viewAction=e}get duplicateAction(){return this.service.duplicateAction}set duplicateAction(e){this.service.duplicateAction=e}get entityName(){return this.service.entityName}set entityName(e){this.service.entityName=e}resetCriteria(){this.criteria=new ni,this.findPaginatedByCriteria()}static{this.\u0275fac=function(i){return new(i||r)(S(Je),S(ke),S(Ze),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-charge-list-admin"]],standalone:!1,decls:2,vars:2,consts:[["dt",""],["class","grid",4,"ngIf"],["header","Permission not allowed",4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 border border-surface rounded-lg",4,"ngIf"],["dataKey","id","styleClass","p-datatable-customers","selectionMode","multiple",3,"selectionChange","value","columns","rows","paginator","globalFilterFields","selection","rowHover","currentPageReportTemplate","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","summary"],[4,"ngIf"],["pButton","","pRipple","",1,"p-button-secondary","mr-2","mb-2",3,"click","label","icon"],[1,"flex"],["icon","pi pi-download","styleClass","p-button-secondary",3,"label","model"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","p-4","border","border-surface","rounded-lg"],[1,"flex","flex-col","gap-2"],["for","3-1",1,"text-sm","font-semibold"],["mode","decimal","id","3-1",3,"ngModelChange","ngModel"],["for","3-2",1,"text-sm","font-semibold"],["mode","decimal","id","3-2",3,"ngModelChange","ngModel"],["for","4-1",1,"text-sm","font-semibold"],["id","4-1","dateFormat","dd-MM-yy",1,"p-fluid",3,"ngModelChange","ngModel","showIcon"],["for","4-2",1,"text-sm","font-semibold"],["id","4-2","dateFormat","dd-MM-yy",1,"p-fluid",3,"ngModelChange","ngModel","showIcon"],["for","5-2",1,"text-sm","font-semibold"],["id","5","optionLabel","label",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],["for","6-2",1,"text-sm","font-semibold"],["id","6","optionLabel","code",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],[1,"col-span-full","flex","justify-end","mt-4"],["pButton","","pRipple","",1,"px-4","py-2","mx-4","rounded-md","bg-red-500",3,"click","label"],[1,"pi","pi-sort-amount-down"],["pButton","","pRipple","",1,"px-4","py-2","rounded-md",3,"click","label"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","p-2","gap-4"],[1,"text-center","md:text-left"],[1,"relative","w-full","md:w-auto"],["iconPosition","left",1,"w-full","md:w-auto"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full","md:w-72","border","border-gray-300","rounded-md","p-2","focus:ring","focus:ring-blue-300",3,"input","placeholder"],[2,"width","3rem"],["pSortableColumn","montant"],[1,"p-d-flex","p-jc-between","p-ai-center"],[1,"mr-2"],["field","montant"],["pSortableColumn","date"],["field","date"],["pSortableColumn","typeCharges"],["pSortableColumn","local"],["pSortableColumn","description"],["field","description"],["type","text","field","element.description","display","menu",1,"ml-auto"],[3,"value"],[3,"severity","value","rounded"],["pButton","","pRipple","","icon","pi pi-trash","class","p-button-rounded p-button-danger mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger","mr-2",3,"click"],[1,"font-semibold","bg-gray-100"],["colspan","1",1,"text-right","text-blue-600"],[1,"text-blue-600"],["colspan","6"],[3,"onPageChange","rows","totalRecords"],[1,"p-d-flex","p-ai-center","p-jc-between"],["header","Permission not allowed"],[1,"m-0"]],template:function(i,t){i&1&&E(0,Ns,20,21,"div",1)(1,Rs,3,0,"p-card",2),i&2&&(d("ngIf",t.listActionIsValid),o(),d("ngIf",!t.listActionIsValid))},dependencies:[he,we,O,ze,ne,Ge,nt,Qe,Ke,dn,rt,U,oe,R,q,Se,ce,Y,z,it,at,gt,Ue,He,be,Di,Wn,jn,Zt,T,j],encapsulation:2})}}return r})();var qs=()=>({width:"70vw"});function Os(r,v){r&1&&(a(0,"tr")(1,"th"),l(2,"Date"),n(),a(3,"th"),l(4,"Montant"),n(),a(5,"th"),l(6,"Description"),n(),a(7,"th"),l(8,"Type transaction"),n(),a(9,"th"),l(10,"Mode paiement"),n(),a(11,"th"),l(12,"Type paiement"),n(),a(13,"th"),l(14,"Compte source"),n(),a(15,"th"),l(16,"Compte destination"),n(),a(17,"th"),l(18,"Actions"),n()())}function Us(r,v){if(r&1){let e=M();a(0,"tr")(1,"td"),l(2),p(3,"date"),n(),a(4,"td"),l(5),n(),a(6,"td"),l(7),n(),a(8,"td"),l(9),n(),a(10,"td"),l(11),n(),a(12,"td"),l(13),n(),a(14,"td"),l(15),n(),a(16,"td"),l(17),n(),a(18,"td")(19,"p-button",33),A("click",function(){let t=g(e),s=t.$implicit,_=t.rowIndex,D=m(2);return u(D.deleteTransactions(s,_))}),n(),a(20,"p-button",34),A("click",function(){let t=g(e),s=t.$implicit,_=t.rowIndex,D=m(2);return u(D.editTransactions(s,_))}),n()()()}if(r&2){let e=v.$implicit,i=m(2);o(2),h(G(3,10,e.date,i.dateFormatColumn)),o(3),h(e.montant),o(2),h(e.description),o(2),h(e.typeTransaction==null?null:e.typeTransaction.label),o(2),h(e.modePaiement==null?null:e.modePaiement.label),o(2),h(e.typePaiement==null?null:e.typePaiement.label),o(2),h(e.compteSource==null?null:e.compteSource.id),o(2),h(e.compteDestination==null?null:e.compteDestination.id),o(2),d("rounded",!0),o(),d("rounded",!0)}}function Hs(r,v){if(r&1){let e=M();a(0,"p-tabView")(1,"p-tabPanel",3),p(2,"translate"),a(3,"div",4)(4,"div",5)(5,"label",6),l(6),p(7,"translate"),n(),a(8,"p-inputNumber",7),p(9,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.solde,t)||(s.item.solde=t),u(t)}),n()(),a(10,"div",5)(11,"label",8),l(12),p(13,"translate"),n(),a(14,"p-inputNumber",9),p(15,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.debit,t)||(s.item.debit=t),u(t)}),n()(),a(16,"div",5)(17,"label",10),l(18),p(19,"translate"),n(),a(20,"p-inputNumber",11),p(21,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.credit,t)||(s.item.credit=t),u(t)}),n()(),a(22,"div",5)(23,"label",12),l(24),p(25,"translate"),n(),a(26,"p-dropdown",13),p(27,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.locataire,t)||(s.item.locataire=t),u(t)}),n()()()(),a(28,"p-tabPanel",3),p(29,"translate"),a(30,"p-tabView",14),y("activeIndexChange",function(t){g(e);let s=m();return b(s.activeTab,t)||(s.activeTab=t),u(t)}),a(31,"p-tabPanel",15)(32,"div",16)(33,"div",5)(34,"label",6),l(35,"Date"),n(),a(36,"p-calendar",17),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.date,t)||(s.transactionsElement.date=t),u(t)}),n()(),a(37,"div",5)(38,"label",8),l(39,"Montant"),n(),a(40,"p-inputNumber",18),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.montant,t)||(s.transactionsElement.montant=t),u(t)}),n()(),a(41,"div",5)(42,"label",10),l(43,"Description"),n(),a(44,"input",19),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.description,t)||(s.transactionsElement.description=t),u(t)}),n()(),a(45,"div",5)(46,"label",20),l(47,"Type transaction"),n(),a(48,"p-dropdown",21),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.typeTransaction,t)||(s.transactionsElement.typeTransaction=t),u(t)}),n()(),a(49,"div",5)(50,"label",20),l(51,"Mode paiement"),n(),a(52,"p-dropdown",22),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.modePaiement,t)||(s.transactionsElement.modePaiement=t),u(t)}),n()(),a(53,"div",5)(54,"label",20),l(55,"Type paiement"),n(),a(56,"p-dropdown",23),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.typePaiement,t)||(s.transactionsElement.typePaiement=t),u(t)}),n()(),a(57,"div",5)(58,"label",20),l(59,"Compte source"),n(),a(60,"p-dropdown",24),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.compteSource,t)||(s.transactionsElement.compteSource=t),u(t)}),n()(),a(61,"div",5)(62,"label",20),l(63,"Compte destination"),n(),a(64,"p-dropdown",25),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.compteDestination,t)||(s.transactionsElement.compteDestination=t),u(t)}),n()(),a(65,"div",26)(66,"button",27),A("click",function(){g(e);let t=m();return u(t.addTransactions())}),C(67,"i",28),l(68," OK "),n()()()(),a(69,"p-tabPanel",3)(70,"div",29)(71,"p-table",30),E(72,Os,19,0,"ng-template",31)(73,Us,21,13,"ng-template",32),n()()()()()()}if(r&2){let e=m();o(),f("header",c(2,49,"CompteLocataire.tabPan")),o(5),h(c(7,51,"CompteLocataire.solde")),o(2),f("placeholder",c(9,53,"CompteLocataire.solde")),x("ngModel",e.item.solde),o(4),h(c(13,55,"CompteLocataire.debit")),o(2),f("placeholder",c(15,57,"CompteLocataire.debit")),x("ngModel",e.item.debit),o(4),h(c(19,59,"CompteLocataire.credit")),o(2),f("placeholder",c(21,61,"CompteLocataire.credit")),x("ngModel",e.item.credit),o(4),h(c(25,63,"CompteLocataire.locataire")),o(2),f("placeholder",c(27,65,"CompteLocataire.locataire")),d("options",e.locataires),x("ngModel",e.item.locataire),d("filter",!0)("showClear",!0),o(2),f("header",c(29,67,"CompteLocataire.transactions")),o(2),x("activeIndex",e.activeTab),o(6),f("dateFormat",e.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",e.transactionsElement.date),d("showIcon",!0),o(4),x("ngModel",e.transactionsElement.montant),o(4),x("ngModel",e.transactionsElement.description),o(4),d("options",e.typeTransactions),x("ngModel",e.transactionsElement.typeTransaction),d("filter",!0)("showClear",!0),o(4),d("options",e.modePaiements),x("ngModel",e.transactionsElement.modePaiement),d("filter",!0)("showClear",!0),o(4),d("options",e.typePaiements),x("ngModel",e.transactionsElement.typePaiement),d("filter",!0)("showClear",!0),o(4),d("options",e.compteSources),x("ngModel",e.transactionsElement.compteSource),d("filter",!0)("showClear",!0),o(4),d("options",e.compteDestinations),x("ngModel",e.transactionsElement.compteDestination),d("filter",!0)("showClear",!0),o(5),X("header","Liste ",(e.item.transactions==null?null:e.item.transactions.length)>0?"("+(e.item.transactions==null?null:e.item.transactions.length)+")":"",""),o(2),d("value",e.item.transactions)("scrollable",!0)}}function zs(r,v){if(r&1){let e=M();a(0,"div",35)(1,"button",36),p(2,"translate"),A("click",function(){g(e);let t=m();return u(t.save())}),C(3,"i",37),l(4),p(5,"translate"),n(),a(6,"button",38),A("click",function(){g(e);let t=m();return u(t.hideCreateDialog())}),C(7,"i",39),l(8),p(9,"translate"),n()()}r&2&&(o(),f("label",c(2,3,"validate")),o(3),B(" ",c(5,5,"validate")," "),o(4),B(" ",c(9,7,"cancel")," "))}var Rn=(()=>{class r{constructor(e,i,t,s,_,D,le,de){this.service=e,this.transactionService=i,this.typePaiementService=t,this.compteService=s,this.modePaiementService=_,this.locataireService=D,this.typeTransactiontService=le,this.platformId=de,this._submitted=!1,this._errorMessages=new Array,this._activeTab=0,this.transactionsIndex=-1,this._transactionsElement=new Ae,this._validLocataireCode=!0,this._validLocataireNom=!0,this._validLocatairePrenom=!0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.transactionsElement.typeTransaction=new ut,this.typeTransactiontService.findAll().subscribe(e=>this.typeTransactions=e),this.transactionsElement.modePaiement=new Ne,this.modePaiementService.findAll().subscribe(e=>this.modePaiements=e),this.transactionsElement.typePaiement=new je,this.typePaiementService.findAll().subscribe(e=>this.typePaiements=e),this.transactionsElement.compteSource=new ae,this.compteService.findAll().subscribe(e=>this.compteSources=e),this.transactionsElement.compteDestination=new ae,this.compteService.findAll().subscribe(e=>this.compteDestinations=e),this.locataireService.findAll().subscribe(e=>this.locataires=e)}save(){this.submitted=!0,this.validateForm(),this.errorMessages.length===0?this.saveWithShowOption(!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs sur le formulaire"})}saveWithShowOption(e){this.service.save().subscribe(i=>{i!=null?(this.items.push(K({},i)),this.createDialog=!1,this.submitted=!1,this.item=new Nt):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Element existant"})},i=>{console.log(i)})}hideCreateDialog(){this.createDialog=!1,this.setValidation(!0)}validateTransactions(){this.errorMessages=new Array}setValidation(e){}addTransactions(){this.item.transactions==null&&(this.item.transactions=new Array),this.validateTransactions(),this.errorMessages.length===0?(this.transactionsIndex==-1?this.item.transactions.push(K({},this.transactionsElement)):this.item.transactions[this.transactionsIndex]=this.transactionsElement,this.transactionsElement=new Ae,this.transactionsIndex=-1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs suivant : "+this.errorMessages})}deleteTransactions(e,i){this.item.transactions.splice(i,1)}editTransactions(e,i){this.transactionsElement=K({},e),this.transactionsIndex=i,this.activeTab=0}validateForm(){this.errorMessages=new Array}openCreateCompteSource(e){return P(this,null,function*(){(yield this.roleService.isPermitted("Compte","add"))?(this.compteSource=new ae,this.createCompteSourceDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}openCreateTypePaiement(e){return P(this,null,function*(){(yield this.roleService.isPermitted("TypePaiement","add"))?(this.typePaiement=new je,this.createTypePaiementDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}openCreateCompteDestination(e){return P(this,null,function*(){(yield this.roleService.isPermitted("Compte","add"))?(this.compteDestination=new ae,this.createCompteDestinationDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}openCreateModePaiement(e){return P(this,null,function*(){(yield this.roleService.isPermitted("ModePaiement","add"))?(this.modePaiement=new Ne,this.createModePaiementDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}get typeTransaction(){return this.typeTransactiontService.item}set typeTransaction(e){this.typeTransactiontService.item=e}get typeTransactions(){return this.typeTransactiontService.items}set typeTransactions(e){this.typeTransactiontService.items=e}get createTypeTransactionDialog(){return this.typeTransactiontService.createDialog}set createTypeTransactionDialog(e){this.typeTransactiontService.createDialog=e}get compteSource(){return this.compteService.item}set compteSource(e){this.compteService.item=e}get compteSources(){return this.compteService.items}set compteSources(e){this.compteService.items=e}get createCompteSourceDialog(){return this.compteService.createDialog}set createCompteSourceDialog(e){this.compteService.createDialog=e}get locataire(){return this.locataireService.item}set locataire(e){this.locataireService.item=e}get locataires(){return this.locataireService.items}set locataires(e){this.locataireService.items=e}get createLocataireDialog(){return this.locataireService.createDialog}set createLocataireDialog(e){this.locataireService.createDialog=e}get typePaiement(){return this.typePaiementService.item}set typePaiement(e){this.typePaiementService.item=e}get typePaiements(){return this.typePaiementService.items}set typePaiements(e){this.typePaiementService.items=e}get createTypePaiementDialog(){return this.typePaiementService.createDialog}set createTypePaiementDialog(e){this.typePaiementService.createDialog=e}get compteDestination(){return this.compteService.item}set compteDestination(e){this.compteService.item=e}get compteDestinations(){return this.compteService.items}set compteDestinations(e){this.compteService.items=e}get createCompteDestinationDialog(){return this.compteService.createDialog}set createCompteDestinationDialog(e){this.compteService.createDialog=e}get modePaiement(){return this.modePaiementService.item}set modePaiement(e){this.modePaiementService.item=e}get modePaiements(){return this.modePaiementService.items}set modePaiements(e){this.modePaiementService.items=e}get createModePaiementDialog(){return this.modePaiementService.createDialog}set createModePaiementDialog(e){this.modePaiementService.createDialog=e}get validLocataireCode(){return this._validLocataireCode}set validLocataireCode(e){this._validLocataireCode=e}get validLocataireNom(){return this._validLocataireNom}set validLocataireNom(e){this._validLocataireNom=e}get validLocatairePrenom(){return this._validLocatairePrenom}set validLocatairePrenom(e){this._validLocatairePrenom=e}get transactionsElement(){return this._transactionsElement==null&&(this._transactionsElement=new Ae),this._transactionsElement}set transactionsElement(e){this._transactionsElement=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get createDialog(){return this.service.createDialog}set createDialog(e){this.service.createDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatCreate}get dateFormatColumn(){return I.dateFormatCreate}get submitted(){return this._submitted}set submitted(e){this._submitted=e}get errorMessages(){return this._errorMessages==null&&(this._errorMessages=new Array),this._errorMessages}set errorMessages(e){this._errorMessages=e}get validate(){return this.service.validate}set validate(e){this.service.validate=e}get activeTab(){return this._activeTab}set activeTab(e){this._activeTab=e}static{this.\u0275fac=function(i){return new(i||r)(S(Rt),S(me),S(Be),S(Q),S(ve),S(st),S(ge),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-locataire-create-admin"]],standalone:!1,decls:4,vars:11,consts:[["styleClass","p-fluid",3,"visibleChange","visible","header","modal","maximizable","draggable","resizable"],["pTemplate","content"],["pTemplate","footer"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","1",1,"text-sm","font-semibold"],["id","1",3,"ngModelChange","placeholder","ngModel"],["for","2",1,"text-sm","font-semibold"],["id","2",3,"ngModelChange","placeholder","ngModel"],["for","3",1,"text-sm","font-semibold"],["id","3",3,"ngModelChange","placeholder","ngModel"],["for","4",1,"text-sm","font-semibold"],["appendTo","body","id","4","filterMatchMode","contains","optionLabel","code",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],[3,"activeIndexChange","activeIndex"],["header","Cre\u0301ation"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","p-4"],["appendTo","body","id","1","placeholder","Date",1,"w-full",3,"ngModelChange","showTime","showSeconds","ngModel","dateFormat","showIcon"],["id","montant","placeholder","Montant",3,"ngModelChange","ngModel"],["type","text","pInputText","","placeholder","Description","id","3","autofocus","",3,"ngModelChange","ngModel"],[1,"text-sm","font-semibold"],["appendTo","body","id","4","filterMatchMode","contains","optionLabel","label","placeholder","Type transaction",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],["appendTo","body","id","5","filterMatchMode","contains","optionLabel","label","placeholder","Mode paiement",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],["appendTo","body","id","6","filterMatchMode","contains","optionLabel","label","placeholder","Type paiement",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],["appendTo","body","id","7","filterMatchMode","contains","optionLabel","id","placeholder","Compte source",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],["appendTo","body","id","8","filterMatchMode","contains","optionLabel","id","placeholder","Compte destination",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],[1,"flex","justify-end","md:col-span-3"],["pButton","","type","button",1,"bg-green-500","text-white","px-4","py-2","rounded-md","hover:bg-green-700",3,"click"],[1,"pi","pi-plus"],[1,"card","p-4"],["scrollHeight","200px",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],["pButton","","type","button","icon","pi pi-times","severity","danger",1,"mr-2",3,"click","rounded"],["pButton","","type","button","icon","pi pi-pencil","severity","success",1,"mr-2",3,"click","rounded"],[1,"flex","justify-end","space-x-3","p-4"],[1,"bg-blue-500","text-white","px-4","py-2","rounded-md","hover:bg-primary",3,"click","label"],[1,"pi","pi-check"],[1,"border","border-gray-400","text-gray-600","hover:bg-gray-200","px-4","py-2","rounded-md",3,"click"],[1,"pi","pi-times"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),p(1,"translate"),y("visibleChange",function(_){return b(t.createDialog,_)||(t.createDialog=_),_}),E(2,Hs,74,69,"ng-template",1)(3,zs,10,9,"ng-template",2),n()),i&2&&(H(V(10,qs)),f("header",c(1,8,"CompteLocataire.tabPan")),x("visible",t.createDialog),d("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!1))},dependencies:[O,ne,se,U,oe,ye,re,R,q,ce,J,ie,Y,z,T,j],encapsulation:2})}}return r})();var Qs=()=>({width:"85vw",maxWidth:"1200px"}),Ks=()=>[5,10,25,50];function Xs(r,v){r&1&&(a(0,"div",4),C(1,"i",5),a(2,"span",6),l(3),p(4,"translate"),n()()),r&2&&(o(3),h(c(4,1,"CompteLocataire.tabPan")))}function Ys(r,v){if(r&1&&(a(0,"div",9)(1,"div",10)(2,"div",11)(3,"h5",12),C(4,"i",13),l(5," Informations du compte "),n(),a(6,"div",14)(7,"div",15)(8,"div",16)(9,"label",17),l(10),p(11,"translate"),n(),C(12,"input",18),p(13,"translate"),n()(),a(14,"div",15)(15,"label",19),l(16),p(17,"translate"),n(),C(18,"p-inputNumber",20),p(19,"translate"),n(),a(20,"div",15)(21,"label",21),l(22),p(23,"translate"),n(),C(24,"p-inputNumber",22),p(25,"translate"),n(),a(26,"div",15)(27,"label",23),l(28),p(29,"translate"),n(),C(30,"p-inputNumber",24),p(31,"translate"),n()()()()()),r&2){let e=m(2);o(10),h(c(11,16,"CompteLocataire.locataire")),o(2),f("placeholder",c(13,18,"CompteLocataire.locataire")),d("disabled",!0)("ngModel",(e.item.locataire==null?null:e.item.locataire.nom)+" "+(e.item.locataire==null?null:e.item.locataire.prenom)),o(4),h(c(17,20,"compte.solde")),o(2),f("placeholder",c(19,22,"compte.solde")),d("disabled",!0)("ngModel",e.item.solde),o(4),h(c(23,24,"compte.debit")),o(2),f("placeholder",c(25,26,"compte.debit")),d("disabled",!0)("ngModel",e.item.debit),o(4),h(c(29,28,"compte.credit")),o(2),f("placeholder",c(31,30,"compte.credit")),d("disabled",!0)("ngModel",e.item.credit)}}function Js(r,v){if(r&1){let e=M();a(0,"p-panel",36)(1,"div",14)(2,"div",15)(3,"label",37),l(4),p(5,"translate"),n(),a(6,"p-calendar",38),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.dateFrom,t)||(s.transactionCriteria.dateFrom=t),u(t)}),n()(),a(7,"div",15)(8,"label",37),l(9),p(10,"translate"),n(),a(11,"p-calendar",38),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.dateTo,t)||(s.transactionCriteria.dateTo=t),u(t)}),n()(),a(12,"div",15)(13,"label",37),l(14),p(15,"translate"),n(),a(16,"p-inputNumber",39),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.montantMin,t)||(s.transactionCriteria.montantMin=t),u(t)}),n()(),a(17,"div",15)(18,"label",37),l(19),p(20,"translate"),n(),a(21,"p-inputNumber",39),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.montantMax,t)||(s.transactionCriteria.montantMax=t),u(t)}),n()(),a(22,"div",15)(23,"label",37),l(24),p(25,"translate"),n(),a(26,"input",40),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.description,t)||(s.transactionCriteria.description=t),u(t)}),n()(),a(27,"div",15)(28,"label",37),l(29),p(30,"translate"),n(),a(31,"p-dropdown",41),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.typeTransaction,t)||(s.transactionCriteria.typeTransaction=t),u(t)}),n()(),a(32,"div",15)(33,"label",37),l(34),p(35,"translate"),n(),a(36,"p-dropdown",41),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.modePaiement,t)||(s.transactionCriteria.modePaiement=t),u(t)}),n()(),a(37,"div",42)(38,"div",43)(39,"button",44),A("click",function(){g(e);let t=m(3);return u(t.findPaginatedTransactions())}),n(),a(40,"button",45),A("click",function(){g(e);let t=m(3);return u(t.resetTransactionCriteria())}),n()()()()()}if(r&2){let e=m(3);d("showHeader",!1),o(4),h(c(5,21,"Date Min")),o(2),f("dateFormat",e.dateFormat),x("ngModel",e.transactionCriteria.dateFrom),o(3),h(c(10,23,"Date Max")),o(2),f("dateFormat",e.dateFormat),x("ngModel",e.transactionCriteria.dateTo),o(3),h(c(15,25,"Montant Min")),o(2),x("ngModel",e.transactionCriteria.montantMin),o(3),h(c(20,27,"Montant Max")),o(2),x("ngModel",e.transactionCriteria.montantMax),o(3),h(c(25,29,"Description")),o(2),x("ngModel",e.transactionCriteria.description),o(3),h(c(30,31,"Type transaction")),o(2),d("options",e.typeTransactions),x("ngModel",e.transactionCriteria.typeTransaction),d("showClear",!0),o(3),h(c(35,33,"Mode paiement")),o(2),d("options",e.modePaiements),x("ngModel",e.transactionCriteria.modePaiement),d("showClear",!0)}}function Zs(r,v){r&1&&(a(0,"tr")(1,"th"),l(2,"Date"),n(),a(3,"th"),l(4,"Credit"),n(),a(5,"th"),l(6,"Debit"),n(),a(7,"th"),l(8,"Description"),n(),a(9,"th"),l(10,"Type transaction"),n(),a(11,"th"),l(12,"Mode paiement"),n(),a(13,"th"),l(14,"Compte source"),n(),a(15,"th"),l(16,"Compte destination"),n()())}function $s(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.montant," ")}}function el(r,v){r&1&&(ee(0),l(1," --- "),te())}function tl(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.montant," ")}}function il(r,v){r&1&&(ee(0),l(1," --- "),te())}function nl(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.compteSource==null?null:e.compteSource.code," ")}}function al(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.compteSource==null?null:e.compteSource.code," ")}}function rl(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),Gt(" ",e.compteLocataire==null||e.compteLocataire.locataire==null?null:e.compteLocataire.locataire.nom," ",e.compteLocataire==null||e.compteLocataire.locataire==null?null:e.compteLocataire.locataire.prenom," ")}}function ol(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.compteDestination==null?null:e.compteDestination.code," ")}}function sl(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),Gt(" ",e.compteLocataire==null||e.compteLocataire.locataire==null?null:e.compteLocataire.locataire.nom," ",e.compteLocataire==null||e.compteLocataire.locataire==null?null:e.compteLocataire.locataire.prenom," ")}}function ll(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.compteDestination==null?null:e.compteDestination.code," ")}}function pl(r,v){if(r&1&&(a(0,"tr")(1,"td"),l(2),p(3,"date"),n(),a(4,"td",46),E(5,$s,2,1,"ng-container",47)(6,el,2,0,"ng-container",47),n(),a(7,"td",48),E(8,tl,2,1,"ng-container",47)(9,il,2,0,"ng-container",47),n(),a(10,"td"),l(11),p(12,"slice"),n(),a(13,"td"),C(14,"p-tag",49),n(),a(15,"td"),C(16,"p-tag",49),n(),a(17,"td"),E(18,nl,2,1,"ng-container",47)(19,al,2,1,"ng-container",47)(20,rl,2,2,"ng-container",47),n(),a(21,"td"),E(22,ol,2,1,"ng-container",47)(23,sl,2,2,"ng-container",47)(24,ll,2,1,"ng-container",47),n()()),r&2){let e=v.$implicit,i=m(3);o(2),h(G(3,18,e.date,i.dateFormatColumn)),o(3),d("ngIf",(e.typePaiement==null?null:e.typePaiement.label)!=="Credit"),o(),d("ngIf",(e.typePaiement==null?null:e.typePaiement.label)==="Credit"),o(2),d("ngIf",(e.typePaiement==null?null:e.typePaiement.label)!=="Debit"),o(),d("ngIf",(e.typePaiement==null?null:e.typePaiement.label)==="Debit"),o(2),h(Wt(12,21,e.description,0,50)),o(3),d("severity",e.typeTransaction==null?null:e.typeTransaction.code)("value",e.typeTransaction==null?null:e.typeTransaction.label)("rounded",!0),o(2),d("severity",e.modePaiement==null?null:e.modePaiement.style)("value",e.modePaiement==null?null:e.modePaiement.label)("rounded",!0),o(2),d("ngIf",(e.typeTransaction==null?null:e.typeTransaction.label)==="charge"),o(),d("ngIf",(e.typeTransaction==null?null:e.typeTransaction.label)==="avoir"),o(),d("ngIf",(e.typeTransaction==null?null:e.typeTransaction.label)==="reglement"),o(2),d("ngIf",(e.typeTransaction==null?null:e.typeTransaction.label)==="charge"),o(),d("ngIf",(e.typeTransaction==null?null:e.typeTransaction.label)==="avoir"),o(),d("ngIf",(e.typeTransaction==null?null:e.typeTransaction.label)==="reglement")}}function cl(r,v){if(r&1&&(a(0,"tr",50)(1,"td",51),l(2,"Total:"),n(),a(3,"td",52),l(4),n(),a(5,"td",53),l(6),n(),C(7,"td",54),n(),a(8,"tr",55)(9,"td",51),l(10,"Solde :"),n(),a(11,"td",56),l(12),n(),C(13,"td",54),n()),r&2){let e=m(3);o(4),h(e.totalCredits),o(2),h(e.totalDebits),o(6),h(e.item.soldeInitial+(e.totalCredits-e.totalDebits))}}function ml(r,v){r&1&&(a(0,"tr")(1,"td",57),C(2,"i",58),l(3," Aucune transaction disponible pour cette banque "),n()())}function dl(r,v){if(r&1){let e=M();a(0,"div",9)(1,"div",10)(2,"div",25)(3,"div",26)(4,"h5",27),C(5,"i",28),l(6," Historique des transactions "),n(),a(7,"div",29)(8,"button",30),A("click",function(){g(e);let t=m(2);return u(t.showTransactionSearch())}),n(),C(9,"p-splitButton",31),n()(),E(10,Js,41,35,"p-panel",32),a(11,"p-table",33),p(12,"translate"),E(13,Zs,17,0,"ng-template",1)(14,pl,25,25,"ng-template",34)(15,cl,14,3,"ng-template",3)(16,ml,4,0,"ng-template",35),n()()()()}if(r&2){let e=m(2);o(9),d("model",e.transactionExcelPdfButons),o(),d("ngIf",e.transactionFindByCriteriaShow),o(),f("currentPageReportTemplate",c(12,8,"Affichage de {first} \xE0 {last} sur {totalRecords} \xE9l\xE9ments")),d("value",e.transactions)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("rowsPerPageOptions",V(10,Ks))}}function hl(r,v){if(r&1&&(a(0,"p-tabView")(1,"p-tabPanel",7),p(2,"translate"),E(3,Ys,32,32,"div",8),n(),a(4,"p-tabPanel",7),p(5,"translate"),E(6,dl,17,11,"div",8),n()()),r&2){let e=m();o(),f("header",c(2,4,"Informations du compte")),o(2),d("ngIf",e.compte),o(),f("header",c(5,6,"Historique des transactions")),o(2),d("ngIf",e.compte)}}function gl(r,v){if(r&1){let e=M();a(0,"div",42)(1,"button",59),A("click",function(){g(e);let t=m();return u(t.hideViewDialog())}),n()()}}var qn=(()=>{class r{constructor(e,i,t,s,_,D,le,de,tt){this.typeTransactionService=e,this.exportService=i,this.service=t,this.transactionService=s,this.typePaiementService=_,this.compteService=D,this.modePaiementService=le,this.locataireService=de,this.typeTransactiontService=tt,this._submitted=!1,this._errorMessages=new Array,this.transactionFindByCriteriaShow=!1,this.transactionExportData=[],this.transactionCriteriaData=[],this._transactionFileName=`Compte Locataire - ${new Date().toLocaleDateString()}`,this.totalCredits=0,this.totalDebits=0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.findPaginatedByCriteria(),this.initTransactionExport(),this.loadReferenceDataForTransaction()}findPaginatedByCriteria(){}loadReferenceDataForTransaction(){this.typeTransactionService.findAll().subscribe(e=>this.typeTransactions=e),this.modePaiementService.findAll().subscribe(e=>this.modePaiements=e)}showTransactionSearch(){this.transactionFindByCriteriaShow=!this.transactionFindByCriteriaShow}resetTransactionCriteria(){this.transactionCriteria=new Mt,this.findPaginatedTransactions()}findPaginatedTransactions(){this.transactionService.findPaginatedByCriteria(this.transactionCriteria).subscribe(e=>{this.compte?this.transactions=e.list.filter(i=>i?.compteSource?.id==this.compte?.id||i?.compteDestination?.id==this.compte?.id):this.transactions=e.list,this.calculateTotals()},e=>console.log(e))}initTransactionExport(){this.transactionExcelPdfButons=[{label:"CSV",icon:"pi pi-file",command:()=>{this.prepareTransactionColumnExport(),this.exportService.exporterCSV(this.transactionCriteriaData,this.transactionExportData,this._transactionFileName)}},{label:"XLS",icon:"pi pi-file-excel",command:()=>{this.prepareTransactionColumnExport(),this.exportService.exporterExcel(this.transactionCriteriaData,this.transactionExportData,this._transactionFileName)}},{label:"PDF",icon:"pi pi-file-pdf",command:()=>{this.prepareTransactionColumnExport(),this.exportService.exporterPdf(this.transactionCriteriaData,this.transactionExportData,this._transactionFileName)}}]}prepareTransactionColumnExport(){this.transactionExportData=this.transactions.map(i=>{let t=0,s=0;i.typePaiement?.label==="Credit"&&(t=i.montant),i.typePaiement?.label==="Debit"&&(s=i.montant);let _="";i.typeTransaction?.label==="charge"||i.typeTransaction?.label==="avoir"?_=i.compteSource?.code||"":i.typeTransaction?.label==="reglement"&&(_=`${i.compteLocataire?.locataire?.nom||""} ${i.compteLocataire?.locataire?.prenom||""}`.trim());let D="";return i.typeTransaction?.label==="charge"||i.typeTransaction?.label==="reglement"?D=i.compteDestination?.code||"":i.typeTransaction?.label==="avoir"&&(D=`${i.compteLocataire?.locataire?.nom||""} ${i.compteLocataire?.locataire?.prenom||""}`.trim()),{Date:this.datePipe.transform(i.date,this.dateFormatColumn)||"",Cr\u00E9dit:t,D\u00E9bit:s,Description:(i.description||"").slice(0,50),"Type transaction":i.typeTransaction?.label||"","Mode paiement":i.modePaiement?.label||"","Compte source":_,"Compte destination":D}}),this.transactionExportData.push({Date:"TOTAL",Cr\u00E9dit:this.totalCredits,D\u00E9bit:this.totalDebits,Description:"","Type transaction":"","Mode paiement":"","Compte source":"","Compte destination":""});let e=this.totalCredits-this.totalDebits;this.transactionExportData.push({Date:"SOLDE",Cr\u00E9dit:e,D\u00E9bit:"",Description:"","Type transaction":"","Mode paiement":"","Compte source":"","Compte destination":""}),this.transactionCriteriaData=[{"Date Min":this.transactionCriteria.dateFrom?this.datePipe.transform(this.transactionCriteria.dateFrom,this.dateFormatColumn):I.emptyForExport,"Date Max":this.transactionCriteria.dateTo?this.datePipe.transform(this.transactionCriteria.dateTo,this.dateFormatColumn):I.emptyForExport,"Montant Min":this.transactionCriteria.montantMin||I.emptyForExport,"Montant Max":this.transactionCriteria.montantMax||I.emptyForExport,Description:this.transactionCriteria.description||I.emptyForExport,"Type transaction":this.transactionCriteria.typeTransaction?.label||I.emptyForExport,"Mode paiement":this.transactionCriteria.modePaiement?.label||I.emptyForExport}]}calculateTotals(){this.totalCredits=0,this.totalDebits=0,this.transactions&&this.transactions.length>0&&this.transactions.forEach(e=>{e.typePaiement?.label==="Credit"?(this.totalCredits+=Number(e.montant||0),console.log(e.montant)):e.typePaiement?.label==="Debit"&&(this.totalDebits+=Number(e.montant||0))})}get transactionCriteria(){return this.transactionService.criteria}set transactionCriteria(e){this.transactionService.criteria=e}get typeTransaction(){return this.typeTransactiontService.item}set typeTransaction(e){this.typeTransactiontService.item=e}get typeTransactions(){return this.typeTransactiontService.items}set typeTransactions(e){this.typeTransactiontService.items=e}get compteSource(){return this.compteService.item}set compteSource(e){this.compteService.item=e}get compteSources(){return this.compteService.items}set compteSources(e){this.compteService.items=e}get locataire(){return this.locataireService.item}set locataire(e){this.locataireService.item=e}get locataires(){return this.locataireService.items}set locataires(e){this.locataireService.items=e}get typePaiement(){return this.typePaiementService.item}set typePaiement(e){this.typePaiementService.item=e}get typePaiements(){return this.typePaiementService.items}set typePaiements(e){this.typePaiementService.items=e}get compteDestination(){return this.compteService.item}set compteDestination(e){this.compteService.item=e}get compteDestinations(){return this.compteService.items}set compteDestinations(e){this.compteService.items=e}get modePaiement(){return this.modePaiementService.item}set modePaiement(e){this.modePaiementService.item=e}get modePaiements(){return this.modePaiementService.items}set modePaiements(e){this.modePaiementService.items=e}hideViewDialog(){this.viewDialog=!1}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get viewDialog(){return this.service.viewDialog}set viewDialog(e){this.service.viewDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatView}get dateFormatColumn(){return I.dateFormatList}get compte(){return this.compteService.item}set compte(e){this.compteService.item=e}get transactions(){return this.transactionService.items}set transactions(e){this.transactionService.items=e}static{this.\u0275fac=function(i){return new(i||r)(S(ge),S(Ie),S(Rt),S(me),S(Be),S(Q),S(ve),S(st),S(ge))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-locataire-view-admin"]],inputs:{totalCredits:"totalCredits",totalDebits:"totalDebits"},standalone:!1,decls:4,vars:5,consts:[["styleClass","p-fluid compte-locataire-view-dialog",3,"visibleChange","visible","modal"],["pTemplate","header"],["pTemplate","content"],["pTemplate","footer"],[1,"flex","align-items-center"],[1,"pi","pi-wallet","text-primary","text-xl","mr-2"],[1,"font-semibold","text-lg"],[3,"header"],["class","grid",4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card","mb-4"],[1,"mb-3","font-medium"],[1,"pi","pi-info-circle","mr-2"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"field","flex","flex-col","gap-2"],[1,"field"],["for","4",1,"text-sm","font-semibold"],["type","text","pInputText","","id","4",1,"w-full",3,"disabled","placeholder","ngModel"],["for","1",1,"text-sm","font-semibold"],["id","1",3,"disabled","placeholder","ngModel"],["for","2",1,"text-sm","font-semibold"],["id","2",3,"disabled","placeholder","ngModel"],["for","3",1,"text-sm","font-semibold"],["id","3",3,"disabled","placeholder","ngModel"],[1,"card"],[1,"flex","flex-wrap","gap-2","align-items-center","justify-content-between","mb-2"],[1,"m-0","font-medium"],[1,"pi","pi-history","mr-2"],[1,"flex","align-items-center","gap-2"],["pButton","","pRipple","","label","Recherche","icon","pi pi-search",1,"p-button-outlined",3,"click"],["label","Exporter","icon","pi pi-download","styleClass","p-button-outlined",3,"model"],["styleClass","mb-2",3,"showHeader",4,"ngIf"],["styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","paginator","rows","showCurrentPageReport","currentPageReportTemplate","rowsPerPageOptions"],["pTemplate","body"],["pTemplate","emptymessage"],["styleClass","mb-2",3,"showHeader"],[1,"text-sm","font-medium"],[1,"w-full",3,"ngModelChange","ngModel","dateFormat"],[1,"w-full",3,"ngModelChange","ngModel"],["type","text","pInputText","",1,"w-full",3,"ngModelChange","ngModel"],["optionLabel","label","placeholder","S\xE9lectionner",1,"w-full",3,"ngModelChange","options","ngModel","showClear"],[1,"flex","justify-content-end"],[1,"flex","gap-2"],["pButton","","pRipple","","label","Rechercher","icon","pi pi-search",1,"p-button-primary",3,"click"],["pButton","","pRipple","","label","R\xE9initialiser","icon","pi pi-times",1,"p-button-outlined",3,"click"],[1,"text-green-500","font-medium"],[4,"ngIf"],[1,"text-red-500","font-medium"],[3,"severity","value","rounded"],[1,"text-center","bg-blue-700-400"],["colspan","1",1,"text-left","font-bold"],[1,"text-green-500","font-bold"],[1,"text-orange-500","font-bold"],["colspan","6"],[1,"text-center","bg-gray-400"],[1,"text-orange-500","font-bold","w-2"],["colspan","8",1,"text-center","p-4"],[1,"pi","pi-info-circle","text-primary","mr-2"],["pButton","","pRipple","","type","button","icon","pi pi-times","label","Fermer",1,"p-button-outlined",3,"click"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),y("visibleChange",function(_){return b(t.viewDialog,_)||(t.viewDialog=_),_}),E(1,Xs,5,3,"ng-template",1)(2,hl,7,8,"ng-template",2)(3,gl,2,0,"ng-template",3),n()),i&2&&(H(V(4,Qs)),x("visible",t.viewDialog),d("modal",!0))},dependencies:[he,O,ne,se,U,oe,re,R,q,Se,ce,J,ie,Y,Dt,z,gt,be,jt,T,j],styles:["[_nghost-%COMP%]     .compte-locataire-view-dialog .p-dialog-content{padding:0}[_nghost-%COMP%]     .compte-locataire-view-dialog .field{margin-bottom:1rem}[_nghost-%COMP%]     .compte-locataire-view-dialog .field label{display:block;margin-bottom:.5rem;color:#555}[_nghost-%COMP%]     .compte-locataire-view-dialog .field input, [_nghost-%COMP%]     .compte-locataire-view-dialog .field textarea{width:100%;background-color:#f9f9f9}[_nghost-%COMP%]     .compte-locataire-view-dialog .p-tabview .p-tabview-nav{background:#f8f9fa;border-bottom:1px solid #dee2e6;padding:0 1rem}[_nghost-%COMP%]     .compte-locataire-view-dialog .p-tabview .p-tabview-nav li .p-tabview-nav-link{padding:1rem;font-weight:600}[_nghost-%COMP%]     .compte-locataire-view-dialog .p-tabview .p-tabview-nav li .p-tabview-nav-link:not(.p-disabled):focus{box-shadow:none}[_nghost-%COMP%]     .compte-locataire-view-dialog .p-tabview .p-tabview-panels{padding:1.5rem}[_nghost-%COMP%]     .compte-locataire-view-dialog .card{background-color:#fff;border-radius:.5rem;box-shadow:0 2px 4px #0000000d;padding:1.25rem}[_nghost-%COMP%]     .compte-locataire-view-dialog .card h5{color:#495057;border-bottom:1px solid #e9ecef;padding-bottom:.75rem}[_nghost-%COMP%]     .compte-locataire-view-dialog .p-inputnumber .p-inputnumber-input{width:100%}[_nghost-%COMP%]     .compte-locataire-view-dialog .p-datatable .p-datatable-header{background-color:#f8f9fa;border:1px solid #e9ecef}[_nghost-%COMP%]     .compte-locataire-view-dialog .p-datatable th{background-color:#f8f9fa;color:#495057;font-weight:600;padding:.75rem 1rem}[_nghost-%COMP%]     .compte-locataire-view-dialog .p-datatable td{padding:.75rem 1rem}[_nghost-%COMP%]     .compte-locataire-view-dialog .p-button.p-button-outlined:focus{box-shadow:none}@media screen and (max-width: 768px){[_nghost-%COMP%]     .compte-locataire-view-dialog .p-tabview .p-tabview-panels{padding:1rem}[_nghost-%COMP%]     .compte-locataire-view-dialog .card{padding:1rem}}"]})}}return r})();var _l=()=>({width:"70vw"});function vl(r,v){r&1&&(a(0,"tr")(1,"th"),l(2,"Date"),n(),a(3,"th"),l(4,"Montant"),n(),a(5,"th"),l(6,"Description"),n(),a(7,"th"),l(8,"Type transaction"),n(),a(9,"th"),l(10,"Mode paiement"),n(),a(11,"th"),l(12,"Type paiement"),n(),a(13,"th"),l(14,"Compte source"),n(),a(15,"th"),l(16,"Compte destination"),n(),a(17,"th"),l(18,"Actions"),n()())}function Cl(r,v){if(r&1){let e=M();a(0,"tr")(1,"td"),l(2),p(3,"date"),n(),a(4,"td"),l(5),n(),a(6,"td"),l(7),n(),a(8,"td"),l(9),n(),a(10,"td"),l(11),n(),a(12,"td"),l(13),n(),a(14,"td"),l(15),n(),a(16,"td"),l(17),n(),a(18,"td")(19,"p-button",33),A("click",function(){let t=g(e),s=t.$implicit,_=t.rowIndex,D=m(2);return u(D.deleteTransactions(s,_))}),n(),a(20,"p-button",34),A("click",function(){let t=g(e),s=t.$implicit,_=t.rowIndex,D=m(2);return u(D.editTransactions(s,_))}),n()()()}if(r&2){let e=v.$implicit,i=m(2);o(2),h(G(3,10,e.date,i.dateFormatColumn)),o(3),h(e.montant),o(2),h(e.description),o(2),h(e.typeTransaction==null?null:e.typeTransaction.label),o(2),h(e.modePaiement==null?null:e.modePaiement.label),o(2),h(e.typePaiement==null?null:e.typePaiement.label),o(2),h(e.compteSource==null?null:e.compteSource.id),o(2),h(e.compteDestination==null?null:e.compteDestination.id),o(2),d("rounded",!0),o(),d("rounded",!0)}}function fl(r,v){if(r&1){let e=M();a(0,"p-tabView")(1,"p-tabPanel",3),p(2,"translate"),a(3,"div",4)(4,"div",5)(5,"label",6),l(6),p(7,"translate"),n(),a(8,"p-inputNumber",7),p(9,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.solde,t)||(s.item.solde=t),u(t)}),n()(),a(10,"div",5)(11,"label",8),l(12),p(13,"translate"),n(),a(14,"p-inputNumber",9),p(15,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.debit,t)||(s.item.debit=t),u(t)}),n()(),a(16,"div",5)(17,"label",10),l(18),p(19,"translate"),n(),a(20,"p-inputNumber",11),p(21,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.credit,t)||(s.item.credit=t),u(t)}),n()(),a(22,"div",5)(23,"label",12),l(24),p(25,"translate"),n(),a(26,"p-dropdown",13),p(27,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.locataire,t)||(s.item.locataire=t),u(t)}),n()()()(),a(28,"p-tabPanel",3),p(29,"translate"),a(30,"p-tabView",14),y("activeIndexChange",function(t){g(e);let s=m();return b(s.activeTab,t)||(s.activeTab=t),u(t)}),a(31,"p-tabPanel",15)(32,"div",16)(33,"div",5)(34,"label",6),l(35,"Date"),n(),a(36,"p-calendar",17),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.date,t)||(s.transactionsElement.date=t),u(t)}),n()(),a(37,"div",5)(38,"label",8),l(39,"Montant"),n(),a(40,"p-inputNumber",18),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.montant,t)||(s.transactionsElement.montant=t),u(t)}),n()(),a(41,"div",5)(42,"label",10),l(43,"Description"),n(),a(44,"input",19),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.description,t)||(s.transactionsElement.description=t),u(t)}),n()(),a(45,"div",5)(46,"label",20),l(47,"Type transaction"),n(),a(48,"p-dropdown",21),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.typeTransaction,t)||(s.transactionsElement.typeTransaction=t),u(t)}),n()(),a(49,"div",5)(50,"label",20),l(51,"Mode paiement"),n(),a(52,"p-dropdown",22),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.modePaiement,t)||(s.transactionsElement.modePaiement=t),u(t)}),n()(),a(53,"div",5)(54,"label",20),l(55,"Type paiement"),n(),a(56,"p-dropdown",23),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.typePaiement,t)||(s.transactionsElement.typePaiement=t),u(t)}),n()(),a(57,"div",5)(58,"label",20),l(59,"Compte source"),n(),a(60,"p-dropdown",24),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.compteSource,t)||(s.transactionsElement.compteSource=t),u(t)}),n()(),a(61,"div",5)(62,"label",20),l(63,"Compte destination"),n(),a(64,"p-dropdown",25),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.compteDestination,t)||(s.transactionsElement.compteDestination=t),u(t)}),n()(),a(65,"div",26)(66,"button",27),A("click",function(){g(e);let t=m();return u(t.addTransactions())}),C(67,"i",28),l(68," OK "),n()()()(),a(69,"p-tabPanel",3)(70,"div",29)(71,"p-table",30),E(72,vl,19,0,"ng-template",31)(73,Cl,21,13,"ng-template",32),n()()()()()()}if(r&2){let e=m();o(),f("header",c(2,49,"CompteLocataire.tabPan")),o(5),h(c(7,51,"CompteLocataire.solde")),o(2),f("placeholder",c(9,53,"CompteLocataire.solde")),x("ngModel",e.item.solde),o(4),h(c(13,55,"CompteLocataire.debit")),o(2),f("placeholder",c(15,57,"CompteLocataire.debit")),x("ngModel",e.item.debit),o(4),h(c(19,59,"CompteLocataire.credit")),o(2),f("placeholder",c(21,61,"CompteLocataire.credit")),x("ngModel",e.item.credit),o(4),h(c(25,63,"CompteLocataire.locataire")),o(2),f("placeholder",c(27,65,"CompteLocataire.locataire")),d("options",e.locataires),x("ngModel",e.item.locataire),d("filter",!0)("showClear",!0),o(2),f("header",c(29,67,"CompteLocataire.transactions")),o(2),x("activeIndex",e.activeTab),o(6),f("dateFormat",e.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",e.transactionsElement.date),d("showIcon",!0),o(4),x("ngModel",e.transactionsElement.montant),o(4),x("ngModel",e.transactionsElement.description),o(4),d("options",e.typeTransactions),x("ngModel",e.transactionsElement.typeTransaction),d("filter",!0)("showClear",!0),o(4),d("options",e.modePaiements),x("ngModel",e.transactionsElement.modePaiement),d("filter",!0)("showClear",!0),o(4),d("options",e.typePaiements),x("ngModel",e.transactionsElement.typePaiement),d("filter",!0)("showClear",!0),o(4),d("options",e.compteSources),x("ngModel",e.transactionsElement.compteSource),d("filter",!0)("showClear",!0),o(4),d("options",e.compteDestinations),x("ngModel",e.transactionsElement.compteDestination),d("filter",!0)("showClear",!0),o(5),X("header","Liste ",(e.item.transactions==null?null:e.item.transactions.length)>0?"("+(e.item.transactions==null?null:e.item.transactions.length)+")":"",""),o(2),d("value",e.item.transactions)("scrollable",!0)}}function xl(r,v){if(r&1){let e=M();a(0,"div",35)(1,"button",36),p(2,"translate"),A("click",function(){g(e);let t=m();return u(t.edit())}),C(3,"i",37),l(4),p(5,"translate"),n(),a(6,"button",38),A("click",function(){g(e);let t=m();return u(t.hideEditDialog())}),C(7,"i",39),l(8),p(9,"translate"),n()()}r&2&&(o(),f("label",c(2,3,"validate")),o(3),B(" ",c(5,5,"validate")," "),o(4),B(" ",c(9,7,"cancel")," "))}var On=(()=>{class r{constructor(e,i,t,s,_,D,le,de){this.service=e,this.transactionService=i,this.typePaiementService=t,this.compteService=s,this.modePaiementService=_,this.locataireService=D,this.typeTransactiontService=le,this.platformId=de,this._submitted=!1,this._errorMessages=new Array,this._activeTab=0,this.transactionsIndex=-1,this._transactionsElement=new Ae,this._validLocataireCode=!0,this._validLocataireNom=!0,this._validLocatairePrenom=!0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.transactionsElement.typeTransaction=new ut,this.typeTransactiontService.findAll().subscribe(e=>this.typeTransactions=e),this.transactionsElement.modePaiement=new Ne,this.modePaiementService.findAll().subscribe(e=>this.modePaiements=e),this.transactionsElement.typePaiement=new je,this.typePaiementService.findAll().subscribe(e=>this.typePaiements=e),this.transactionsElement.compteSource=new ae,this.compteService.findAll().subscribe(e=>this.compteSources=e),this.transactionsElement.compteDestination=new ae,this.compteService.findAll().subscribe(e=>this.compteDestinations=e),this.locataireService.findAll().subscribe(e=>this.locataires=e)}prepareEdit(){}edit(){this.submitted=!0,this.prepareEdit(),this.validateForm(),this.errorMessages.length===0?this.editWithShowOption(!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs sur le formulaire"})}editWithShowOption(e){this.service.edit().subscribe(i=>{let t=this.items.findIndex(s=>s.id===this.item.id);this.items[t]=i,this.editDialog=!1,this.submitted=!1,this.item=new Nt},i=>{console.log(i)})}hideEditDialog(){this.editDialog=!1,this.setValidation(!0)}validateTransactions(){this.errorMessages=new Array}setValidation(e){}addTransactions(){this.item.transactions==null&&(this.item.transactions=new Array),this.validateTransactions(),this.errorMessages.length===0?(this.transactionsIndex==-1?this.item.transactions.push(K({},this.transactionsElement)):this.item.transactions[this.transactionsIndex]=this.transactionsElement,this.transactionsElement=new Ae,this.transactionsIndex=-1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs suivant : "+this.errorMessages})}deleteTransactions(e,i){this.item.transactions.splice(i,1)}editTransactions(e,i){this.transactionsElement=K({},e),this.transactionsIndex=i,this.activeTab=0}validateForm(){this.errorMessages=new Array}openCreateCompteSource(e){return P(this,null,function*(){(yield this.roleService.isPermitted("Compte","edit"))?(this.compteSource=new ae,this.createCompteSourceDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}openCreateTypePaiement(e){return P(this,null,function*(){(yield this.roleService.isPermitted("TypePaiement","edit"))?(this.typePaiement=new je,this.createTypePaiementDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}openCreateCompteDestination(e){return P(this,null,function*(){(yield this.roleService.isPermitted("Compte","edit"))?(this.compteDestination=new ae,this.createCompteDestinationDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}openCreateModePaiement(e){return P(this,null,function*(){(yield this.roleService.isPermitted("ModePaiement","edit"))?(this.modePaiement=new Ne,this.createModePaiementDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}get typeTransaction(){return this.typeTransactiontService.item}set typeTransaction(e){this.typeTransactiontService.item=e}get typeTransactions(){return this.typeTransactiontService.items}set typeTransactions(e){this.typeTransactiontService.items=e}get createTypeTransactionDialog(){return this.typeTransactiontService.createDialog}set createTypeTransactionDialog(e){this.typeTransactiontService.createDialog=e}get compteSource(){return this.compteService.item}set compteSource(e){this.compteService.item=e}get compteSources(){return this.compteService.items}set compteSources(e){this.compteService.items=e}get createCompteSourceDialog(){return this.compteService.createDialog}set createCompteSourceDialog(e){this.compteService.createDialog=e}get locataire(){return this.locataireService.item}set locataire(e){this.locataireService.item=e}get locataires(){return this.locataireService.items}set locataires(e){this.locataireService.items=e}get createLocataireDialog(){return this.locataireService.createDialog}set createLocataireDialog(e){this.locataireService.createDialog=e}get typePaiement(){return this.typePaiementService.item}set typePaiement(e){this.typePaiementService.item=e}get typePaiements(){return this.typePaiementService.items}set typePaiements(e){this.typePaiementService.items=e}get createTypePaiementDialog(){return this.typePaiementService.createDialog}set createTypePaiementDialog(e){this.typePaiementService.createDialog=e}get compteDestination(){return this.compteService.item}set compteDestination(e){this.compteService.item=e}get compteDestinations(){return this.compteService.items}set compteDestinations(e){this.compteService.items=e}get createCompteDestinationDialog(){return this.compteService.createDialog}set createCompteDestinationDialog(e){this.compteService.createDialog=e}get modePaiement(){return this.modePaiementService.item}set modePaiement(e){this.modePaiementService.item=e}get modePaiements(){return this.modePaiementService.items}set modePaiements(e){this.modePaiementService.items=e}get createModePaiementDialog(){return this.modePaiementService.createDialog}set createModePaiementDialog(e){this.modePaiementService.createDialog=e}get transactionsElement(){return this._transactionsElement==null&&(this._transactionsElement=new Ae),this._transactionsElement}set transactionsElement(e){this._transactionsElement=e}get validLocataireCode(){return this._validLocataireCode}set validLocataireCode(e){this._validLocataireCode=e}get validLocataireNom(){return this._validLocataireNom}set validLocataireNom(e){this._validLocataireNom=e}get validLocatairePrenom(){return this._validLocatairePrenom}set validLocatairePrenom(e){this._validLocatairePrenom=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get editDialog(){return this.service.editDialog}set editDialog(e){this.service.editDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatCreate}get dateFormatColumn(){return I.dateFormatCreate}get submitted(){return this._submitted}set submitted(e){this._submitted=e}get errorMessages(){return this._errorMessages==null&&(this._errorMessages=new Array),this._errorMessages}set errorMessages(e){this._errorMessages=e}get validate(){return this.service.validate}set validate(e){this.service.validate=e}get activeTab(){return this._activeTab}set activeTab(e){this._activeTab=e}static{this.\u0275fac=function(i){return new(i||r)(S(Rt),S(me),S(Be),S(Q),S(ve),S(st),S(ge),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-locataire-edit-admin"]],standalone:!1,decls:4,vars:11,consts:[["styleClass","p-fluid",3,"visibleChange","visible","header","modal","maximizable","draggable","resizable"],["pTemplate","content"],["pTemplate","footer"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","1",1,"text-sm","font-semibold"],["id","1",3,"ngModelChange","placeholder","ngModel"],["for","2",1,"text-sm","font-semibold"],["id","2",3,"ngModelChange","placeholder","ngModel"],["for","3",1,"text-sm","font-semibold"],["id","3",3,"ngModelChange","placeholder","ngModel"],["for","4",1,"text-sm","font-semibold"],["appendTo","body","id","4","filterMatchMode","contains","optionLabel","code",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],[3,"activeIndexChange","activeIndex"],["header","Cre\u0301ation"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","p-4"],["appendTo","body","id","1","placeholder","Date",1,"w-full",3,"ngModelChange","showTime","showSeconds","ngModel","dateFormat","showIcon"],["id","montant","placeholder","Montant",3,"ngModelChange","ngModel"],["type","text","pInputText","","placeholder","Description","id","3","autofocus","",3,"ngModelChange","ngModel"],[1,"text-sm","font-semibold"],["appendTo","body","id","4","filterMatchMode","contains","optionLabel","label","placeholder","Type transaction",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],["appendTo","body","id","5","filterMatchMode","contains","optionLabel","label","placeholder","Mode paiement",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],["appendTo","body","id","6","filterMatchMode","contains","optionLabel","label","placeholder","Type paiement",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],["appendTo","body","id","7","filterMatchMode","contains","optionLabel","id","placeholder","Compte source",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],["appendTo","body","id","8","filterMatchMode","contains","optionLabel","id","placeholder","Compte destination",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],[1,"flex","justify-end","md:col-span-3"],["pButton","","type","button",1,"bg-green-500","text-white","px-4","py-2","rounded-md","hover:bg-green-700",3,"click"],[1,"pi","pi-plus"],[1,"card","p-4"],["scrollHeight","200px",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],["pButton","","type","button","icon","pi pi-times","severity","danger",1,"mr-2",3,"click","rounded"],["pButton","","type","button","icon","pi pi-pencil","severity","success",1,"mr-2",3,"click","rounded"],[1,"flex","justify-end","space-x-3","p-4"],[1,"bg-blue-500","text-white","px-4","py-2","rounded-md","hover:bg-primary",3,"click","label"],[1,"pi","pi-check"],[1,"border","border-gray-400","text-gray-600","hover:bg-gray-200","px-4","py-2","rounded-md",3,"click"],[1,"pi","pi-times"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),p(1,"translate"),y("visibleChange",function(_){return b(t.editDialog,_)||(t.editDialog=_),_}),E(2,fl,74,69,"ng-template",1)(3,xl,10,9,"ng-template",2),n()),i&2&&(H(V(10,_l)),f("header",c(1,8,"CompteLocataire.tabPan")),x("visible",t.editDialog),d("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!1))},dependencies:[O,ne,se,U,oe,ye,re,R,q,ce,J,ie,Y,z,T,j],encapsulation:2})}}return r})();var yl=()=>["solde","debit","credit","locatairecode"],wl=()=>[10,25,50],Sl=()=>({width:"450px"});function Il(r,v){if(r&1){let e=M();a(0,"button",17),p(1,"translate"),A("click",function(){g(e);let t=m(2);return u(t.showSearch())}),n()}if(r&2){let e=m(2);X("label"," ",c(1,4,"search"),""),X("icon","pi pi-",e.findByCriteriaShow?"angle-down":"angle-right","")}}function Al(r,v){if(r&1&&(a(0,"div",18),C(1,"p-splitButton",19),p(2,"translate"),n()),r&2){let e=m(2);o(),X("label"," ",c(2,3,"export"),""),d("model",e.excelPdfButons)}}function El(r,v){if(r&1){let e=M();a(0,"div",20)(1,"div",21)(2,"label",22),l(3),p(4,"translate"),n(),a(5,"p-inputNumber",23),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.soldeMin,t)||(s.criteria.soldeMin=t),u(t)}),n()(),a(6,"div",21)(7,"label",24),l(8),p(9,"translate"),n(),a(10,"p-inputNumber",25),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.soldeMax,t)||(s.criteria.soldeMax=t),u(t)}),n()(),a(11,"div",21)(12,"label",26),l(13),p(14,"translate"),n(),a(15,"p-inputNumber",27),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.debitMin,t)||(s.criteria.debitMin=t),u(t)}),n()(),a(16,"div",21)(17,"label",28),l(18),p(19,"translate"),n(),a(20,"p-inputNumber",29),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.debitMax,t)||(s.criteria.debitMax=t),u(t)}),n()(),a(21,"div",21)(22,"label",30),l(23),p(24,"translate"),n(),a(25,"p-inputNumber",31),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.creditMin,t)||(s.criteria.creditMin=t),u(t)}),n()(),a(26,"div",21)(27,"label",32),l(28),p(29,"translate"),n(),a(30,"p-inputNumber",33),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.creditMax,t)||(s.criteria.creditMax=t),u(t)}),n()(),a(31,"div",21)(32,"label",34),l(33),p(34,"translate"),n(),a(35,"p-dropdown",35),p(36,"translate"),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.locataire,t)||(s.criteria.locataire=t),u(t)}),n()(),a(37,"div",36)(38,"button",37),p(39,"translate"),A("click",function(){g(e);let t=m(2);return u(t.findPaginatedByCriteria())}),C(40,"i",38),l(41),p(42,"translate"),n()()()}if(r&2){let e=m(2);o(3),h(c(4,20,"CompteLocataire.soldeMin")),o(2),x("ngModel",e.criteria.soldeMin),o(3),h(c(9,22,"CompteLocataire.soldeMax")),o(2),x("ngModel",e.criteria.soldeMax),o(3),h(c(14,24,"CompteLocataire.debitMin")),o(2),x("ngModel",e.criteria.debitMin),o(3),h(c(19,26,"CompteLocataire.debitMax")),o(2),x("ngModel",e.criteria.debitMax),o(3),h(c(24,28,"CompteLocataire.creditMin")),o(2),x("ngModel",e.criteria.creditMin),o(3),h(c(29,30,"CompteLocataire.creditMax")),o(2),x("ngModel",e.criteria.creditMax),o(3),h(c(34,32,"CompteLocataire.locataire")),o(2),f("placeholder",c(36,34,"CompteLocataire.locataire")),d("options",e.locataires),x("ngModel",e.criteria.locataire),d("filter",!0)("showClear",!0),o(3),f("label",c(39,36,"validate")),o(3),B(" ",c(42,38,"validate")," ")}}function Ml(r,v){if(r&1){let e=M();a(0,"div",39)(1,"h5",40),l(2),p(3,"translate"),n(),a(4,"span",41)(5,"p-iconfield",42),C(6,"p-inputicon",43),a(7,"input",44),p(8,"translate"),A("input",function(t){g(e),m();let s=Oe(9);return u(s.filterGlobal(t.target.value,"contains"))}),n()()()()}r&2&&(o(2),h(c(3,2,"CompteLocataire.header")),o(5),f("placeholder",c(8,4,"searchInput")))}function Tl(r,v){r&1&&(a(0,"tr")(1,"th",45),C(2,"p-tableHeaderCheckbox"),n(),a(3,"th",46)(4,"div",47)(5,"span",48),l(6),p(7,"translate"),n(),C(8,"p-sortIcon",49),n()(),a(9,"th",50)(10,"div",47)(11,"span",48),l(12),p(13,"translate"),n(),C(14,"p-sortIcon",51),n()(),a(15,"th",52)(16,"div",47)(17,"span",48),l(18),p(19,"translate"),n(),C(20,"p-sortIcon",53),n()(),a(21,"th",54)(22,"div",47)(23,"span",48),l(24),p(25,"translate"),n()()(),a(26,"th"),l(27,"Actions"),n()()),r&2&&(o(6),h(c(7,4,"CompteLocataire.solde")),o(6),h(c(13,6,"CompteLocataire.debit")),o(6),h(c(19,8,"CompteLocataire.credit")),o(6),h(c(25,10,"CompteLocataire.locataire")))}function Pl(r,v){if(r&1){let e=M();a(0,"button",58),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.view(t))}),n()}}function Dl(r,v){if(r&1){let e=M();a(0,"button",59),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.delete(t))}),n()}}function Vl(r,v){if(r&1&&(a(0,"tr")(1,"td"),C(2,"p-tableCheckbox",55),n(),a(3,"td"),l(4),n(),a(5,"td"),l(6),n(),a(7,"td"),l(8),n(),a(9,"td"),l(10),n(),a(11,"td"),E(12,Pl,1,0,"button",56)(13,Dl,1,0,"button",57),n()()),r&2){let e=v.$implicit,i=m(2);o(2),d("value",e),o(2),h(e.solde),o(2),h(e.debit),o(2),h(e.credit),o(2),h(e.locataire==null?null:e.locataire.fullName),o(2),d("ngIf",i.viewActionIsValid),o(),d("ngIf",i.deleteActionIsValid)}}function Bl(r,v){if(r&1){let e=M();a(0,"p-paginator",60),A("onPageChange",function(t){g(e);let s=m(2);return u(s.onPage(t))}),n(),a(1,"div",61),l(2),n()}if(r&2){let e=m(2);d("rows",10)("totalRecords",e.totalRecords),o(2),$e(" En totale il ",(e.items&&e.totalRecords==1,"y a")," ",e.items?e.totalRecords:0," ",e.items?e.totalRecords==1?"compte locataire":"compte locataires":0,". ")}}function Ll(r,v){r&1&&C(0,"app-compte-locataire-create-admin")}function Fl(r,v){r&1&&C(0,"app-compte-locataire-edit-admin")}function Wl(r,v){if(r&1&&C(0,"app-compte-locataire-view-admin",62),r&2){let e=m(2);d("totalCredits",e.totalCredits)("totalDebits",e.totalDebits)}}function kl(r,v){if(r&1){let e=M();a(0,"div",3)(1,"div",4),C(2,"p-toast"),a(3,"div",5)(4,"p-toolbar",6),E(5,Il,2,6,"ng-template",7)(6,Al,3,5,"ng-template",8),n(),E(7,El,43,40,"div",9),a(8,"p-table",10,0),p(10,"translate"),y("selectionChange",function(t){g(e);let s=m();return b(s.selections,t)||(s.selections=t),u(t)}),E(11,Ml,9,6,"ng-template",11)(12,Tl,28,12,"ng-template",12)(13,Vl,14,7,"ng-template",13)(14,Bl,3,5,"ng-template",14),n()(),E(15,Ll,1,0,"app-compte-locataire-create-admin",15)(16,Fl,1,0,"app-compte-locataire-edit-admin",15)(17,Wl,1,2,"app-compte-locataire-view-admin",16),C(18,"p-confirmDialog"),n()()}if(r&2){let e=m();o(7),d("ngIf",e.findByCriteriaShow),o(),f("currentPageReportTemplate",c(10,16,"les \xE9l\xE9ments de {first} \xE0 {last} sur {totalRecords} ")),d("value",e.items)("columns",e.cols)("rows",8)("paginator",!1)("globalFilterFields",V(18,yl)),x("selection",e.selections),d("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",V(19,wl)),o(7),d("ngIf",e.createDialog&&e.createActionIsValid),o(),d("ngIf",e.editDialog&&e.editActionIsValid),o(),d("ngIf",e.viewDialog&&e.viewActionIsValid),o(),H(V(20,Sl))}}function jl(r,v){r&1&&(a(0,"p-card",63)(1,"p",64),l(2," You don't have permission to access ! "),n()())}var Ri=(()=>{class r{constructor(e,i,t,s,_,D,le,de){this.service=e,this.transactionService=i,this.typePaiementService=t,this.compteService=s,this.modePaiementService=_,this.locataireService=D,this.typeTransactiontService=le,this.platformId=de,this.fileName="CompteLocataire",this.findByCriteriaShow=!1,this.cols=[],this.exportData=[],this.criteriaData=[],this._totalRecords=0,this.enableSecurity=!1,this.totalCredits=0,this.totalDebits=0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.authService=w.injector.get(ot),this.exportService=w.injector.get(Ie)}ngOnInit(){this.findPaginatedByCriteria(),this.initExport(),this.initCol(),this.loadLocataire()}onExcelFileSelected(e){let i=e.target;i.files&&i.files.length>0&&(this.excelFile=i.files[0])}importExcel(){this.excelFile&&this.service.importExcel(this.excelFile).subscribe(e=>{this.items=e,this.messageService.add({severity:"success",summary:"Success",detail:"File uploaded successfully!",life:3e3})},e=>{this.messageService.add({severity:"error",summary:"Error",detail:"File uploaded with Error!",life:3e3})})}findPaginatedByCriteria(){this.service.findPaginatedByCriteria(this.criteria).subscribe(e=>{this.items=e.list,console.log(e.list),this.totalRecords=e.dataSize,this.selections=new Array},e=>console.log(e))}onPage(e){this.criteria.page=e.page,this.criteria.maxResults=e.rows,this.findPaginatedByCriteria()}edit(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.item=i,console.log(i),this.editDialog=!0})})}view(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.item=i,this.viewDialog=!0,this.transactionService.findPaginatedByCriteria(this.transactionService.criteria).subscribe(t=>{this.transactionService.items=t.list.filter(s=>s?.compteLocataire?.id==i?.id),this.totalCredits=0,this.totalDebits=0,this.transactionService.items&&this.transactionService.items.length>0&&this.transactionService.items.forEach(s=>{s.typePaiement?.label==="Debit"?this.totalCredits+=Number(s.montant||0):s.typePaiement?.label==="Credit"&&(this.totalDebits+=Number(s.montant||0))})})})})}openCreate(){return P(this,null,function*(){this.item=new Nt,this.createDialog=!0})}deleteMultiple(){return P(this,null,function*(){this.confirmationService.confirm({message:"Voulez-vous supprimer ces \xE9l\xE9ments ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Ok"},accept:()=>{this.service.deleteMultiple().subscribe(()=>{for(let e of this.selections){let i=this.items.findIndex(t=>t.id===e.id);this.items.splice(i,1)}this.selections=new Array,this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Les \xE9l\xE9ments s\xE9lectionn\xE9s ont \xE9t\xE9 supprim\xE9s",life:3e3})},e=>console.log(e))}})})}isSelectionDisabled(){return this.selections==null||this.selections.length==0}delete(e){return P(this,null,function*(){this.confirmationService.confirm({message:"Voulez-vous supprimer cet \xE9l\xE9ment ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Ok"},accept:()=>{this.service.delete(e).subscribe(i=>{if(i>0){let t=this.items.indexOf(e);t>-1&&this.items.splice(t,1),this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Element Supprim\xE9",life:3e3})}},i=>console.log(i))}})})}duplicate(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.initDuplicate(i),this.item=i,this.item.id=null,this.createDialog=!0})})}initExport(){this.excelPdfButons=[{label:"CSV",icon:"pi pi-file",command:()=>{this.prepareColumnExport(),this.exportService.exporterCSV(this.criteriaData,this.exportData,this.fileName)}},{label:"XLS",icon:"pi pi-file-excel",command:()=>{this.prepareColumnExport(),this.exportService.exporterExcel(this.criteriaData,this.exportData,this.fileName)}},{label:"PDF",icon:"pi pi-file-pdf",command:()=>{this.prepareColumnExport(),this.exportService.exporterPdf(this.criteriaData,this.exportData,this.fileName)}}]}exportPdf(e){this.service.exportPdf(e).subscribe(i=>{let t=new Blob([i],{type:"application/pdf"}),s=window.URL.createObjectURL(t),_=document.createElement("a");_.href=s,_.download=this.pdfName,_.setAttribute("target","_blank"),_.click(),window.URL.revokeObjectURL(s)},i=>{console.error(i)})}showSearch(){this.findByCriteriaShow=!this.findByCriteriaShow}update(){this.service.edit().subscribe(e=>{let i=this.items.findIndex(t=>t.id===this.item.id);this.items[i]=e,this.editDialog=!1,this.item=new Nt},e=>{console.log(e)})}save(){this.service.save().subscribe(e=>{e!=null?(this.items.push(K({},e)),this.createDialog=!1,this.item=new Nt):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Element existant"})},e=>{console.log(e)})}initCol(){this.cols=[{field:"solde",header:"Solde"},{field:"debit",header:"Debit"},{field:"credit",header:"Credit"},{field:"locataire?.code",header:"Locataire"}]}loadLocataire(){return P(this,null,function*(){this.locataireService.findAllOptimized().subscribe(e=>this.locataires=e,e=>console.log(e))})}initDuplicate(e){e.transactions!=null&&e.transactions.forEach(i=>{i.compteDestination=null,i.id=null})}prepareColumnExport(){this.service.findByCriteria(this.criteria).subscribe(e=>{this.exportData=e.map(i=>({Solde:i.solde,Debit:i.debit,Credit:i.credit,Locataire:i.locataire?.code})),this.criteriaData=[{"Solde Min":this.criteria.soldeMin?this.criteria.soldeMin:I.emptyForExport,"Solde Max":this.criteria.soldeMax?this.criteria.soldeMax:I.emptyForExport,"Debit Min":this.criteria.debitMin?this.criteria.debitMin:I.emptyForExport,"Debit Max":this.criteria.debitMax?this.criteria.debitMax:I.emptyForExport,"Credit Min":this.criteria.creditMin?this.criteria.creditMin:I.emptyForExport,"Credit Max":this.criteria.creditMax?this.criteria.creditMax:I.emptyForExport}]})}get items(){return this.service.items}set items(e){this.service.items=e}get selections(){return this.service.selections}set selections(e){this.service.selections=e}get item(){return this.service.item}set item(e){this.service.item=e}get createDialog(){return this.service.createDialog}set createDialog(e){this.service.createDialog=e}get editDialog(){return this.service.editDialog}set editDialog(e){this.service.editDialog=e}get viewDialog(){return this.service.viewDialog}set viewDialog(e){this.service.viewDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatList}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e}get pdfName(){return this._pdfName}set pdfName(e){this._pdfName=e}get createActionIsValid(){return this.service.createActionIsValid}set createActionIsValid(e){this.service.createActionIsValid=e}get editActionIsValid(){return this.service.editActionIsValid}set editActionIsValid(e){this.service.editActionIsValid=e}get listActionIsValid(){return this.service.listActionIsValid}set listActionIsValid(e){this.service.listActionIsValid=e}get deleteActionIsValid(){return this.service.deleteActionIsValid}set deleteActionIsValid(e){this.service.deleteActionIsValid=e}get viewActionIsValid(){return this.service.viewActionIsValid}set viewActionIsValid(e){this.service.viewActionIsValid=e}get duplicateActionIsValid(){return this.service.duplicateActionIsValid}set duplicateActionIsValid(e){this.service.duplicateActionIsValid=e}get createAction(){return this.service.createAction}set createAction(e){this.service.createAction=e}get listAction(){return this.service.listAction}set listAction(e){this.service.listAction=e}get editAction(){return this.service.editAction}set editAction(e){this.service.editAction=e}get deleteAction(){return this.service.deleteAction}set deleteAction(e){this.service.deleteAction=e}get viewAction(){return this.service.viewAction}set viewAction(e){this.service.viewAction=e}get duplicateAction(){return this.service.duplicateAction}set duplicateAction(e){this.service.duplicateAction=e}get entityName(){return this.service.entityName}set entityName(e){this.service.entityName=e}static{this.\u0275fac=function(i){return new(i||r)(S(Rt),S(me),S(Be),S(Q),S(ve),S(st),S(ge),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-locataire-list-admin"]],standalone:!1,decls:2,vars:2,consts:[["dt",""],["class","grid",4,"ngIf"],["header","Permission not allowed",4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 border border-surface rounded-lg",4,"ngIf"],["dataKey","id","styleClass","p-datatable-customers","selectionMode","multiple",3,"selectionChange","value","columns","rows","paginator","globalFilterFields","selection","rowHover","currentPageReportTemplate","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[4,"ngIf"],[3,"totalCredits","totalDebits",4,"ngIf"],["pButton","","pRipple","",1,"p-button-secondary","mr-2","mb-2",3,"click","label","icon"],[1,"flex"],["icon","pi pi-download","styleClass","p-button-secondary",3,"label","model"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","p-4","border","border-surface","rounded-lg"],[1,"flex","flex-col","gap-2"],["for","1-1",1,"text-sm","font-semibold"],["mode","decimal","id","1-1",3,"ngModelChange","ngModel"],["for","1-2",1,"text-sm","font-semibold"],["mode","decimal","id","1-2",3,"ngModelChange","ngModel"],["for","2-1",1,"text-sm","font-semibold"],["mode","decimal","id","2-1",3,"ngModelChange","ngModel"],["for","2-2",1,"text-sm","font-semibold"],["mode","decimal","id","2-2",3,"ngModelChange","ngModel"],["for","3-1",1,"text-sm","font-semibold"],["mode","decimal","id","3-1",3,"ngModelChange","ngModel"],["for","3-2",1,"text-sm","font-semibold"],["mode","decimal","id","3-2",3,"ngModelChange","ngModel"],["for","4-2",1,"text-sm","font-semibold"],["id","4","optionLabel","code",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],[1,"col-span-full","flex","justify-end","mt-4"],["pButton","","pRipple","",1,"px-4","py-2","rounded-md",3,"click","label"],[1,"pi","pi-sort-amount-down"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","p-2","gap-4"],[1,"text-center","md:text-left"],[1,"relative","w-full","md:w-auto"],["iconPosition","left",1,"w-full","md:w-auto"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full","md:w-72","border","border-gray-300","rounded-md","p-2","focus:ring","focus:ring-blue-300",3,"input","placeholder"],[2,"width","3rem"],["pSortableColumn","solde"],[1,"p-d-flex","p-jc-between","p-ai-center"],[1,"mr-2"],["field","solde"],["pSortableColumn","debit"],["field","debit"],["pSortableColumn","credit"],["field","credit"],["pSortableColumn","locataire"],[3,"value"],["pButton","","pRipple","","icon","pi pi-list","class","p-button-rounded p-button-secondary mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","class","p-button-rounded p-button-danger mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-list",1,"p-button-rounded","p-button-secondary","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger","mr-2",3,"click"],[3,"onPageChange","rows","totalRecords"],[1,"p-d-flex","p-ai-center","p-jc-between"],[3,"totalCredits","totalDebits"],["header","Permission not allowed"],[1,"m-0"]],template:function(i,t){i&1&&E(0,kl,19,21,"div",1)(1,jl,3,0,"p-card",2),i&2&&(d("ngIf",t.listActionIsValid),o(),d("ngIf",!t.listActionIsValid))},dependencies:[he,we,O,ze,ne,Ge,nt,Qe,Ke,rt,U,oe,R,q,Se,ce,z,it,at,Ue,He,be,Rn,qn,On,j],encapsulation:2})}}return r})();var Nl=()=>({width:"450px"});function Rl(r,v){if(r&1){let e=M();a(0,"div",33)(1,"p-button",34),p(2,"translate"),A("click",function(){g(e);let t=m();return u(t.cancelAddType())}),n(),a(3,"p-button",35),p(4,"translate"),A("click",function(){g(e);let t=m();return u(t.saveNewType())}),n()()}r&2&&(o(),f("label",c(2,2,"cancel")),o(2),f("label",c(4,4,"validate")))}var Vi=(()=>{class r{constructor(e,i,t,s,_,D,le,de,tt){this.service=e,this.banqueService=i,this.compteService=t,this.translateService=s,this.caisseService=_,this.localService=D,this.typeChargeService=le,this.chargeService=de,this.platformId=tt,this._submitted=!1,this._errorMessages=new Array,this._activeTab=0,this.chargesIndex=-1,this._chargesElement=new qe,this._validCompteChargeCode=!0,this._validChargesCode=!0,this._validChargesLabel=!0,this.compteElement=new ae,this.displayAddTypeDialog=!1,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.chargesElement.typeCharge=new Ye,this.typeChargeService.findAll().subscribe(e=>this.typeCharges=e),this.chargesElement.local=new ei,this.localService.findAll().subscribe(e=>this.locals=e),this.banqueService.findPaginatedByCriteria(this.banqueService.criteria).subscribe(e=>{this.banqueService.items=e.list}),this.caisseService.findPaginatedByCriteria(this.caisseService.criteria).subscribe(e=>{this.caisseService.items=e.list}),this.compteService.findPaginatedByCriteria(this.compteService.criteria).subscribe(e=>{this.comptes=e.list})}save(){this.submitted=!0,this.item.typeCharges.push(this.typeCharge),this.compte.banque=this.compteElement.banque,this.compte.caisse=this.compteElement.caisse,this.validateForm(),this.errorMessages.length===0?this.saveWithShowOption(!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs sur le formulaire"})}saveWithShowOption(e){this.service.save().subscribe(i=>{i!=null?(this.messageService.add({severity:"success",summary:"",detail:"Compte charg\xE9 cr\xE9\xE9"}),this.compte.code=i.code,this.compte.compteCharge=i,this.findPaginatedByCriteria(),this.createDialog=!1,this.submitted=!1,this.typeCharge=new Ye,this.item=new wt):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Element existant"})},i=>{this.messageService.add({severity:"error",summary:"Erreurs",detail:"Ce compte charg\xE9 existe d\xE9j\xE0"})})}hideCreateDialog(){this.createDialog=!1,this.setValidation(!0)}validateCharges(){this.errorMessages=new Array,this.validateChargesCode(),this.validateChargesLabel()}setValidation(e){this.validCompteChargeCode=e,this.validChargesCode=e,this.validChargesLabel=e}addCharges(){this.item.charges==null&&(this.item.charges=new Array),this.validateCharges(),this.errorMessages.length===0?(this.chargesIndex==-1?this.item.charges.push(K({},this.chargesElement)):this.item.charges[this.chargesIndex]=this.chargesElement,this.chargesElement=new qe,this.chargesIndex=-1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs suivant : "+this.errorMessages})}deleteCharges(e,i){this.item.charges.splice(i,1)}editCharges(e,i){this.chargesElement=K({},e),this.chargesIndex=i,this.activeTab=0}validateForm(){this.errorMessages=new Array}validateCompteChargeCode(){this.stringUtilService.isEmpty(this.item.code)?(this.errorMessages.push("Code non valide"),this.validCompteChargeCode=!1):this.validCompteChargeCode=!0}validateChargesCode(){this.chargesElement.code==null?(this.errorMessages.push("Code de la charge est  invalide"),this.validChargesCode=!1):this.validChargesCode=!0}validateChargesLabel(){this.chargesElement.label==null?(this.errorMessages.push("Label de la charge est  invalide"),this.validChargesLabel=!1):this.validChargesLabel=!0}openCreateTypeCharge(e){return P(this,null,function*(){(yield this.roleService.isPermitted("TypeCharge","add"))?(this.typeCharge=new Ye,this.createTypeChargeDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}showAddTypeDialog(){this.typeCharge=new Ye,this.displayAddTypeDialog=!0}cancelAddType(){this.displayAddTypeDialog=!1}saveNewType(){if(!this.typeCharge.label){this.messageService.add({severity:"warn",summary:this.translateService.instant("warning"),detail:this.translateService.instant("form.required.fields")});return}this.typeChargeService.save().subscribe({next:e=>{this.typeCharges.push(e),this.typeCharge=e,this.messageService.add({severity:"success",summary:this.translateService.instant("success"),detail:this.translateService.instant("typeCharge.created")}),this.displayAddTypeDialog=!1},error:e=>{console.error("Erreur lors de la cr\xE9ation du type de charge",e),this.messageService.add({severity:"error",summary:this.translateService.instant("error"),detail:this.translateService.instant("error.creating.type")})}})}get local(){return this.localService.item}set local(e){this.localService.item=e}get locals(){return this.localService.items}set locals(e){this.localService.items=e}get createLocalDialog(){return this.localService.createDialog}set createLocalDialog(e){this.localService.createDialog=e}get typeCharge(){return this.typeChargeService.item}set typeCharge(e){this.typeChargeService.item=e}get typeCharges(){return this.typeChargeService.items}set typeCharges(e){this.typeChargeService.items=e}get createTypeChargeDialog(){return this.typeChargeService.createDialog}set createTypeChargeDialog(e){this.typeChargeService.createDialog=e}get validCompteChargeCode(){return this._validCompteChargeCode}set validCompteChargeCode(e){this._validCompteChargeCode=e}get validChargesCode(){return this._validChargesCode}set validChargesCode(e){this._validChargesCode=e}get validChargesLabel(){return this._validChargesLabel}set validChargesLabel(e){this._validChargesLabel=e}get chargesElement(){return this._chargesElement==null&&(this._chargesElement=new qe),this._chargesElement}set chargesElement(e){this._chargesElement=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get compte(){return this.compteService.item}set compte(e){this.compteService.item=e}get createDialog(){return this.service.createDialog}set createDialog(e){this.service.createDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatCreate}get dateFormatColumn(){return I.dateFormatCreate}get submitted(){return this._submitted}set submitted(e){this._submitted=e}get errorMessages(){return this._errorMessages==null&&(this._errorMessages=new Array),this._errorMessages}set errorMessages(e){this._errorMessages=e}get validate(){return this.service.validate}set validate(e){this.service.validate=e}get activeTab(){return this._activeTab}set activeTab(e){this._activeTab=e}get caisses(){return this.caisseService.items}set caisses(e){this.caisseService.items=e}get banques(){return this.banqueService.items}set banques(e){this.banqueService.items=e}get comptes(){return this.compteService.items}set comptes(e){this.compteService.items=e}updateSolde(e){this.compte.solde=this.compte.credit-this.compte.debit}findPaginatedByCriteria(){this.service.findPaginatedByCriteria(this.criteria).subscribe(e=>{this.items=e.list},e=>console.log(e))}cancel(){this.navigateToList()}navigateToList(){this.router.navigate(["/app/admin/finance/compte-charge/list"])}static{this.\u0275fac=function(i){return new(i||r)(S(xt),S(_e),S(Q),S(hn),S(pt),S(ke),S(Ze),S(Je),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-charge-create-admin"]],standalone:!1,decls:68,vars:83,consts:[[1,"container","mx-auto","p-4"],[1,"bg-white","shadow-md","rounded-lg"],[1,"border-b","p-4","flex","justify-between","items-center","bg-blue-200","text-white"],[1,"text-xl","font-semibold"],[1,"text-white","hover:bg-blue-600","p-2","rounded-md",3,"click"],[1,"pi","pi-times"],[1,"p-4"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","3",1,"text-sm","font-semibold"],["type","text","pInputText","","id","3",3,"ngModelChange","placeholder","ngModel"],["for","locale",1,"text-sm","font-semibold"],["id","locale","appendTo","body","filterMatchMode","contains","optionLabel","label",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],["for","typeCharges",1,"text-sm","font-semibold"],[1,"flex","gap-2"],["id","typeCharges","appendTo","body","filterMatchMode","contains","optionLabel","label",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],["pButton","","type","button","icon","pi pi-plus",1,"p-button-outlined",3,"click","pTooltip"],[1,"field","flex","flex-col","gap-2"],["for","6",1,"text-sm","font-semibold"],["id","6","appendTo","body",1,"w-full",3,"ngModelChange","showTime","showSeconds","placeholder","ngModel","dateFormat"],["for","8",1,"text-sm","font-semibold"],["rows","8","type","text","pInputText","","id","8",3,"ngModel","placeholder"],[1,"flex","justify-end","space-x-3","p-4","border-t"],["icon","pi pi-check","styleClass","p-button-primary",3,"click","label"],["icon","pi pi-times","styleClass","p-button-secondary",3,"click","label"],[3,"visibleChange","header","visible","modal","draggable","resizable"],[1,"flex","flex-col","gap-4","p-4"],["for","typeChargeLabel",1,"text-sm","font-semibold"],["type","text","pInputText","","id","typeChargeLabel",3,"ngModelChange","ngModel","placeholder"],["for","typeChargeDescription",1,"text-sm","font-semibold"],["rows","3","pInputTextarea","","id","typeChargeDescription",3,"ngModelChange","ngModel","placeholder"],["pTemplate","footer"],[1,"flex","justify-end","gap-2"],["styleClass","p-button-text",3,"click","label"],["styleClass","p-button-primary",3,"click","label"]],template:function(i,t){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),l(4),p(5,"translate"),n(),a(6,"button",4),A("click",function(){return t.cancel()}),C(7,"i",5),n()(),C(8,"p-toast"),a(9,"div",6)(10,"p-tabView")(11,"p-tabPanel",7),p(12,"translate"),a(13,"div",8)(14,"div",9)(15,"label",10),l(16),p(17,"translate"),n(),a(18,"input",11),p(19,"translate"),y("ngModelChange",function(_){return b(t.item.nom,_)||(t.item.nom=_),_}),n()(),a(20,"div",9)(21,"label",12),l(22),p(23,"translate"),n(),a(24,"p-dropdown",13),p(25,"translate"),y("ngModelChange",function(_){return b(t.item.local,_)||(t.item.local=_),_}),n()(),a(26,"div",9)(27,"label",14),l(28),p(29,"translate"),n(),a(30,"div",15)(31,"p-dropdown",16),p(32,"translate"),y("ngModelChange",function(_){return b(t.typeCharge,_)||(t.typeCharge=_),_}),n(),a(33,"button",17),p(34,"translate"),A("click",function(){return t.showAddTypeDialog()}),n()()(),a(35,"div",18)(36,"label",19),l(37),p(38,"translate"),n(),a(39,"p-calendar",20),p(40,"translate"),y("ngModelChange",function(_){return b(t.item.dateCreation,_)||(t.item.dateCreation=_),_}),n()(),a(41,"div",9)(42,"label",21),l(43),p(44,"translate"),n(),C(45,"textarea",22),p(46,"translate"),n()()()()(),a(47,"div",23)(48,"p-button",24),p(49,"translate"),A("click",function(){return t.save()}),n(),a(50,"p-button",25),p(51,"translate"),A("click",function(){return t.cancel()}),n()()()(),a(52,"p-dialog",26),p(53,"translate"),y("visibleChange",function(_){return b(t.displayAddTypeDialog,_)||(t.displayAddTypeDialog=_),_}),a(54,"div",27)(55,"div",9)(56,"label",28),l(57),p(58,"translate"),n(),a(59,"input",29),p(60,"translate"),y("ngModelChange",function(_){return b(t.typeCharge.label,_)||(t.typeCharge.label=_),_}),n()(),a(61,"div",9)(62,"label",30),l(63),p(64,"translate"),n(),a(65,"textarea",31),p(66,"translate"),y("ngModelChange",function(_){return b(t.typeCharge.description,_)||(t.typeCharge.description=_),_}),n()()(),E(67,Rl,5,6,"ng-template",32),n()),i&2&&(o(4),h(c(5,42,"compteCharge.tabPan")),o(7),f("header",c(12,44,"compteCharge.tabPan")),o(5),h(c(17,46,"compteCharge.nom")),o(2),f("placeholder",c(19,48,"compteCharge.nom")),x("ngModel",t.item.nom),o(4),h(c(23,50,"Locale")),o(2),f("placeholder",c(25,52,"S\xE9lectionner une locale")),d("options",t.locals),x("ngModel",t.item.local),d("filter",!0)("showClear",!0),o(4),h(c(29,54,"Type Charge")),o(3),f("placeholder",c(32,56,"Type Charge")),d("options",t.typeCharges),x("ngModel",t.typeCharge),d("filter",!0)("showClear",!0),o(2),f("pTooltip",c(34,58,"Cr\xE9er un nouveau type")),o(4),h(c(38,60,"Date de cr\xE9ation")),o(2),f("placeholder",c(40,62,"Date de cr\xE9ation")),f("dateFormat",t.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",t.item.dateCreation),o(4),h(c(44,64,"charge.description")),o(2),f("placeholder",c(46,66,"charge.description")),d("ngModel",t.item.description),o(3),f("label",c(49,68,"validate")),o(2),f("label",c(51,70,"cancel")),o(2),H(V(82,Nl)),f("header",c(53,72,"Cr\xE9er un nouveau type de charge")),x("visible",t.displayAddTypeDialog),d("modal",!0)("draggable",!1)("resizable",!1),o(5),h(c(58,74,"Label")),o(2),f("placeholder",c(60,76,"Entrez le label du type")),x("ngModel",t.typeCharge.label),o(4),h(c(64,78,"Description")),o(2),f("placeholder",c(66,80,"Entrez une description (optionnel)")),x("ngModel",t.typeCharge.description))},dependencies:[we,O,se,U,oe,ye,re,R,q,ce,J,ie,mn,Y,pn,j],encapsulation:2})}}return r})();var Ol=()=>({width:"85vw",maxWidth:"1200px",height:"100vh"}),Ul=()=>["code","label","montant","date","typeChargelabel","localcode","isPaid","description"],Hl=()=>[10,25,50];function zl(r,v){r&1&&(a(0,"div",5),C(1,"i",6),a(2,"span",7),l(3),p(4,"translate"),n()()),r&2&&(o(3),h(c(4,1,"compteCharge.tabPan")))}function Gl(r,v){if(r&1&&(a(0,"div",13),C(1,"p-splitButton",14),p(2,"translate"),n()),r&2){let e=m(2);o(),X("label"," ",c(2,3,"export"),""),d("model",e.transactionExcelPdfButons)}}function Ql(r,v){if(r&1){let e=M();a(0,"div",15)(1,"h5",16),l(2),p(3,"translate"),n(),a(4,"span",17)(5,"p-iconfield",18),C(6,"p-inputicon",19),a(7,"input",20),p(8,"translate"),A("input",function(t){g(e),m();let s=Oe(4);return u(s.filterGlobal(t.target.value,"contains"))}),n()()()()}r&2&&(o(2),h(c(3,2,"charge.header")),o(5),f("placeholder",c(8,4,"searchInput")))}function Kl(r,v){r&1&&(a(0,"tr")(1,"th",21),C(2,"p-tableHeaderCheckbox"),n(),a(3,"th",22)(4,"div",23)(5,"span",24),l(6),p(7,"translate"),n(),C(8,"p-sortIcon",25),n()(),a(9,"th",26)(10,"div",23)(11,"span",24),l(12),p(13,"translate"),n(),C(14,"p-sortIcon",27),n()(),a(15,"th",28)(16,"div",23)(17,"span",24),l(18),p(19,"translate"),n()()(),a(20,"th",29)(21,"div",23)(22,"span",24),l(23),p(24,"translate"),n()()(),a(25,"th",30)(26,"div",23)(27,"span",24),l(28),p(29,"translate"),n()()(),a(30,"th",29)(31,"div",23)(32,"span",24),l(33),p(34,"translate"),n()()(),a(35,"th",29)(36,"div",23)(37,"span",24),l(38),p(39,"translate"),n()()()()),r&2&&(o(6),h(c(7,7,"charge.montant")),o(6),h(c(13,9,"charge.date")),o(6),h(c(19,11,"charge.typeCharge")),o(5),h(c(24,13,"charge.local")),o(5),h(c(29,15,"charge.description")),o(5),h(c(34,17,"Compte Source")),o(5),h(c(39,19,"Compte Destination")))}function Xl(r,v){if(r&1){let e=M();a(0,"button",37),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.edit(t))}),n()}}function Yl(r,v){if(r&1){let e=M();a(0,"button",38),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.view(t))}),n()}}function Jl(r,v){if(r&1){let e=M();a(0,"button",39),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.delete(t))}),n()}}function Zl(r,v){if(r&1){let e=M();a(0,"button",40),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.duplicate(t))}),n()}}function $l(r,v){if(r&1&&(a(0,"tr")(1,"td"),C(2,"p-tableCheckbox",31),n(),a(3,"td"),l(4),n(),a(5,"td"),l(6),p(7,"date"),n(),a(8,"td"),C(9,"p-tag",32),n(),a(10,"td"),l(11),n(),a(12,"td"),l(13),n(),a(14,"td"),l(15),n(),a(16,"td"),l(17),n(),a(18,"td"),E(19,Xl,1,0,"button",33)(20,Yl,1,0,"button",34)(21,Jl,1,0,"button",35)(22,Zl,1,0,"button",36),n()()),r&2){let e=v.$implicit,i=m(2);o(2),d("value",e),o(2),B("",e.montant," MAD"),o(2),h(G(7,14,e.date,"dd/MM/yyyy HH:mm")),o(3),f("severity",e.typeCharge==null?null:e.typeCharge.code),f("value",e.typeCharge==null?null:e.typeCharge.label),d("rounded",!0),o(2),h(e.local==null?null:e.local.label),o(2),h(e.description),o(2),h(e.compteSource==null?null:e.compteSource.code),o(2),h(i.compteCharge==null?null:i.compteCharge.nom),o(2),d("ngIf",i.editActionIsValid),o(),d("ngIf",i.viewActionIsValid),o(),d("ngIf",i.deleteActionIsValid),o(),d("ngIf",i.duplicateActionIsValid)}}function ep(r,v){if(r&1&&(a(0,"tr",41)(1,"td",42),l(2,"Total:"),n(),a(3,"td",43),l(4),n(),C(5,"td",44),n()),r&2){let e=m(2);o(4),h(e.totalCharges)}}function tp(r,v){if(r&1){let e=M();a(0,"p-tabView")(1,"p-toolbar",8),E(2,Gl,3,5,"ng-template",9),n(),a(3,"p-table",10,0),p(5,"translate"),y("selectionChange",function(t){g(e);let s=m();return b(s.selections,t)||(s.selections=t),u(t)}),E(6,Ql,9,6,"ng-template",11)(7,Kl,40,21,"ng-template",2)(8,$l,23,17,"ng-template",12)(9,ep,6,1,"ng-template",4),n()()}if(r&2){let e=m();o(3),f("currentPageReportTemplate",c(5,10,"les \xE9l\xE9ments de {first} \xE0 {last} sur {totalRecords} ")),d("value",e.chargesFilteredByLocal)("columns",e.cols)("rows",8)("paginator",!1)("globalFilterFields",V(12,Ul)),x("selection",e.selections),d("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",V(13,Hl))}}function ip(r,v){if(r&1){let e=M();a(0,"div",45)(1,"button",46),A("click",function(){g(e);let t=m();return u(t.hideViewDialog())}),n()()}}var Un=(()=>{class r{constructor(e,i,t,s,_,D,le,de){this.service=e,this.transactionService=i,this.typeTransactionService=t,this.modePaiementService=s,this.exportService=_,this.localService=D,this.typeChargeService=le,this.chargeService=de,this._submitted=!1,this._errorMessages=new Array,this.cols=[],this.transactionFindByCriteriaShow=!1,this.transactionExportData=[],this.transactionCriteriaData=[],this._transactionFileName=`Charges-${this.compteCharge?.nom}`,this.totalCredits=0,this.totalDebits=0,this.chargesFilteredByLocal=new Array,this.totalCharges=this.chargesFilteredByLocal.reduce((tt,Wi)=>tt+Wi.montant,0),this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.initTransactionExport(),this.loadReferenceDataForTransaction(),this.initCol()}initCol(){this.cols=[{field:"code",header:"Code"},{field:"label",header:"Label"},{field:"montant",header:"Montant"},{field:"date",header:"Date"},{field:"typeCharge?.label",header:"Type charge"},{field:"local?.code",header:"Local"},{field:"isPaid",header:"Is paid"},{field:"description",header:"Description"}]}loadReferenceDataForTransaction(){this.typeTransactionService.findAll().subscribe(e=>this.typeTransactions=e),this.modePaiementService.findAll().subscribe(e=>this.modePaiements=e)}showTransactionSearch(){this.transactionFindByCriteriaShow=!this.transactionFindByCriteriaShow}resettransactionService(){this.transactionService.criteria=new Mt,this.findPaginatedTransactions()}findPaginatedTransactions(){this.transactionService.findPaginatedByCriteria(this.transactionService.criteria).subscribe(e=>{this.transactions=e.list.filter(i=>i?.compteDestination?.code=="CHARGE"),this.calculateTotals()},e=>console.log(e))}initTransactionExport(){this.transactionExcelPdfButons=[{label:"CSV",icon:"pi pi-file",command:()=>{this.prepareTransactionColumnExport(),this.exportService.exporterCSV(this.transactionCriteriaData,this.transactionExportData,this._transactionFileName)}},{label:"XLS",icon:"pi pi-file-excel",command:()=>{this.prepareTransactionColumnExport(),this.exportService.exporterExcel(this.transactionCriteriaData,this.transactionExportData,this._transactionFileName)}},{label:"PDF",icon:"pi pi-file-pdf",command:()=>{this.prepareTransactionColumnExport(),this.exportService.exporterPdf(this.transactionCriteriaData,this.transactionExportData,this._transactionFileName)}}]}prepareTransactionColumnExport(){this.transactionExportData=this.chargesFilteredByLocal.map(e=>({Date:this.datePipe.transform(e.date,this.dateFormatColumn)||"",Montant:e.montant,Description:e.description||"","Type de Charge":e.typeCharge?.label||"",Local:e.local?.label||"","Mode paiement":e.modePaiement?.label||"","Compte source":e.compteSource?.code||"","Compte destination":this.compteCharge?.nom||""})),this.transactionCriteriaData.push({Date:"TOTAL",Montant:this.totalCharges,Description:"","Type de Charge":"",Local:"","Mode paiement":"","Compte source":"","Compte destination":""}),this.transactionCriteriaData=[{"Date Min":this.transactionService.criteria.dateFrom?this.datePipe.transform(this.transactionService.criteria.dateFrom,this.dateFormatColumn):I.emptyForExport,"Date Max":this.transactionService.criteria.dateTo?this.datePipe.transform(this.transactionService.criteria.dateTo,this.dateFormatColumn):I.emptyForExport,"Montant Min":this.transactionService.criteria.montantMin||I.emptyForExport,"Montant Max":this.transactionService.criteria.montantMax||I.emptyForExport,Description:this.transactionService.criteria.description||I.emptyForExport,"Type transaction":this.transactionService.criteria.typeTransaction?.label||I.emptyForExport,"Mode paiement":this.transactionService.criteria.modePaiement?.label||I.emptyForExport}]}calculateTotals(){this.totalCredits=0,this.totalDebits=0,this.transactions&&this.transactions.length>0&&this.transactions.forEach(e=>{e.typePaiement?.label==="Credit"?(this.totalCredits+=Number(e.montant||0),console.log(e.montant)):e.typePaiement?.label==="Debit"&&(this.totalDebits+=Number(e.montant||0))})}get local(){return this.localService.item}set local(e){this.localService.item=e}get transactions(){return this.transactionService.items}set transactions(e){this.transactionService.items=e}get locals(){return this.localService.items}set locals(e){this.localService.items=e}get typeCharge(){return this.typeChargeService.item}set typeCharge(e){this.typeChargeService.item=e}get typeCharges(){return this.typeChargeService.items}set typeCharges(e){this.typeChargeService.items=e}hideViewDialog(){this.viewDialog=!1}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get viewDialog(){return this.service.viewDialog}set viewDialog(e){this.service.viewDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatView}get dateFormatColumn(){return I.dateFormatList}get charges(){return this.chargeService.items}get compteCharge(){return this.service.item}set compteCharge(e){this.service.item=e}set charges(e){this.chargeService.items=e}static{this.\u0275fac=function(i){return new(i||r)(S(xt),S(me),S(ge),S(ti),S(Ie),S(ke),S(Ze),S(Je))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-charge-view-admin"]],inputs:{totalCredits:"totalCredits",totalDebits:"totalDebits",chargesFilteredByLocal:"chargesFilteredByLocal",totalCharges:"totalCharges"},standalone:!1,decls:4,vars:5,consts:[["dt",""],["styleClass","p-fluid compte-locataire-view-dialog",3,"visibleChange","visible","modal"],["pTemplate","header"],["pTemplate","content"],["pTemplate","footer"],[1,"flex","align-items-center"],[1,"pi","pi-wallet","text-primary","text-xl","mr-2"],[1,"font-semibold","text-lg"],["styleClass","mb-4"],["pTemplate","right"],["dataKey","id","styleClass","p-datatable-customers","selectionMode","multiple",3,"selectionChange","value","columns","rows","paginator","globalFilterFields","selection","rowHover","currentPageReportTemplate","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","body"],[1,"flex"],["icon","pi pi-download","styleClass","p-button-secondary",3,"label","model"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","p-2","gap-4"],[1,"text-center","md:text-left"],[1,"relative","w-full","md:w-auto"],["iconPosition","left",1,"w-full","md:w-auto"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full","md:w-72","border","border-gray-300","rounded-md","p-2","focus:ring","focus:ring-blue-300",3,"input","placeholder"],[2,"width","3rem"],["pSortableColumn","montant"],[1,"p-d-flex","p-jc-between","p-ai-center"],[1,"mr-2"],["field","montant"],["pSortableColumn","date"],["field","date"],["pSortableColumn","typeCharges"],["pSortableColumn","local"],["pSortableColumn","description"],[3,"value"],[3,"severity","value","rounded"],["pButton","","pRipple","","icon","pi pi-pencil","class","p-button-rounded p-button-info mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-list","class","p-button-rounded p-button-secondary mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","class","p-button-rounded p-button-danger mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-copy","class","p-button-rounded p-button-raised p-button-warning mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-info","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-list",1,"p-button-rounded","p-button-secondary","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-copy",1,"p-button-rounded","p-button-raised","p-button-warning","mr-2",3,"click"],[1,"text-center","bg-blue-700-400"],["colspan","1",1,"text-left","font-bold"],[1,"text-green-500","font-bold"],["colspan","5"],[1,"flex","justify-content-end"],["pButton","","pRipple","","type","button","icon","pi pi-times","label","Fermer",1,"p-button-outlined",3,"click"]],template:function(i,t){i&1&&(a(0,"p-dialog",1),y("visibleChange",function(_){return b(t.viewDialog,_)||(t.viewDialog=_),_}),E(1,zl,5,3,"ng-template",2)(2,tp,10,14,"ng-template",3)(3,ip,2,0,"ng-template",4),n()),i&2&&(H(V(4,Ol)),x("visible",t.viewDialog),d("modal",!0))},dependencies:[he,O,ze,ne,Ge,nt,Qe,Ke,se,U,oe,Se,J,gt,Ue,He,be,T,j],encapsulation:2})}}return r})();var ap=()=>({width:"70vw"});function rp(r,v){if(r&1){let e=M();a(0,"p-tabView")(1,"p-tabPanel",3),p(2,"translate"),a(3,"div",4)(4,"div",5)(5,"label",6),l(6),p(7,"translate"),n(),a(8,"input",7),p(9,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.nom,t)||(s.item.nom=t),u(t)}),n()()()()()}if(r&2){let e=m();o(),f("header",c(2,4,"compteCharge.tabPan")),o(5),h(c(7,6,"compteCharge.nom")),o(2),f("placeholder",c(9,8,"compteCharge.nom")),x("ngModel",e.item.nom)}}function op(r,v){if(r&1){let e=M();a(0,"div",8)(1,"button",9),p(2,"translate"),A("click",function(){g(e);let t=m();return u(t.edit())}),C(3,"i",10),l(4),p(5,"translate"),n(),a(6,"button",11),A("click",function(){g(e);let t=m();return u(t.hideEditDialog())}),C(7,"i",12),l(8),p(9,"translate"),n()()}r&2&&(o(),f("label",c(2,3,"validate")),o(3),B(" ",c(5,5,"validate")," "),o(4),B(" ",c(9,7,"cancel")," "))}var Hn=(()=>{class r{constructor(e,i,t,s,_){this.service=e,this.localService=i,this.typeChargeService=t,this.chargeService=s,this.platformId=_,this._submitted=!1,this._errorMessages=new Array,this._activeTab=0,this.chargesIndex=-1,this._chargesElement=new qe,this._validCompteChargeCode=!0,this._validChargesCode=!0,this._validChargesLabel=!0,this.chargesGroupedByLocal={},this.filteredItems=new Array,this.chargesFilteredByLocal=new Array,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.chargesElement.typeCharge=new Ye,this.typeChargeService.findAll().subscribe(e=>this.typeCharges=e),this.chargesElement.local=new ei,this.localService.findAll().subscribe(e=>this.locals=e)}prepareEdit(){}edit(){this.submitted=!0,this.prepareEdit(),this.validateForm(),this.errorMessages.length===0?this.editWithShowOption(!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs sur le formulaire"})}findPaginatedByCriteria(){this.service.findPaginatedByCriteria(this.criteria).subscribe(e=>{var i=e.list.filter(t=>t.code!=="CHARGE");for(let t of i){let s=t.local?.id;s&&(this.chargesGroupedByLocal[s]?this.chargesGroupedByLocal[s].solde+=t.solde||0:this.chargesGroupedByLocal[s]=li(K({},t),{solde:t.solde||0,nom:`compte charge ${t.local?.label}`}),this.items=Object.values(this.chargesGroupedByLocal))}})}editWithShowOption(e){this.service.edit().subscribe(i=>{this.findPaginatedByCriteria(),this.editDialog=!1,this.submitted=!1,this.item=new wt,this.messageService.add({severity:"success",summary:"",detail:"Compte charge a \xE9t\xE9 modifi\xE9 avec succ\xE8s"})},i=>{console.log(i)})}hideEditDialog(){this.item=new wt,this.editDialog=!1,this.setValidation(!0)}validateCharges(){this.errorMessages=new Array,this.validateChargesCode(),this.validateChargesLabel()}setValidation(e){this.validCompteChargeCode=e,this.validChargesCode=e,this.validChargesLabel=e}addCharges(){this.item.charges==null&&(this.item.charges=new Array),this.validateCharges(),this.errorMessages.length===0?(this.chargesIndex==-1?this.item.charges.push(K({},this.chargesElement)):this.item.charges[this.chargesIndex]=this.chargesElement,this.chargesElement=new qe,this.chargesIndex=-1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs suivant : "+this.errorMessages})}deleteCharges(e,i){this.item.charges.splice(i,1)}editCharges(e,i){this.chargesElement=K({},e),this.chargesIndex=i,this.activeTab=0}validateForm(){this.errorMessages=new Array,this.validateCompteChargeCode()}validateCompteChargeCode(){this.stringUtilService.isEmpty(this.item.code)?(this.errorMessages.push("Code non valide"),this.validCompteChargeCode=!1):this.validCompteChargeCode=!0}validateChargesCode(){this.chargesElement.code==null?(this.errorMessages.push("Code de la charge est  invalide"),this.validChargesCode=!1):this.validChargesCode=!0}validateChargesLabel(){this.chargesElement.label==null?(this.errorMessages.push("Label de la charge est  invalide"),this.validChargesLabel=!1):this.validChargesLabel=!0}openCreateTypeCharge(e){return P(this,null,function*(){(yield this.roleService.isPermitted("TypeCharge","edit"))?(this.typeCharge=new Ye,this.createTypeChargeDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}get local(){return this.localService.item}set local(e){this.localService.item=e}get locals(){return this.localService.items}set locals(e){this.localService.items=e}get createLocalDialog(){return this.localService.createDialog}set createLocalDialog(e){this.localService.createDialog=e}get typeCharge(){return this.typeChargeService.item}set typeCharge(e){this.typeChargeService.item=e}get typeCharges(){return this.typeChargeService.items}set typeCharges(e){this.typeChargeService.items=e}get createTypeChargeDialog(){return this.typeChargeService.createDialog}set createTypeChargeDialog(e){this.typeChargeService.createDialog=e}get chargesElement(){return this._chargesElement==null&&(this._chargesElement=new qe),this._chargesElement}set chargesElement(e){this._chargesElement=e}get validCompteChargeCode(){return this._validCompteChargeCode}set validCompteChargeCode(e){this._validCompteChargeCode=e}get validChargesCode(){return this._validChargesCode}set validChargesCode(e){this._validChargesCode=e}get validChargesLabel(){return this._validChargesLabel}set validChargesLabel(e){this._validChargesLabel=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get editDialog(){return this.service.editDialog}set editDialog(e){this.service.editDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatCreate}get dateFormatColumn(){return I.dateFormatCreate}get submitted(){return this._submitted}set submitted(e){this._submitted=e}get errorMessages(){return this._errorMessages==null&&(this._errorMessages=new Array),this._errorMessages}set errorMessages(e){this._errorMessages=e}get validate(){return this.service.validate}set validate(e){this.service.validate=e}get activeTab(){return this._activeTab}set activeTab(e){this._activeTab=e}static{this.\u0275fac=function(i){return new(i||r)(S(xt),S(ke),S(Ze),S(Je),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-charge-edit-admin"]],standalone:!1,decls:4,vars:11,consts:[["closable","false","styleClass","p-fluid",3,"visibleChange","visible","header","modal","maximizable","draggable","resizable"],["pTemplate","content"],["pTemplate","footer"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","3",1,"text-sm","font-semibold"],["type","text","pInputText","","id","3",3,"ngModelChange","placeholder","ngModel"],[1,"flex","justify-end","space-x-3","p-4"],[1,"bg-blue-500","text-white","px-4","py-2","rounded-md","hover:bg-primary",3,"click","label"],[1,"pi","pi-check"],[1,"border","border-gray-400","text-gray-600","hover:bg-gray-200","px-4","py-2","rounded-md",3,"click"],[1,"pi","pi-times"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),p(1,"translate"),y("visibleChange",function(_){return b(t.editDialog,_)||(t.editDialog=_),_}),E(2,rp,10,10,"ng-template",1)(3,op,10,9,"ng-template",2),n()),i&2&&(H(V(10,ap)),f("header",c(1,8,"compteCharge.tabPan")),x("visible",t.editDialog),d("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!1))},dependencies:[O,se,U,re,R,q,J,ie,j],encapsulation:2})}}return r})();var zn=()=>["code","label","nom","solde"],Gn=()=>[10,25,50],lp=()=>({width:"85vw",maxWidth:"1200px",height:"95vh"}),pp=()=>({width:"450px"});function cp(r,v){if(r&1){let e=M();a(0,"button",20),p(1,"translate"),A("click",function(){g(e);let t=m(2);return u(t.showSearch())}),n()}if(r&2){let e=m(2);X("label"," ",c(1,4,"search"),""),X("icon","pi pi-",e.findByCriteriaShow?"angle-down":"angle-right","")}}function mp(r,v){if(r&1&&(a(0,"div",21),C(1,"p-splitButton",22),p(2,"translate"),n()),r&2){let e=m(2);o(),X("label"," ",c(2,3,"export"),""),d("model",e.excelPdfButons)}}function dp(r,v){if(r&1){let e=M();a(0,"div",23)(1,"div",24)(2,"label",25),l(3),p(4,"translate"),n(),a(5,"input",26),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.codeLike,t)||(s.criteria.codeLike=t),u(t)}),n()(),a(6,"div",24)(7,"label",27),l(8),p(9,"translate"),n(),a(10,"input",28),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.labelLike,t)||(s.criteria.labelLike=t),u(t)}),n()(),a(11,"div",24)(12,"label",29),l(13),p(14,"translate"),n(),a(15,"input",30),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.nomLike,t)||(s.criteria.nomLike=t),u(t)}),n()(),a(16,"div",24)(17,"label",31),l(18),p(19,"translate"),n(),a(20,"p-inputNumber",32),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.soldeMin,t)||(s.criteria.soldeMin=t),u(t)}),n()(),a(21,"div",24)(22,"label",33),l(23),p(24,"translate"),n(),a(25,"p-inputNumber",34),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.soldeMax,t)||(s.criteria.soldeMax=t),u(t)}),n()(),a(26,"div",35)(27,"button",36),p(28,"translate"),A("click",function(){g(e);let t=m(2);return u(t.findPaginatedByCriteria())}),C(29,"i",37),l(30),p(31,"translate"),n()()()}if(r&2){let e=m(2);o(3),h(c(4,12,"compteCharge.code")),o(2),x("ngModel",e.criteria.codeLike),o(3),h(c(9,14,"compteCharge.label")),o(2),x("ngModel",e.criteria.labelLike),o(3),h(c(14,16,"compteCharge.nom")),o(2),x("ngModel",e.criteria.nomLike),o(3),h(c(19,18,"compteCharge.soldeMin")),o(2),x("ngModel",e.criteria.soldeMin),o(3),h(c(24,20,"compteCharge.soldeMax")),o(2),x("ngModel",e.criteria.soldeMax),o(2),f("label",c(28,22,"validate")),o(3),B(" ",c(31,24,"validate")," ")}}function hp(r,v){if(r&1){let e=M();a(0,"div",38)(1,"h5",39),l(2),p(3,"translate"),n(),a(4,"span",40)(5,"p-iconfield",41),C(6,"p-inputicon",42),a(7,"input",43),p(8,"translate"),A("input",function(t){g(e),m();let s=Oe(9);return u(s.filterGlobal(t.target.value,"contains"))}),n()()()()}r&2&&(o(2),h(c(3,2,"compteCharge.header")),o(5),f("placeholder",c(8,4,"searchInput")))}function gp(r,v){r&1&&(a(0,"tr")(1,"th",44),C(2,"p-tableHeaderCheckbox"),n(),a(3,"th",45)(4,"div",46)(5,"span",47),l(6),p(7,"translate"),n()()(),a(8,"th",48)(9,"div",46)(10,"span",47),l(11),p(12,"translate"),n()()(),a(13,"th",49)(14,"div",46)(15,"span",47),l(16),p(17,"translate"),n(),C(18,"p-sortIcon",50),n()(),a(19,"th"),l(20,"Actions"),n()()),r&2&&(o(6),h(c(7,3,"compteCharge.nom")),o(5),h(c(12,5,"charge.local")),o(5),h(c(17,7,"compteCharge.solde")))}function up(r,v){if(r&1){let e=M();a(0,"button",54),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.view(t))}),n()}}function _p(r,v){if(r&1){let e=M();a(0,"button",55),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.delete(t))}),n()}}function vp(r,v){if(r&1&&(a(0,"tr")(1,"td"),C(2,"p-tableCheckbox",51),n(),a(3,"td"),l(4),n(),a(5,"td"),l(6),n(),a(7,"td"),l(8),n(),a(9,"td"),E(10,up,1,0,"button",52)(11,_p,1,0,"button",53),n()()),r&2){let e=v.$implicit,i=m(2);o(2),d("value",e),o(2),h(e.nom),o(2),h(e.local==null?null:e.local.label),o(2),h(e.solde),o(2),d("ngIf",i.viewActionIsValid),o(),d("ngIf",i.deleteActionIsValid)}}function Cp(r,v){if(r&1){let e=M();a(0,"p-paginator",56),A("onPageChange",function(t){g(e);let s=m(2);return u(s.onPage(t))}),n(),a(1,"div",57),l(2),n()}if(r&2){let e=m(2);d("rows",10)("totalRecords",e.totalRecords),o(2),$e(" En totale il ",(e.charges&&e.totalRecords==1,"y a")," ",e.items?e.totalRecords:0," ",e.items?e.totalRecords==1?"compte charge":"compte charges":0,". ")}}function fp(r,v){r&1&&(a(0,"div",58),C(1,"i",59),a(2,"span",60),l(3),p(4,"translate"),n()()),r&2&&(o(3),h(c(4,1,"compteCharge.tabPan")))}function xp(r,v){if(r&1&&(a(0,"div",21),C(1,"p-splitButton",22),p(2,"translate"),n()),r&2){let e=m(3);o(),X("label"," ",c(2,3,"export"),""),d("model",e.excelPdfButons)}}function bp(r,v){if(r&1){let e=M();a(0,"div",38)(1,"h5",39),l(2),p(3,"translate"),n(),a(4,"span",40)(5,"p-iconfield",41),C(6,"p-inputicon",42),a(7,"input",43),p(8,"translate"),A("input",function(t){g(e),m();let s=Oe(4);return u(s.filterGlobal(t.target.value,"contains"))}),n()()()()}r&2&&(o(2),h(c(3,2,"compteCharge.header")),o(5),f("placeholder",c(8,4,"searchInput")))}function yp(r,v){r&1&&(a(0,"tr")(1,"th",44),C(2,"p-tableHeaderCheckbox"),n(),a(3,"th",45)(4,"div",46)(5,"span",47),l(6),p(7,"translate"),n()()(),a(8,"th",48)(9,"div",46)(10,"span",47),l(11),p(12,"translate"),n()()(),a(13,"th",49)(14,"div",46)(15,"span",47),l(16),p(17,"translate"),n(),C(18,"p-sortIcon",50),n()(),a(19,"th"),l(20,"Voire Les Charges"),n()()),r&2&&(o(6),h(c(7,3,"compteCharge.nom")),o(5),h(c(12,5,"charge.local")),o(5),h(c(17,7,"compteCharge.solde")))}function wp(r,v){if(r&1){let e=M();a(0,"button",54),A("click",function(){g(e);let t=m().$implicit,s=m(3);return u(s.viewCharges(t))}),n()}}function Sp(r,v){if(r&1){let e=M();a(0,"button",55),A("click",function(){g(e);let t=m().$implicit,s=m(3);return u(s.deleteSousCpomteCharges(t))}),n()}}function Ip(r,v){if(r&1&&(a(0,"tr")(1,"td"),C(2,"p-tableCheckbox",51),n(),a(3,"td"),l(4),n(),a(5,"td"),l(6),n(),a(7,"td"),l(8),n(),a(9,"td"),E(10,wp,1,0,"button",52)(11,Sp,1,0,"button",53),n()()),r&2){let e=v.$implicit,i=m(3);o(2),d("value",e),o(2),h(e.code),o(2),h(e.compteCharge==null||e.compteCharge.local==null?null:e.compteCharge.local.label),o(2),h(e.solde),o(2),d("ngIf",i.viewActionIsValid),o(),d("ngIf",i.deleteActionIsValid)}}function Ap(r,v){if(r&1){let e=M();a(0,"p-paginator",56),A("onPageChange",function(t){g(e);let s=m(3);return u(s.onPage(t))}),n(),a(1,"div",57),l(2),n()}if(r&2){let e=m(3);d("rows",10)("totalRecords",e.totalRecords),o(2),$e(" En totale il ",(e.charges&&e.totalRecords==1,"y a")," ",e.items?e.totalRecords:0," ",e.items?e.totalRecords==1?"compte charge":"compte charges":0,". ")}}function Ep(r,v){if(r&1){let e=M();a(0,"p-tabView")(1,"p-toolbar",6),E(2,xp,3,5,"ng-template",8),n(),a(3,"p-table",10,0),p(5,"translate"),y("selectionChange",function(t){g(e);let s=m(2);return b(s.selections,t)||(s.selections=t),u(t)}),E(6,bp,9,6,"ng-template",11)(7,yp,21,9,"ng-template",12)(8,Ip,12,6,"ng-template",13)(9,Ap,3,5,"ng-template",14),n()()}if(r&2){let e=m(2);o(3),f("currentPageReportTemplate",c(5,10,"les \xE9l\xE9ments de {first} \xE0 {last} sur {totalRecords} ")),d("value",e.filteredItems)("columns",e.cols)("rows",8)("paginator",!1)("globalFilterFields",V(12,zn)),x("selection",e.selections),d("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",V(13,Gn))}}function Mp(r,v){if(r&1){let e=M();a(0,"div",61)(1,"button",62),A("click",function(){g(e);let t=m(2);return u(t.hideViewDialog())}),n()()}}function Tp(r,v){r&1&&C(0,"app-compte-charge-create-admin")}function Pp(r,v){r&1&&C(0,"app-compte-charge-edit-admin")}function Dp(r,v){if(r&1&&C(0,"app-compte-charge-view-admin",63),r&2){let e=m(2);d("totalCharges",e.totalCharges)("chargesFilteredByLocal",e.chargesFilteredByLocal)}}function Vp(r,v){if(r&1){let e=M();a(0,"div",3)(1,"div",4),C(2,"p-toast"),a(3,"div",5)(4,"p-toolbar",6),E(5,cp,2,6,"ng-template",7)(6,mp,3,5,"ng-template",8),n(),E(7,dp,32,26,"div",9),a(8,"p-table",10,0),p(10,"translate"),y("selectionChange",function(t){g(e);let s=m();return b(s.selections,t)||(s.selections=t),u(t)}),E(11,hp,9,6,"ng-template",11)(12,gp,21,9,"ng-template",12)(13,vp,12,6,"ng-template",13)(14,Cp,3,5,"ng-template",14),n()(),a(15,"p-dialog",15),y("visibleChange",function(t){g(e);let s=m();return b(s.viewSousComptes,t)||(s.viewSousComptes=t),u(t)}),E(16,fp,5,3,"ng-template",12)(17,Ep,10,14,"ng-template",16)(18,Mp,2,0,"ng-template",17),n(),E(19,Tp,1,0,"app-compte-charge-create-admin",18)(20,Pp,1,0,"app-compte-charge-edit-admin",18)(21,Dp,1,2,"app-compte-charge-view-admin",19),C(22,"p-confirmDialog"),n()()}if(r&2){let e=m();o(7),d("ngIf",e.findByCriteriaShow),o(),f("currentPageReportTemplate",c(10,20,"les \xE9l\xE9ments de {first} \xE0 {last} sur {totalRecords} ")),d("value",e.items)("columns",e.cols)("rows",8)("paginator",!1)("globalFilterFields",V(22,zn)),x("selection",e.selections),d("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",V(23,Gn)),o(7),H(V(24,lp)),x("visible",e.viewSousComptes),d("modal",!0),o(4),d("ngIf",e.createDialog&&e.createActionIsValid),o(),d("ngIf",e.editDialog&&e.editActionIsValid),o(),d("ngIf",e.viewDialog&&e.viewActionIsValid),o(),H(V(25,pp))}}function Bp(r,v){r&1&&(a(0,"p-card",64)(1,"p",65),l(2," You don't have permission to access ! "),n()())}var Qn=(()=>{class r{constructor(e,i,t,s,_,D,le,de){this.service=e,this.chargeService=i,this.compteService=t,this.localService=s,this.typeChargeService=_,this.modePaiementService=D,this.transactionService=le,this.typeTransactionService=de,this.findByCriteriaShow=!1,this.cols=[],this.exportData=[],this.criteriaData=[],this._totalRecords=0,this.enableSecurity=!1,this.chargesGroupedByLocal={},this.filteredItems=new Array,this.chargesFilteredByLocal=new Array,this.totalCredits=0,this.totalDebits=0,this.viewSousComptes=!1,this.fileName=this.viewSousComptes?`Sous-Comptes-Charge-${this.item.local.label}`:"Compte-Charge",this.totalCharges=0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.authService=w.injector.get(ot),this.exportService=w.injector.get(Ie)}ngOnInit(){this.findPaginatedByCriteria(),this.loadCharges(),this.initExport(),this.initCol()}loadCharges(){return P(this,null,function*(){this.chargeService.findAll().subscribe(e=>this.charges=e,e=>console.log(e))})}onExcelFileSelected(e){let i=e.target;i.files&&i.files.length>0&&(this.excelFile=i.files[0])}importExcel(){this.excelFile&&this.service.importExcel(this.excelFile).subscribe(e=>{this.items=e,this.messageService.add({severity:"success",summary:"Success",detail:"File uploaded successfully!",life:3e3})},e=>{this.messageService.add({severity:"error",summary:"Error",detail:"File uploaded with Error!",life:3e3})})}findPaginatedByCriteria(){this.compteService.findAllByCompteChargeNotNull().subscribe(e=>{this.comptes=e;for(let i of e){let t=i.compteCharge?.local?.id;t&&(this.chargesGroupedByLocal[t]?this.chargesGroupedByLocal[t].solde+=i.solde||0:this.chargesGroupedByLocal[t]=li(K({},i),{solde:i.solde||0,local:i.compteCharge?.local,nom:`compte charge ${i.compteCharge?.local?.label}`}),this.items=Object.values(this.chargesGroupedByLocal))}this.totalRecords=this.items.length,this.selections=new Array})}onPage(e){this.criteria.page=e.page,this.criteria.maxResults=e.rows,this.findPaginatedByCriteria()}view(e){return P(this,null,function*(){this.filteredItems=this.comptes.filter(i=>i.compteCharge.local?.code===e.local?.code),this.totalRecords=this.filteredItems.length,this.selections=new Array,this.viewSousComptes=!0})}deleteMultiple(){return P(this,null,function*(){this.confirmationService.confirm({message:"Voulez-vous supprimer ces \xE9l\xE9ments ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Ok"},accept:()=>{this.service.deleteMultiple().subscribe(()=>{for(let e of this.selections){let i=this.items.findIndex(t=>t.id===e.id);this.items.splice(i,1)}this.selections=new Array,this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Les \xE9l\xE9ments s\xE9lectionn\xE9s ont \xE9t\xE9 supprim\xE9s",life:3e3})},e=>console.log(e))}})})}isSelectionDisabled(){return this.selections==null||this.selections.length==0}delete(e){return P(this,null,function*(){this.filteredItems=this.comptes.filter(i=>i.compteCharge.local?.code===e.local?.code),this.filteredItems.map(i=>{this.compteService.delete(i).subscribe(t=>{t>0&&(this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Element Supprim\xE9",life:3e3}),this.items=[])},t=>console.log(t))})})}duplicate(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.initDuplicate(i),this.item.id=null,this.createDialog=!0})})}initExport(){this.excelPdfButons=[{label:"CSV",icon:"pi pi-file",command:()=>{this.viewSousComptes?this.prepareColumnExportDetails():this.prepareColumnExport(),this.exportService.exporterCSV(this.criteriaData,this.exportData,this.fileName)}},{label:"XLS",icon:"pi pi-file-excel",command:()=>{this.viewSousComptes?this.prepareColumnExportDetails():this.prepareColumnExport(),this.exportService.exporterExcel(this.criteriaData,this.exportData,this.fileName)}},{label:"PDF",icon:"pi pi-file-pdf",command:()=>{this.viewSousComptes?this.prepareColumnExportDetails():this.prepareColumnExport(),this.exportService.exporterPdf(this.criteriaData,this.exportData,this.fileName)}}]}exportPdf(e){this.service.exportPdf(e).subscribe(i=>{let t=new Blob([i],{type:"application/pdf"}),s=window.URL.createObjectURL(t),_=document.createElement("a");_.href=s,_.download=this.pdfName,_.setAttribute("target","_blank"),_.click(),window.URL.revokeObjectURL(s)},i=>{console.error(i)})}showSearch(){this.findByCriteriaShow=!this.findByCriteriaShow}update(){this.service.edit().subscribe(e=>{let i=this.items.findIndex(t=>t.id===this.item.id);this.items[i]=e,this.editDialog=!1},e=>{console.log(e)})}save(){this.service.save().subscribe(e=>{e!=null?(this.findPaginatedByCriteria(),this.createDialog=!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Element existant"})},e=>{console.log(e)})}initCol(){this.cols=[{field:"nom",header:"Nom"},{field:"local",header:"Local"},{field:"solde",header:"Solde"}]}initDuplicate(e){e.charges!=null&&e.charges.forEach(i=>{i.compteCharge=null,i.id=null})}prepareColumnExportDetails(){this.fileName=this.viewSousComptes?`Sous-Comptes-Charge-${this.filteredItems[0].compteCharge?.local?.label}`:"Compte-Charge",this.exportData=this.filteredItems.map(e=>({Nom:e.compteCharge?.nom,Local:e.compteCharge?.local?.label,Solde:e.solde})),this.criteriaData=[{Nom:this.criteria.nom?this.criteria.nom:I.emptyForExport,"Solde Min":this.criteria.soldeMin?this.criteria.soldeMin:I.emptyForExport,"Solde Max":this.criteria.soldeMax?this.criteria.soldeMax:I.emptyForExport}]}prepareColumnExport(){this.exportData=this.items.map(e=>({Nom:e.nom,Local:e.local?.label,Solde:e.solde})),this.criteriaData=[{Nom:this.criteria.nom?this.criteria.nom:I.emptyForExport,"Solde Min":this.criteria.soldeMin?this.criteria.soldeMin:I.emptyForExport,"Solde Max":this.criteria.soldeMax?this.criteria.soldeMax:I.emptyForExport}]}get comptes(){return this.compteService.items}set comptes(e){this.compteService.items=e}get items(){return this.service.items}set items(e){this.service.items=e}get charges(){return this.chargeService.items}set charges(e){this.chargeService.items=e}get selections(){return this.service.selections}set selections(e){this.service.selections=e}get item(){return this.chargeService.item}set item(e){this.chargeService.item=e}get createDialog(){return this.service.createDialog}set createDialog(e){this.service.createDialog=e}get editDialog(){return this.service.editDialog}set editDialog(e){this.service.editDialog=e}get viewDialog(){return this.service.viewDialog}set viewDialog(e){this.service.viewDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatList}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e}get pdfName(){return this._pdfName}set pdfName(e){this._pdfName=e}get createActionIsValid(){return this.service.createActionIsValid}set createActionIsValid(e){this.service.createActionIsValid=e}get editActionIsValid(){return this.service.editActionIsValid}set editActionIsValid(e){this.service.editActionIsValid=e}get listActionIsValid(){return this.service.listActionIsValid}set listActionIsValid(e){this.service.listActionIsValid=e}get deleteActionIsValid(){return this.service.deleteActionIsValid}set deleteActionIsValid(e){this.service.deleteActionIsValid=e}get viewActionIsValid(){return this.service.viewActionIsValid}set viewActionIsValid(e){this.service.viewActionIsValid=e}get duplicateActionIsValid(){return this.service.duplicateActionIsValid}set duplicateActionIsValid(e){this.service.duplicateActionIsValid=e}get createAction(){return this.service.createAction}set createAction(e){this.service.createAction=e}get listAction(){return this.service.listAction}set listAction(e){this.service.listAction=e}get editAction(){return this.service.editAction}set editAction(e){this.service.editAction=e}get deleteAction(){return this.service.deleteAction}set deleteAction(e){this.service.deleteAction=e}get viewAction(){return this.service.viewAction}set viewAction(e){this.service.viewAction=e}get duplicateAction(){return this.service.duplicateAction}set duplicateAction(e){this.service.duplicateAction=e}get entityName(){return this.service.entityName}set entityName(e){this.service.entityName=e}get compteCharge(){return this.service.item}set compteCharge(e){this.service.item=e}viewCharges(e){this.chargesFilteredByLocal=this.charges.filter(i=>i.compteCharge?.id===e.compteCharge?.id),this.totalCharges=this.chargesFilteredByLocal.reduce((i,t)=>i+t.montant,0),this.compteCharge=e.compteCharge,this.viewDialog=!0}deleteSousCpomteCharges(e){this.confirmationService.confirm({message:"Voulez-vous supprimer cet \xE9l\xE9ment ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Ok"},accept:()=>{this.compteService.delete(e).subscribe(i=>{i>0&&(this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Element Supprim\xE9",life:3e3}),this.findPaginatedByCriteria(),this.viewSousComptes=!1)},i=>console.log(i))}})}edit(e){this.service.item=e,this.editDialog=!0}hideViewDialog(){this.viewSousComptes=!1,this.viewDialog=!1,this.compteCharge=new wt}static{this.\u0275fac=function(i){return new(i||r)(S(xt),S(Je),S(Q),S(ke),S(Ze),S(ve),S(me),S(ge))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-charge-list-admin"]],standalone:!1,decls:2,vars:2,consts:[["dt",""],["class","grid",4,"ngIf"],["header","Permission not allowed",4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 border border-surface rounded-lg",4,"ngIf"],["dataKey","id","styleClass","p-datatable-customers","selectionMode","multiple",3,"selectionChange","value","columns","rows","paginator","globalFilterFields","selection","rowHover","currentPageReportTemplate","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["closable","false","styleClass","p-fluid compte-locataire-view-dialog",3,"visibleChange","visible","modal"],["pTemplate","content"],["pTemplate","footer"],[4,"ngIf"],[3,"totalCharges","chargesFilteredByLocal",4,"ngIf"],["pButton","","pRipple","",1,"p-button-secondary","mr-2","mb-2",3,"click","label","icon"],[1,"flex"],["icon","pi pi-download","styleClass","p-button-secondary",3,"label","model"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","p-4","border","border-surface","rounded-lg"],[1,"flex","flex-col","gap-2"],["for","1",1,"text-sm","font-semibold"],["pInputText","","id","1","type","text",3,"ngModelChange","ngModel"],["for","2",1,"text-sm","font-semibold"],["pInputText","","id","2","type","text",3,"ngModelChange","ngModel"],["for","3",1,"text-sm","font-semibold"],["pInputText","","id","3","type","text",3,"ngModelChange","ngModel"],["for","5-1",1,"text-sm","font-semibold"],["mode","decimal","id","5-1",3,"ngModelChange","ngModel"],["for","5-2",1,"text-sm","font-semibold"],["mode","decimal","id","5-2",3,"ngModelChange","ngModel"],[1,"col-span-full","flex","justify-end","mt-4"],["pButton","","pRipple","",1,"px-4","py-2","rounded-md",3,"click","label"],[1,"pi","pi-sort-amount-down"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","p-2","gap-4"],[1,"text-center","md:text-left"],[1,"relative","w-full","md:w-auto"],["iconPosition","left",1,"w-full","md:w-auto"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full","md:w-72","border","border-gray-300","rounded-md","p-2","focus:ring","focus:ring-blue-300",3,"input","placeholder"],[2,"width","3rem"],["pSortableColumn","nom"],[1,"p-d-flex","p-jc-between","p-ai-center"],[1,"mr-2"],["pSortableColumn","local"],["pSortableColumn","solde"],["field","solde"],[3,"value"],["pButton","","pRipple","","icon","pi pi-list","class","p-button-rounded p-button-secondary mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","class","p-button-rounded p-button-danger mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-list",1,"p-button-rounded","p-button-secondary","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger","mr-2",3,"click"],[3,"onPageChange","rows","totalRecords"],[1,"p-d-flex","p-ai-center","p-jc-between"],[1,"flex","align-items-center","justify-content-end"],[1,"pi","pi-wallet","text-primary","text-xl","mr-2"],[1,"font-semibold","text-lg"],[1,"flex","justify-content-end"],["pButton","","pRipple","","type","button","icon","pi pi-times","label","Fermer",1,"p-button-outlined",3,"click"],[3,"totalCharges","chargesFilteredByLocal"],["header","Permission not allowed"],[1,"m-0"]],template:function(i,t){i&1&&E(0,Vp,23,26,"div",1)(1,Bp,3,0,"p-card",2),i&2&&(d("ngIf",t.listActionIsValid),o(),d("ngIf",!t.listActionIsValid))},dependencies:[he,we,O,ze,ne,Ge,nt,Qe,Ke,rt,se,U,oe,re,R,q,Se,J,z,it,at,Ue,He,be,Vi,Un,Hn,j],encapsulation:2})}}return r})();var bt=class extends $t{constructor(){super(),this.solde=null,this.dateCreation=null,this.comptes=new Array}};var Kn=ri(oi());var Bi=class extends At{};var zt=(()=>{class r{constructor(e){this.http=e,this._API="",this._validate=!1,this._createActionIsValid=!0,this._editActionIsValid=!0,this._listActionIsValid=!0,this._deleteActionIsValid=!0,this._viewActionIsValid=!0,this._duplicateActionIsValid=!0,this._createAction="create",this._listAction="list",this._editAction="edit",this._deleteAction="delete",this._viewAction="view",this._duplicateAction="duplicate",this.API_PERMISSION=I.apiUrl+"modelPermissionUser/"}findAll(){return this.http.get(this.API)}findAllOptimized(){return this.http.get(this.API+"optimized")}findPaginatedByCriteria(e){return this.http.post(this.API+"find-paginated-by-criteria",e)}save(){return this.http.post(this.API,this.item)}delete(e){return this.http.delete(this.API+"id/"+e.id)}edit(){return this.http.put(this.API,this.item)}findByCriteria(e){return this.http.post(this.API+"find-by-criteria",e)}findByIdWithAssociatedList(e){return this.http.get(this.API+"id/"+e.id)}deleteMultiple(){return this.http.post(this.API+"multiple",this.selections)}exportPdf(e){return this.http.post(this.API+"exportPdf/",e,{responseType:"arraybuffer"})}hasActionPermission(e,i){return this.http.get(this.API_PERMISSION+"user/"+e+"/model/"+this.entityName+"/action/"+i)}importExcel(e){let i=new FormData;return i.append("file",e,e.name),this.http.post(this.API+"import-excel",i)}format(e){if(e!=null){let i=new Date(e),t=(0,Kn.default)(i).format(I.dateFormatEdit);console.log(t),e=new Date(t)}return e}get API(){return I.apiUrlRentalmanagementms1+"admin/compteAdmin/"}get items(){return this._items==null&&(this._items=new Array),this._items}set items(e){this._items=e}get item(){return this._item==null&&(this._item=new bt),this._item}set item(e){this._item=e}get selections(){return this._selections==null&&(this._selections=new Array),this._selections}set selections(e){this._selections=e}get createDialog(){return this._createDialog}set createDialog(e){this._createDialog=e}get editDialog(){return this._editDialog}set editDialog(e){this._editDialog=e}get viewDialog(){return this._viewDialog}set viewDialog(e){this._viewDialog=e}get criteria(){return this._criteria==null&&(this._criteria=new Bi),this._criteria}set criteria(e){this._criteria=e}setApi(e){this._API=e}set validate(e){this._validate=e}get createAction(){return this._createAction}set createAction(e){this._createAction=e}get listAction(){return this._listAction}set listAction(e){this._listAction=e}get editAction(){return this._editAction}set editAction(e){this._editAction=e}get deleteAction(){return this._deleteAction}set deleteAction(e){this._deleteAction=e}get createActionIsValid(){return this._createActionIsValid}set createActionIsValid(e){this._createActionIsValid=e}get editActionIsValid(){return this._editActionIsValid}set editActionIsValid(e){this._editActionIsValid=e}get listActionIsValid(){return this._listActionIsValid}set listActionIsValid(e){this._listActionIsValid=e}get deleteActionIsValid(){return this._deleteActionIsValid}set deleteActionIsValid(e){this._deleteActionIsValid=e}get viewAction(){return this._viewAction}set viewAction(e){this._viewAction=e}get duplicateAction(){return this._duplicateAction}set duplicateAction(e){this._duplicateAction=e}get viewActionIsValid(){return this._viewActionIsValid}set viewActionIsValid(e){this._viewActionIsValid=e}get duplicateActionIsValid(){return this._duplicateActionIsValid}set duplicateActionIsValid(e){this._duplicateActionIsValid=e}get entityName(){return this._entityName}set entityName(e){this._entityName=e}static{this.\u0275fac=function(i){return new(i||r)(St(It))}}static{this.\u0275prov=ht({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Lp=()=>({width:"70vw"});function Fp(r,v){r&1&&(a(0,"tr")(1,"th"),l(2,"Solde"),n(),a(3,"th"),l(4,"Debit"),n(),a(5,"th"),l(6,"Credit"),n(),a(7,"th"),l(8,"Numero compte"),n(),a(9,"th"),l(10,"Date creation"),n(),a(11,"th"),l(12,"Banque"),n(),a(13,"th"),l(14,"Actions"),n()())}function Wp(r,v){if(r&1){let e=M();a(0,"tr")(1,"td"),l(2),n(),a(3,"td"),l(4),n(),a(5,"td"),l(6),n(),a(7,"td"),l(8),n(),a(9,"td"),l(10),p(11,"date"),n(),a(12,"td"),l(13),n(),a(14,"td")(15,"p-button",30),A("click",function(){let t=g(e),s=t.$implicit,_=t.rowIndex,D=m(2);return u(D.deleteComptes(s,_))}),n(),a(16,"p-button",31),A("click",function(){let t=g(e),s=t.$implicit,_=t.rowIndex,D=m(2);return u(D.editComptes(s,_))}),n()()()}if(r&2){let e=v.$implicit,i=m(2);o(2),h(e.solde),o(2),h(e.debit),o(2),h(e.credit),o(2),h(e.numeroCompte),o(2),h(G(11,8,e.dateCreation,i.dateFormatColumn)),o(3),h(e.banque==null?null:e.banque.label),o(2),d("rounded",!0),o(),d("rounded",!0)}}function kp(r,v){if(r&1){let e=M();a(0,"p-tabView")(1,"p-tabPanel",3),p(2,"translate"),a(3,"div",4)(4,"div",5)(5,"label",6),l(6),p(7,"translate"),n(),a(8,"p-inputNumber",7),p(9,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.solde,t)||(s.item.solde=t),u(t)}),n()(),a(10,"div",5)(11,"label",8),l(12),p(13,"translate"),n(),a(14,"p-calendar",9),p(15,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.dateCreation,t)||(s.item.dateCreation=t),u(t)}),n()()()(),a(16,"p-tabPanel",3),p(17,"translate"),a(18,"p-tabView",10),y("activeIndexChange",function(t){g(e);let s=m();return b(s.activeTab,t)||(s.activeTab=t),u(t)}),a(19,"p-tabPanel",11)(20,"div",12)(21,"div",5)(22,"label",6),l(23,"Solde"),n(),a(24,"p-inputNumber",13),y("ngModelChange",function(t){g(e);let s=m();return b(s.comptesElement.solde,t)||(s.comptesElement.solde=t),u(t)}),n()(),a(25,"div",5)(26,"label",14),l(27,"Debit"),n(),a(28,"p-inputNumber",15),y("ngModelChange",function(t){g(e);let s=m();return b(s.comptesElement.debit,t)||(s.comptesElement.debit=t),u(t)}),n()(),a(29,"div",5)(30,"label",8),l(31,"Credit"),n(),a(32,"p-inputNumber",16),y("ngModelChange",function(t){g(e);let s=m();return b(s.comptesElement.credit,t)||(s.comptesElement.credit=t),u(t)}),n()(),a(33,"div",5)(34,"label",17),l(35,"Numero compte"),n(),a(36,"p-inputNumber",18),y("ngModelChange",function(t){g(e);let s=m();return b(s.comptesElement.numeroCompte,t)||(s.comptesElement.numeroCompte=t),u(t)}),n()(),a(37,"div",5)(38,"label",19),l(39,"Date creation"),n(),a(40,"p-calendar",20),y("ngModelChange",function(t){g(e);let s=m();return b(s.comptesElement.dateCreation,t)||(s.comptesElement.dateCreation=t),u(t)}),n()(),a(41,"div",5)(42,"label",21),l(43,"Banque"),n(),a(44,"p-dropdown",22),y("ngModelChange",function(t){g(e);let s=m();return b(s.comptesElement.banque,t)||(s.comptesElement.banque=t),u(t)}),n()(),a(45,"div",23)(46,"button",24),A("click",function(){g(e);let t=m();return u(t.addComptes())}),C(47,"i",25),l(48," OK "),n()()()(),a(49,"p-tabPanel",3)(50,"div",26)(51,"p-table",27),E(52,Fp,15,0,"ng-template",28)(53,Wp,17,11,"ng-template",29),n()()()()()()}if(r&2){let e=m();o(),f("header",c(2,29,"compteAdmin.tabPan")),o(5),h(c(7,31,"compteAdmin.solde")),o(2),f("placeholder",c(9,33,"compteAdmin.solde")),x("ngModel",e.item.solde),o(4),h(c(13,35,"compteAdmin.dateCreation")),o(2),f("placeholder",c(15,37,"compteAdmin.dateCreation")),f("dateFormat",e.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",e.item.dateCreation),o(2),f("header",c(17,39,"compteAdmin.comptes")),o(2),x("activeIndex",e.activeTab),o(6),x("ngModel",e.comptesElement.solde),o(4),x("ngModel",e.comptesElement.debit),o(4),x("ngModel",e.comptesElement.credit),o(4),x("ngModel",e.comptesElement.numeroCompte),o(4),f("dateFormat",e.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",e.comptesElement.dateCreation),d("showIcon",!0),o(4),d("options",e.banques),x("ngModel",e.comptesElement.banque),d("filter",!0)("showClear",!0),o(5),X("header","Liste ",(e.item.comptes==null?null:e.item.comptes.length)>0?"("+(e.item.comptes==null?null:e.item.comptes.length)+")":"",""),o(2),d("value",e.item.comptes)("scrollable",!0)}}function jp(r,v){if(r&1){let e=M();a(0,"div",32)(1,"button",33),p(2,"translate"),A("click",function(){g(e);let t=m();return u(t.save())}),C(3,"i",34),l(4),p(5,"translate"),n(),a(6,"button",35),A("click",function(){g(e);let t=m();return u(t.hideCreateDialog())}),C(7,"i",36),l(8),p(9,"translate"),n()()}r&2&&(o(),f("label",c(2,3,"validate")),o(3),B(" ",c(5,5,"validate")," "),o(4),B(" ",c(9,7,"cancel")," "))}var Xn=(()=>{class r{constructor(e,i,t,s){this.service=e,this.compteService=i,this.banqueService=t,this.platformId=s,this._submitted=!1,this._errorMessages=new Array,this._activeTab=0,this.comptesIndex=-1,this._comptesElement=new ae,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.comptesElement.banque=new Fe,this.banqueService.findAll().subscribe(e=>this.banques=e)}save(){this.submitted=!0,this.validateForm(),this.errorMessages.length===0?this.saveWithShowOption(!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs sur le formulaire"})}saveWithShowOption(e){this.service.save().subscribe(i=>{i!=null?(this.items.push(K({},i)),this.createDialog=!1,this.submitted=!1,this.item=new bt):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Element existant"})},i=>{console.log(i)})}hideCreateDialog(){this.createDialog=!1,this.setValidation(!0)}validateComptes(){this.errorMessages=new Array}setValidation(e){}addComptes(){this.item.comptes==null&&(this.item.comptes=new Array),this.validateComptes(),this.errorMessages.length===0?(this.comptesIndex==-1?this.item.comptes.push(K({},this.comptesElement)):this.item.comptes[this.comptesIndex]=this.comptesElement,this.comptesElement=new ae,this.comptesIndex=-1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs suivant : "+this.errorMessages})}deleteComptes(e,i){this.item.comptes.splice(i,1)}editComptes(e,i){this.comptesElement=K({},e),this.comptesIndex=i,this.activeTab=0}validateForm(){this.errorMessages=new Array}openCreateBanque(e){return P(this,null,function*(){(yield this.roleService.isPermitted("Banque","add"))?(this.banque=new Fe,this.createBanqueDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}get banque(){return this.banqueService.item}set banque(e){this.banqueService.item=e}get banques(){return this.banqueService.items}set banques(e){this.banqueService.items=e}get createBanqueDialog(){return this.banqueService.createDialog}set createBanqueDialog(e){this.banqueService.createDialog=e}get comptesElement(){return this._comptesElement==null&&(this._comptesElement=new ae),this._comptesElement}set comptesElement(e){this._comptesElement=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get createDialog(){return this.service.createDialog}set createDialog(e){this.service.createDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatCreate}get dateFormatColumn(){return I.dateFormatCreate}get submitted(){return this._submitted}set submitted(e){this._submitted=e}get errorMessages(){return this._errorMessages==null&&(this._errorMessages=new Array),this._errorMessages}set errorMessages(e){this._errorMessages=e}get validate(){return this.service.validate}set validate(e){this.service.validate=e}get activeTab(){return this._activeTab}set activeTab(e){this._activeTab=e}static{this.\u0275fac=function(i){return new(i||r)(S(zt),S(Q),S(_e),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-admin-create-admin"]],standalone:!1,decls:4,vars:11,consts:[["styleClass","p-fluid",3,"visibleChange","visible","header","modal","maximizable","draggable","resizable"],["pTemplate","content"],["pTemplate","footer"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","1",1,"text-sm","font-semibold"],["id","1",3,"ngModelChange","placeholder","ngModel"],["for","3",1,"text-sm","font-semibold"],["appendTo","body","id","3",1,"w-full",3,"ngModelChange","showTime","showSeconds","placeholder","ngModel","dateFormat"],[3,"activeIndexChange","activeIndex"],["header","Cre\u0301ation"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","p-4"],["id","solde","placeholder","Solde",3,"ngModelChange","ngModel"],["for","2",1,"text-sm","font-semibold"],["id","debit","placeholder","Debit",3,"ngModelChange","ngModel"],["id","credit","placeholder","Credit",3,"ngModelChange","ngModel"],["for","4",1,"text-sm","font-semibold"],["id","numeroCompte","placeholder","Numero compte",3,"ngModelChange","ngModel"],["for","6",1,"text-sm","font-semibold"],["appendTo","body","id","6","placeholder","Date creation",1,"w-full",3,"ngModelChange","showTime","showSeconds","ngModel","dateFormat","showIcon"],[1,"text-sm","font-semibold"],["appendTo","body","id","7","filterMatchMode","contains","optionLabel","label","placeholder","Banque",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],[1,"flex","justify-end","md:col-span-3"],["pButton","","type","button",1,"bg-green-500","text-white","px-4","py-2","rounded-md","hover:bg-green-700",3,"click"],[1,"pi","pi-plus"],[1,"card","p-4"],["scrollHeight","200px",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],["pButton","","type","button","icon","pi pi-times","severity","danger",1,"mr-2",3,"click","rounded"],["pButton","","type","button","icon","pi pi-pencil","severity","success",1,"mr-2",3,"click","rounded"],[1,"flex","justify-end","space-x-3","p-4"],[1,"bg-blue-500","text-white","px-4","py-2","rounded-md","hover:bg-primary",3,"click","label"],[1,"pi","pi-check"],[1,"border","border-gray-400","text-gray-600","hover:bg-gray-200","px-4","py-2","rounded-md",3,"click"],[1,"pi","pi-times"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),p(1,"translate"),y("visibleChange",function(_){return b(t.createDialog,_)||(t.createDialog=_),_}),E(2,kp,54,41,"ng-template",1)(3,jp,10,9,"ng-template",2),n()),i&2&&(H(V(10,Lp)),f("header",c(1,8,"compteAdmin.tabPan")),x("visible",t.createDialog),d("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!1))},dependencies:[O,ne,se,oe,ye,R,q,ce,J,ie,Y,z,T,j],encapsulation:2})}}return r})();var Rp=()=>({width:"70vw"});function qp(r,v){r&1&&(a(0,"tr")(1,"th"),l(2,"Solde"),n(),a(3,"th"),l(4,"Debit"),n(),a(5,"th"),l(6,"Credit"),n(),a(7,"th"),l(8,"Numero compte"),n(),a(9,"th"),l(10,"Date creation"),n(),a(11,"th"),l(12,"Banque"),n()())}function Op(r,v){if(r&1&&(a(0,"tr")(1,"td"),l(2),n(),a(3,"td"),l(4),n(),a(5,"td"),l(6),n(),a(7,"td"),l(8),n(),a(9,"td"),l(10),p(11,"date"),n(),a(12,"td"),l(13),n()()),r&2){let e=v.$implicit,i=m(2);o(2),h(e.solde),o(2),h(e.debit),o(2),h(e.credit),o(2),h(e.numeroCompte),o(2),h(G(11,6,e.dateCreation,i.dateFormatColumn)),o(3),h(e.banque==null?null:e.banque.label)}}function Up(r,v){if(r&1&&(a(0,"p-tabView")(1,"p-tabPanel",3),p(2,"translate"),a(3,"div",4)(4,"div",5)(5,"label",6),l(6),p(7,"translate"),n(),C(8,"p-inputNumber",7),p(9,"translate"),n(),a(10,"div",5)(11,"label",8),l(12),p(13,"translate"),n(),C(14,"p-calendar",9),p(15,"translate"),n()()(),a(16,"p-tabPanel",3),p(17,"translate"),a(18,"div",10)(19,"p-table",11),E(20,qp,13,0,"ng-template",12)(21,Op,14,9,"ng-template",13),n()()()()),r&2){let e=m();o(),f("header",c(2,15,"compteAdmin.tabPan")),o(5),h(c(7,17,"compteAdmin.solde")),o(2),f("placeholder",c(9,19,"compteAdmin.solde")),d("disabled",!0)("ngModel",e.item.solde),o(4),h(c(13,21,"compteAdmin.dateCreation")),o(2),f("placeholder",c(15,23,"compteAdmin.dateCreation")),f("dateFormat",e.dateFormat),d("disabled",!0)("showTime",!0)("showSeconds",!1)("ngModel",e.item.dateCreation),o(2),f("header",c(17,25,"compteAdmin.comptes")),o(3),d("value",e.item.comptes)("scrollable",!0)}}function Hp(r,v){if(r&1){let e=M();a(0,"div",14)(1,"div")(2,"button",15),A("click",function(){g(e);let t=m();return u(t.hideViewDialog())}),C(3,"i",16),l(4," Annuler "),n()()()}}var Yn=(()=>{class r{constructor(e,i,t){this.service=e,this.compteService=i,this.banqueService=t,this._submitted=!1,this._errorMessages=new Array,this.comptes=new ae,this.comptess=[],this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){}get banque(){return this.banqueService.item}set banque(e){this.banqueService.item=e}get banques(){return this.banqueService.items}set banques(e){this.banqueService.items=e}hideViewDialog(){this.viewDialog=!1}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get viewDialog(){return this.service.viewDialog}set viewDialog(e){this.service.viewDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatView}get dateFormatColumn(){return I.dateFormatList}static{this.\u0275fac=function(i){return new(i||r)(S(zt),S(Q),S(_e))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-admin-view-admin"]],standalone:!1,decls:4,vars:8,consts:[["styleClass","p-fluid",3,"visibleChange","visible","header","modal"],["pTemplate","content"],["pTemplate","footer"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","1",1,"text-sm","font-semibold"],["id","1",3,"disabled","placeholder","ngModel"],["for","3",1,"text-sm","font-semibold"],["id","3",1,"w-full",3,"disabled","showTime","showSeconds","placeholder","ngModel","dateFormat"],[1,"card","p-4"],["scrollHeight","200px",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],[1,"flex","justify-end","p-4"],[1,"border","border-gray-400","font-semibold","py-2","px-4","rounded","shadow",3,"click"],[1,"pi","pi-times"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),p(1,"translate"),y("visibleChange",function(_){return b(t.viewDialog,_)||(t.viewDialog=_),_}),E(2,Up,22,27,"ng-template",1)(3,Hp,5,0,"ng-template",2),n()),i&2&&(H(V(7,Rp)),f("header",c(1,5,"compteAdmin.tabPan")),x("visible",t.viewDialog),d("modal",!0))},dependencies:[O,ne,se,R,q,J,ie,Y,z,T,j],encapsulation:2})}}return r})();var Gp=()=>({width:"70vw"});function Qp(r,v){r&1&&(a(0,"tr")(1,"th"),l(2,"Solde"),n(),a(3,"th"),l(4,"Debit"),n(),a(5,"th"),l(6,"Credit"),n(),a(7,"th"),l(8,"Numero compte"),n(),a(9,"th"),l(10,"Date creation"),n(),a(11,"th"),l(12,"Banque"),n(),a(13,"th"),l(14,"Actions"),n()())}function Kp(r,v){if(r&1){let e=M();a(0,"tr")(1,"td"),l(2),n(),a(3,"td"),l(4),n(),a(5,"td"),l(6),n(),a(7,"td"),l(8),n(),a(9,"td"),l(10),p(11,"date"),n(),a(12,"td"),l(13),n(),a(14,"td")(15,"p-button",30),A("click",function(){let t=g(e),s=t.$implicit,_=t.rowIndex,D=m(2);return u(D.deleteComptes(s,_))}),n(),a(16,"p-button",31),A("click",function(){let t=g(e),s=t.$implicit,_=t.rowIndex,D=m(2);return u(D.editComptes(s,_))}),n()()()}if(r&2){let e=v.$implicit,i=m(2);o(2),h(e.solde),o(2),h(e.debit),o(2),h(e.credit),o(2),h(e.numeroCompte),o(2),h(G(11,8,e.dateCreation,i.dateFormatColumn)),o(3),h(e.banque==null?null:e.banque.label),o(2),d("rounded",!0),o(),d("rounded",!0)}}function Xp(r,v){if(r&1){let e=M();a(0,"p-tabView")(1,"p-tabPanel",3),p(2,"translate"),a(3,"div",4)(4,"div",5)(5,"label",6),l(6),p(7,"translate"),n(),a(8,"p-inputNumber",7),p(9,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.solde,t)||(s.item.solde=t),u(t)}),n()(),a(10,"div",5)(11,"label",8),l(12),p(13,"translate"),n(),a(14,"p-calendar",9),p(15,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.dateCreation,t)||(s.item.dateCreation=t),u(t)}),n()()()(),a(16,"p-tabPanel",3),p(17,"translate"),a(18,"p-tabView",10),y("activeIndexChange",function(t){g(e);let s=m();return b(s.activeTab,t)||(s.activeTab=t),u(t)}),a(19,"p-tabPanel",11)(20,"div",12)(21,"div",5)(22,"label",6),l(23,"Solde"),n(),a(24,"p-inputNumber",13),y("ngModelChange",function(t){g(e);let s=m();return b(s.comptesElement.solde,t)||(s.comptesElement.solde=t),u(t)}),n()(),a(25,"div",5)(26,"label",14),l(27,"Debit"),n(),a(28,"p-inputNumber",15),y("ngModelChange",function(t){g(e);let s=m();return b(s.comptesElement.debit,t)||(s.comptesElement.debit=t),u(t)}),n()(),a(29,"div",5)(30,"label",8),l(31,"Credit"),n(),a(32,"p-inputNumber",16),y("ngModelChange",function(t){g(e);let s=m();return b(s.comptesElement.credit,t)||(s.comptesElement.credit=t),u(t)}),n()(),a(33,"div",5)(34,"label",17),l(35,"Numero compte"),n(),a(36,"p-inputNumber",18),y("ngModelChange",function(t){g(e);let s=m();return b(s.comptesElement.numeroCompte,t)||(s.comptesElement.numeroCompte=t),u(t)}),n()(),a(37,"div",5)(38,"label",19),l(39,"Date creation"),n(),a(40,"p-calendar",20),y("ngModelChange",function(t){g(e);let s=m();return b(s.comptesElement.dateCreation,t)||(s.comptesElement.dateCreation=t),u(t)}),n()(),a(41,"div",5)(42,"label",21),l(43,"Banque"),n(),a(44,"p-dropdown",22),y("ngModelChange",function(t){g(e);let s=m();return b(s.comptesElement.banque,t)||(s.comptesElement.banque=t),u(t)}),n()(),a(45,"div",23)(46,"button",24),A("click",function(){g(e);let t=m();return u(t.addComptes())}),C(47,"i",25),l(48," OK "),n()()()(),a(49,"p-tabPanel",3)(50,"div",26)(51,"p-table",27),E(52,Qp,15,0,"ng-template",28)(53,Kp,17,11,"ng-template",29),n()()()()()()}if(r&2){let e=m();o(),f("header",c(2,29,"compteAdmin.tabPan")),o(5),h(c(7,31,"compteAdmin.solde")),o(2),f("placeholder",c(9,33,"compteAdmin.solde")),x("ngModel",e.item.solde),o(4),h(c(13,35,"compteAdmin.dateCreation")),o(2),f("placeholder",c(15,37,"compteAdmin.dateCreation")),f("dateFormat",e.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",e.item.dateCreation),o(2),f("header",c(17,39,"compteAdmin.comptes")),o(2),x("activeIndex",e.activeTab),o(6),x("ngModel",e.comptesElement.solde),o(4),x("ngModel",e.comptesElement.debit),o(4),x("ngModel",e.comptesElement.credit),o(4),x("ngModel",e.comptesElement.numeroCompte),o(4),f("dateFormat",e.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",e.comptesElement.dateCreation),d("showIcon",!0),o(4),d("options",e.banques),x("ngModel",e.comptesElement.banque),d("filter",!0)("showClear",!0),o(5),X("header","Liste ",(e.item.comptes==null?null:e.item.comptes.length)>0?"("+(e.item.comptes==null?null:e.item.comptes.length)+")":"",""),o(2),d("value",e.item.comptes)("scrollable",!0)}}function Yp(r,v){if(r&1){let e=M();a(0,"div",32)(1,"button",33),p(2,"translate"),A("click",function(){g(e);let t=m();return u(t.edit())}),C(3,"i",34),l(4),p(5,"translate"),n(),a(6,"button",35),A("click",function(){g(e);let t=m();return u(t.hideEditDialog())}),C(7,"i",36),l(8),p(9,"translate"),n()()}r&2&&(o(),f("label",c(2,3,"validate")),o(3),B(" ",c(5,5,"validate")," "),o(4),B(" ",c(9,7,"cancel")," "))}var Jn=(()=>{class r{constructor(e,i,t,s){this.service=e,this.compteService=i,this.banqueService=t,this.platformId=s,this._submitted=!1,this._errorMessages=new Array,this._activeTab=0,this.comptesIndex=-1,this._comptesElement=new ae,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.comptesElement.banque=new Fe,this.banqueService.findAll().subscribe(e=>this.banques=e)}prepareEdit(){this.item.dateCreation=this.service.format(this.item.dateCreation)}edit(){this.submitted=!0,this.prepareEdit(),this.validateForm(),this.errorMessages.length===0?this.editWithShowOption(!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs sur le formulaire"})}editWithShowOption(e){this.service.edit().subscribe(i=>{let t=this.items.findIndex(s=>s.id===this.item.id);this.items[t]=i,this.editDialog=!1,this.submitted=!1,this.item=new bt},i=>{console.log(i)})}hideEditDialog(){this.editDialog=!1,this.setValidation(!0)}validateComptes(){this.errorMessages=new Array}setValidation(e){}addComptes(){this.item.comptes==null&&(this.item.comptes=new Array),this.validateComptes(),this.errorMessages.length===0?(this.comptesIndex==-1?this.item.comptes.push(K({},this.comptesElement)):this.item.comptes[this.comptesIndex]=this.comptesElement,this.comptesElement=new ae,this.comptesIndex=-1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs suivant : "+this.errorMessages})}deleteComptes(e,i){this.item.comptes.splice(i,1)}editComptes(e,i){this.comptesElement=K({},e),this.comptesIndex=i,this.activeTab=0}validateForm(){this.errorMessages=new Array}openCreateBanque(e){return P(this,null,function*(){(yield this.roleService.isPermitted("Banque","edit"))?(this.banque=new Fe,this.createBanqueDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}get banque(){return this.banqueService.item}set banque(e){this.banqueService.item=e}get banques(){return this.banqueService.items}set banques(e){this.banqueService.items=e}get createBanqueDialog(){return this.banqueService.createDialog}set createBanqueDialog(e){this.banqueService.createDialog=e}get comptesElement(){return this._comptesElement==null&&(this._comptesElement=new ae),this._comptesElement}set comptesElement(e){this._comptesElement=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get editDialog(){return this.service.editDialog}set editDialog(e){this.service.editDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatCreate}get dateFormatColumn(){return I.dateFormatCreate}get submitted(){return this._submitted}set submitted(e){this._submitted=e}get errorMessages(){return this._errorMessages==null&&(this._errorMessages=new Array),this._errorMessages}set errorMessages(e){this._errorMessages=e}get validate(){return this.service.validate}set validate(e){this.service.validate=e}get activeTab(){return this._activeTab}set activeTab(e){this._activeTab=e}static{this.\u0275fac=function(i){return new(i||r)(S(zt),S(Q),S(_e),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-admin-edit-admin"]],standalone:!1,decls:4,vars:11,consts:[["styleClass","p-fluid",3,"visibleChange","visible","header","modal","maximizable","draggable","resizable"],["pTemplate","content"],["pTemplate","footer"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","1",1,"text-sm","font-semibold"],["id","1",3,"ngModelChange","placeholder","ngModel"],["for","3",1,"text-sm","font-semibold"],["appendTo","body","id","3",1,"w-full",3,"ngModelChange","showTime","showSeconds","placeholder","ngModel","dateFormat"],[3,"activeIndexChange","activeIndex"],["header","Cre\u0301ation"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","p-4"],["id","solde","placeholder","Solde",3,"ngModelChange","ngModel"],["for","2",1,"text-sm","font-semibold"],["id","debit","placeholder","Debit",3,"ngModelChange","ngModel"],["id","credit","placeholder","Credit",3,"ngModelChange","ngModel"],["for","4",1,"text-sm","font-semibold"],["id","numeroCompte","placeholder","Numero compte",3,"ngModelChange","ngModel"],["for","6",1,"text-sm","font-semibold"],["appendTo","body","id","6","placeholder","Date creation",1,"w-full",3,"ngModelChange","showTime","showSeconds","ngModel","dateFormat","showIcon"],[1,"text-sm","font-semibold"],["appendTo","body","id","7","filterMatchMode","contains","optionLabel","label","placeholder","Banque",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],[1,"flex","justify-end","md:col-span-3"],["pButton","","type","button",1,"bg-green-500","text-white","px-4","py-2","rounded-md","hover:bg-green-700",3,"click"],[1,"pi","pi-plus"],[1,"card","p-4"],["scrollHeight","200px",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],["pButton","","type","button","icon","pi pi-times","severity","danger",1,"mr-2",3,"click","rounded"],["pButton","","type","button","icon","pi pi-pencil","severity","success",1,"mr-2",3,"click","rounded"],[1,"flex","justify-end","space-x-3","p-4"],[1,"bg-blue-500","text-white","px-4","py-2","rounded-md","hover:bg-primary",3,"click","label"],[1,"pi","pi-check"],[1,"border","border-gray-400","text-gray-600","hover:bg-gray-200","px-4","py-2","rounded-md",3,"click"],[1,"pi","pi-times"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),p(1,"translate"),y("visibleChange",function(_){return b(t.editDialog,_)||(t.editDialog=_),_}),E(2,Xp,54,41,"ng-template",1)(3,Yp,10,9,"ng-template",2),n()),i&2&&(H(V(10,Gp)),f("header",c(1,8,"compteAdmin.tabPan")),x("visible",t.editDialog),d("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!1))},dependencies:[O,ne,se,oe,ye,R,q,ce,J,ie,Y,z,T,j],encapsulation:2})}}return r})();var Zp=()=>["solde","dateCreation"],$p=()=>[10,25,50],ec=()=>({width:"450px"});function tc(r,v){if(r&1){let e=M();a(0,"button",18),p(1,"translate"),A("click",function(){g(e);let t=m(3);return u(t.openCreate())}),n()}r&2&&X("label"," ",c(1,2,"new"),"")}function ic(r,v){if(r&1){let e=M();E(0,tc,2,4,"button",16),a(1,"button",17),p(2,"translate"),A("click",function(){g(e);let t=m(2);return u(t.showSearch())}),n()}if(r&2){let e=m(2);d("ngIf",e.createActionIsValid),o(),X("label"," ",c(2,5,"search"),""),X("icon","pi pi-",e.findByCriteriaShow?"angle-down":"angle-right","")}}function nc(r,v){if(r&1&&(a(0,"div",19),C(1,"p-splitButton",20),p(2,"translate"),n()),r&2){let e=m(2);o(),X("label"," ",c(2,3,"export"),""),d("model",e.excelPdfButons)}}function ac(r,v){if(r&1){let e=M();a(0,"div",21)(1,"div",22)(2,"label",23),l(3),p(4,"translate"),n(),a(5,"p-inputNumber",24),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.soldeMin,t)||(s.criteria.soldeMin=t),u(t)}),n()(),a(6,"div",22)(7,"label",25),l(8),p(9,"translate"),n(),a(10,"p-inputNumber",26),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.soldeMax,t)||(s.criteria.soldeMax=t),u(t)}),n()(),a(11,"div",22)(12,"label",27),l(13),p(14,"translate"),n(),a(15,"p-calendar",28),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.dateCreationFrom,t)||(s.criteria.dateCreationFrom=t),u(t)}),n()(),a(16,"div",22)(17,"label",29),l(18),p(19,"translate"),n(),a(20,"p-calendar",30),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.dateCreationTo,t)||(s.criteria.dateCreationTo=t),u(t)}),n()(),a(21,"div",31)(22,"button",32),p(23,"translate"),A("click",function(){g(e);let t=m(2);return u(t.findPaginatedByCriteria())}),C(24,"i",33),l(25),p(26,"translate"),n()()()}if(r&2){let e=m(2);o(3),h(c(4,12,"compteAdmin.soldeMin")),o(2),x("ngModel",e.criteria.soldeMin),o(3),h(c(9,14,"compteAdmin.soldeMax")),o(2),x("ngModel",e.criteria.soldeMax),o(3),h(c(14,16,"compteAdmin.dateCreationMin")),o(2),x("ngModel",e.criteria.dateCreationFrom),d("showIcon",!0),o(3),h(c(19,18,"compteAdmin.dateCreationMax")),o(2),x("ngModel",e.criteria.dateCreationTo),d("showIcon",!0),o(2),f("label",c(23,20,"validate")),o(3),B(" ",c(26,22,"validate")," ")}}function rc(r,v){if(r&1){let e=M();a(0,"div",34)(1,"h5",35),l(2),p(3,"translate"),n(),a(4,"span",36)(5,"p-iconfield",37),C(6,"p-inputicon",38),a(7,"input",39),p(8,"translate"),A("input",function(t){g(e),m();let s=Oe(9);return u(s.filterGlobal(t.target.value,"contains"))}),n()()()()}r&2&&(o(2),h(c(3,2,"compteAdmin.header")),o(5),f("placeholder",c(8,4,"searchInput")))}function oc(r,v){r&1&&(a(0,"tr")(1,"th",40),C(2,"p-tableHeaderCheckbox"),n(),a(3,"th",41)(4,"div",42)(5,"span",43),l(6),p(7,"translate"),n(),C(8,"p-sortIcon",44),n()(),a(9,"th",45)(10,"div",42)(11,"span",43),l(12),p(13,"translate"),n(),C(14,"p-sortIcon",46),n()(),a(15,"th"),l(16,"Actions"),n()()),r&2&&(o(6),h(c(7,2,"compteAdmin.solde")),o(6),h(c(13,4,"compteAdmin.dateCreation")))}function sc(r,v){if(r&1){let e=M();a(0,"button",51),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.edit(t))}),n()}}function lc(r,v){if(r&1){let e=M();a(0,"button",52),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.view(t))}),n()}}function pc(r,v){if(r&1){let e=M();a(0,"button",53),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.delete(t))}),n()}}function cc(r,v){if(r&1&&(a(0,"tr")(1,"td"),C(2,"p-tableCheckbox",47),n(),a(3,"td"),l(4),n(),a(5,"td"),l(6),p(7,"date"),n(),a(8,"td"),E(9,sc,1,0,"button",48)(10,lc,1,0,"button",49)(11,pc,1,0,"button",50),n()()),r&2){let e=v.$implicit,i=m(2);o(2),d("value",e),o(2),h(e.solde),o(2),h(G(7,6,e.dateCreation,"dd/MM/yyyy HH:mm")),o(3),d("ngIf",i.editActionIsValid),o(),d("ngIf",i.viewActionIsValid),o(),d("ngIf",i.deleteActionIsValid)}}function mc(r,v){if(r&1){let e=M();a(0,"p-paginator",54),A("onPageChange",function(t){g(e);let s=m(2);return u(s.onPage(t))}),n(),a(1,"div",55),l(2),n()}if(r&2){let e=m(2);d("rows",10)("totalRecords",e.totalRecords),o(2),$e(" En totale il ",(e.items&&e.totalRecords==1,"y a")," ",e.items?e.totalRecords:0," ",e.items?e.totalRecords==1?"compte admin":"compte admins":0,". ")}}function dc(r,v){r&1&&C(0,"app-compte-admin-create-admin")}function hc(r,v){r&1&&C(0,"app-compte-admin-edit-admin")}function gc(r,v){r&1&&C(0,"app-compte-admin-view-admin")}function uc(r,v){if(r&1){let e=M();a(0,"div",3)(1,"div",4),C(2,"p-toast"),a(3,"div",5)(4,"p-toolbar",6),E(5,ic,3,7,"ng-template",7)(6,nc,3,5,"ng-template",8),n(),E(7,ac,27,24,"div",9),a(8,"p-table",10,0),p(10,"translate"),y("selectionChange",function(t){g(e);let s=m();return b(s.selections,t)||(s.selections=t),u(t)}),E(11,rc,9,6,"ng-template",11)(12,oc,17,6,"ng-template",12)(13,cc,12,9,"ng-template",13)(14,mc,3,5,"ng-template",14),n()(),E(15,dc,1,0,"app-compte-admin-create-admin",15)(16,hc,1,0,"app-compte-admin-edit-admin",15)(17,gc,1,0,"app-compte-admin-view-admin",15),C(18,"p-confirmDialog"),n()()}if(r&2){let e=m();o(7),d("ngIf",e.findByCriteriaShow),o(),f("currentPageReportTemplate",c(10,16,"les \xE9l\xE9ments de {first} \xE0 {last} sur {totalRecords} ")),d("value",e.items)("columns",e.cols)("rows",8)("paginator",!1)("globalFilterFields",V(18,Zp)),x("selection",e.selections),d("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",V(19,$p)),o(7),d("ngIf",e.createDialog&&e.createActionIsValid),o(),d("ngIf",e.editDialog&&e.editActionIsValid),o(),d("ngIf",e.viewDialog&&e.viewActionIsValid),o(),H(V(20,ec))}}function _c(r,v){r&1&&(a(0,"p-card",56)(1,"p",57),l(2," You don't have permission to access ! "),n()())}var Zn=(()=>{class r{constructor(e,i,t,s){this.service=e,this.compteService=i,this.banqueService=t,this.platformId=s,this.fileName="CompteAdmin",this.findByCriteriaShow=!1,this.cols=[],this.exportData=[],this.criteriaData=[],this._totalRecords=0,this.enableSecurity=!1,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.authService=w.injector.get(ot),this.exportService=w.injector.get(Ie)}ngOnInit(){this.findPaginatedByCriteria(),this.initExport(),this.initCol()}onExcelFileSelected(e){let i=e.target;i.files&&i.files.length>0&&(this.excelFile=i.files[0])}importExcel(){this.excelFile&&this.service.importExcel(this.excelFile).subscribe(e=>{this.items=e,this.messageService.add({severity:"success",summary:"Success",detail:"File uploaded successfully!",life:3e3})},e=>{this.messageService.add({severity:"error",summary:"Error",detail:"File uploaded with Error!",life:3e3})})}findPaginatedByCriteria(){this.service.findPaginatedByCriteria(this.criteria).subscribe(e=>{this.items=e.list,this.totalRecords=e.dataSize,this.selections=new Array},e=>console.log(e))}onPage(e){this.criteria.page=e.page,this.criteria.maxResults=e.rows,this.findPaginatedByCriteria()}edit(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.item=i,console.log(i),this.editDialog=!0})})}view(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.item=i,this.viewDialog=!0})})}openCreate(){return P(this,null,function*(){this.item=new bt,this.createDialog=!0})}deleteMultiple(){return P(this,null,function*(){this.confirmationService.confirm({message:"Voulez-vous supprimer ces \xE9l\xE9ments ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Ok"},accept:()=>{this.service.deleteMultiple().subscribe(()=>{for(let e of this.selections){let i=this.items.findIndex(t=>t.id===e.id);this.items.splice(i,1)}this.selections=new Array,this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Les \xE9l\xE9ments s\xE9lectionn\xE9s ont \xE9t\xE9 supprim\xE9s",life:3e3})},e=>console.log(e))}})})}isSelectionDisabled(){return this.selections==null||this.selections.length==0}delete(e){return P(this,null,function*(){this.confirmationService.confirm({message:"Voulez-vous supprimer cet \xE9l\xE9ment ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Ok"},accept:()=>{this.service.delete(e).subscribe(i=>{if(i>0){let t=this.items.indexOf(e);t>-1&&this.items.splice(t,1),this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Element Supprim\xE9",life:3e3})}},i=>console.log(i))}})})}duplicate(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.initDuplicate(i),this.item=i,this.item.id=null,this.createDialog=!0})})}initExport(){this.excelPdfButons=[{label:"CSV",icon:"pi pi-file",command:()=>{this.prepareColumnExport(),this.exportService.exporterCSV(this.criteriaData,this.exportData,this.fileName)}},{label:"XLS",icon:"pi pi-file-excel",command:()=>{this.prepareColumnExport(),this.exportService.exporterExcel(this.criteriaData,this.exportData,this.fileName)}},{label:"PDF",icon:"pi pi-file-pdf",command:()=>{this.prepareColumnExport(),this.exportService.exporterPdf(this.criteriaData,this.exportData,this.fileName)}}]}exportPdf(e){this.service.exportPdf(e).subscribe(i=>{let t=new Blob([i],{type:"application/pdf"}),s=window.URL.createObjectURL(t),_=document.createElement("a");_.href=s,_.download=this.pdfName,_.setAttribute("target","_blank"),_.click(),window.URL.revokeObjectURL(s)},i=>{console.error(i)})}showSearch(){this.findByCriteriaShow=!this.findByCriteriaShow}update(){this.service.edit().subscribe(e=>{let i=this.items.findIndex(t=>t.id===this.item.id);this.items[i]=e,this.editDialog=!1,this.item=new bt},e=>{console.log(e)})}save(){this.service.save().subscribe(e=>{e!=null?(this.items.push(K({},e)),this.createDialog=!1,this.item=new bt):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Element existant"})},e=>{console.log(e)})}initCol(){this.cols=[{field:"solde",header:"Solde"},{field:"dateCreation",header:"Date creation"}]}initDuplicate(e){e.comptes!=null&&e.comptes.forEach(i=>{i.transactions=null,i.id=null})}prepareColumnExport(){this.service.findByCriteria(this.criteria).subscribe(e=>{this.exportData=e.map(i=>({Solde:i.solde,"Date creation":this.datePipe.transform(i.dateCreation,"dd/MM/yyyy hh:mm")})),this.criteriaData=[{"Solde Min":this.criteria.soldeMin?this.criteria.soldeMin:I.emptyForExport,"Solde Max":this.criteria.soldeMax?this.criteria.soldeMax:I.emptyForExport,"Date creation Min":this.criteria.dateCreationFrom?this.datePipe.transform(this.criteria.dateCreationFrom,this.dateFormat):I.emptyForExport,"Date creation Max":this.criteria.dateCreationTo?this.datePipe.transform(this.criteria.dateCreationTo,this.dateFormat):I.emptyForExport}]})}get items(){return this.service.items}set items(e){this.service.items=e}get selections(){return this.service.selections}set selections(e){this.service.selections=e}get item(){return this.service.item}set item(e){this.service.item=e}get createDialog(){return this.service.createDialog}set createDialog(e){this.service.createDialog=e}get editDialog(){return this.service.editDialog}set editDialog(e){this.service.editDialog=e}get viewDialog(){return this.service.viewDialog}set viewDialog(e){this.service.viewDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatList}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e}get pdfName(){return this._pdfName}set pdfName(e){this._pdfName=e}get createActionIsValid(){return this.service.createActionIsValid}set createActionIsValid(e){this.service.createActionIsValid=e}get editActionIsValid(){return this.service.editActionIsValid}set editActionIsValid(e){this.service.editActionIsValid=e}get listActionIsValid(){return this.service.listActionIsValid}set listActionIsValid(e){this.service.listActionIsValid=e}get deleteActionIsValid(){return this.service.deleteActionIsValid}set deleteActionIsValid(e){this.service.deleteActionIsValid=e}get viewActionIsValid(){return this.service.viewActionIsValid}set viewActionIsValid(e){this.service.viewActionIsValid=e}get duplicateActionIsValid(){return this.service.duplicateActionIsValid}set duplicateActionIsValid(e){this.service.duplicateActionIsValid=e}get createAction(){return this.service.createAction}set createAction(e){this.service.createAction=e}get listAction(){return this.service.listAction}set listAction(e){this.service.listAction=e}get editAction(){return this.service.editAction}set editAction(e){this.service.editAction=e}get deleteAction(){return this.service.deleteAction}set deleteAction(e){this.service.deleteAction=e}get viewAction(){return this.service.viewAction}set viewAction(e){this.service.viewAction=e}get duplicateAction(){return this.service.duplicateAction}set duplicateAction(e){this.service.duplicateAction=e}get entityName(){return this.service.entityName}set entityName(e){this.service.entityName=e}static{this.\u0275fac=function(i){return new(i||r)(S(zt),S(Q),S(_e),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-admin-list-admin"]],standalone:!1,decls:2,vars:2,consts:[["dt",""],["class","grid",4,"ngIf"],["header","Permission not allowed",4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 border border-surface rounded-lg",4,"ngIf"],["dataKey","id","styleClass","p-datatable-customers","selectionMode","multiple",3,"selectionChange","value","columns","rows","paginator","globalFilterFields","selection","rowHover","currentPageReportTemplate","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[4,"ngIf"],["pButton","","pRipple","","icon","pi pi-plus","class","p-button-info mr-2 mb-2",3,"label","click",4,"ngIf"],["pButton","","pRipple","",1,"p-button-secondary","mr-2","mb-2",3,"click","label","icon"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button-info","mr-2","mb-2",3,"click","label"],[1,"flex"],["icon","pi pi-download","styleClass","p-button-secondary",3,"label","model"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","p-4","border","border-surface","rounded-lg"],[1,"flex","flex-col","gap-2"],["for","1-1",1,"text-sm","font-semibold"],["mode","decimal","id","1-1",3,"ngModelChange","ngModel"],["for","1-2",1,"text-sm","font-semibold"],["mode","decimal","id","1-2",3,"ngModelChange","ngModel"],["for","3-1",1,"text-sm","font-semibold"],["id","3-1","dateFormat","dd-MM-yy",1,"p-fluid",3,"ngModelChange","ngModel","showIcon"],["for","3-2",1,"text-sm","font-semibold"],["id","3-2","dateFormat","dd-MM-yy",1,"p-fluid",3,"ngModelChange","ngModel","showIcon"],[1,"col-span-full","flex","justify-end","mt-4"],["pButton","","pRipple","",1,"px-4","py-2","rounded-md",3,"click","label"],[1,"pi","pi-sort-amount-down"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","p-2","gap-4"],[1,"text-center","md:text-left"],[1,"relative","w-full","md:w-auto"],["iconPosition","left",1,"w-full","md:w-auto"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full","md:w-72","border","border-gray-300","rounded-md","p-2","focus:ring","focus:ring-blue-300",3,"input","placeholder"],[2,"width","3rem"],["pSortableColumn","solde"],[1,"p-d-flex","p-jc-between","p-ai-center"],[1,"mr-2"],["field","solde"],["pSortableColumn","dateCreation"],["field","dateCreation"],[3,"value"],["pButton","","pRipple","","icon","pi pi-pencil","class","p-button-rounded p-button-info mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-list","class","p-button-rounded p-button-secondary mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","class","p-button-rounded p-button-danger mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-info","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-list",1,"p-button-rounded","p-button-secondary","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger","mr-2",3,"click"],[3,"onPageChange","rows","totalRecords"],[1,"p-d-flex","p-ai-center","p-jc-between"],["header","Permission not allowed"],[1,"m-0"]],template:function(i,t){i&1&&E(0,uc,19,21,"div",1)(1,_c,3,0,"p-card",2),i&2&&(d("ngIf",t.listActionIsValid),o(),d("ngIf",!t.listActionIsValid))},dependencies:[he,we,O,ze,ne,Ge,nt,Qe,Ke,rt,U,oe,R,q,Se,Y,z,it,at,Ue,He,be,Xn,Yn,Jn,T,j],encapsulation:2})}}return r})();var Fi=(()=>{class r{constructor(e,i,t,s,_,D,le,de,tt,Wi){this.localeService=e,this.locationService=i,this.service=t,this.transactionService=s,this.typePaiementService=_,this.compteService=D,this.modePaiementService=le,this.locataireService=de,this.typeTransactiontService=tt,this.platformId=Wi,this._submitted=!1,this._errorMessages=new Array,this._activeTab=0,this.transactionsIndex=-1,this._transactionsElement=new Ae,this._validLocataireCode=!0,this._validLocataireNom=!0,this._validLocatairePrenom=!0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.localeService.findAll().subscribe(e=>this.locals=e),this.transactionsElement.typeTransaction=new ut,this.typeTransactiontService.findAll().subscribe(e=>this.typeTransactions=e),this.transactionsElement.modePaiement=new Ne,this.modePaiementService.findAll().subscribe(e=>this.modePaiements=e),this.transactionsElement.typePaiement=new je,this.typePaiementService.findAll().subscribe(e=>this.typePaiements=e),this.transactionsElement.compteSource=new ae,this.compteService.findAll().subscribe(e=>this.compteSources=e),this.transactionsElement.compteDestination=new ae,this.compteService.findAll().subscribe(e=>this.compteDestinations=e),this.locataireService.findAll().subscribe(e=>this.locataires=e),this.locationService.findAll().subscribe(e=>this.locations=e)}save(){this.submitted=!0,this.validateForm(),this.item.location=this.locationService.items.find(e=>e.local.code===this.item.locale.code&&e.locataire.code===this.item.locataire.code),this.item.code=`CompteInstantanee${Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}`,this.errorMessages.length===0?this.saveWithShowOption(!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs sur le formulaire"})}saveWithShowOption(e){this.service.save().subscribe(i=>{i!=null?(this.messageService.add({severity:"success",summary:"",detail:"Compte instantan\xE9 cr\xE9\xE9"}),this.items.push(K({},i)),this.createDialog=!1,this.submitted=!1,this.item=new Et):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Element existant"})},i=>{this.messageService.add({severity:"error",summary:"Erreurs",detail:"Erreur lors de la cr\xE9ation de la compte instantan\xE9e"})})}hideCreateDialog(){this.createDialog=!1,this.setValidation(!0)}validateTransactions(){this.errorMessages=new Array}setValidation(e){}addTransactions(){this.item.transactions==null&&(this.item.transactions=new Array),this.validateTransactions(),this.errorMessages.length===0?(this.transactionsIndex==-1?this.item.transactions.push(K({},this.transactionsElement)):this.item.transactions[this.transactionsIndex]=this.transactionsElement,this.transactionsElement=new Ae,this.transactionsIndex=-1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs suivant : "+this.errorMessages})}deleteTransactions(e,i){this.item.transactions.splice(i,1)}editTransactions(e,i){this.transactionsElement=K({},e),this.transactionsIndex=i,this.activeTab=0}validateForm(){this.errorMessages=new Array}openCreateCompteSource(e){return P(this,null,function*(){(yield this.roleService.isPermitted("Compte","add"))?(this.compteSource=new ae,this.createCompteSourceDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}openCreateTypePaiement(e){return P(this,null,function*(){(yield this.roleService.isPermitted("TypePaiement","add"))?(this.typePaiement=new je,this.createTypePaiementDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}openCreateCompteDestination(e){return P(this,null,function*(){(yield this.roleService.isPermitted("Compte","add"))?(this.compteDestination=new ae,this.createCompteDestinationDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}openCreateModePaiement(e){return P(this,null,function*(){(yield this.roleService.isPermitted("ModePaiement","add"))?(this.modePaiement=new Ne,this.createModePaiementDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}get locals(){return this.localeService.items}set locals(e){this.localeService.items=e}get typeTransaction(){return this.typeTransactiontService.item}set typeTransaction(e){this.typeTransactiontService.item=e}get typeTransactions(){return this.typeTransactiontService.items}set typeTransactions(e){this.typeTransactiontService.items=e}get createTypeTransactionDialog(){return this.typeTransactiontService.createDialog}set createTypeTransactionDialog(e){this.typeTransactiontService.createDialog=e}get compteSource(){return this.compteService.item}set compteSource(e){this.compteService.item=e}get compteSources(){return this.compteService.items}set compteSources(e){this.compteService.items=e}get createCompteSourceDialog(){return this.compteService.createDialog}set createCompteSourceDialog(e){this.compteService.createDialog=e}get locataire(){return this.locataireService.item}set locataire(e){this.locataireService.item=e}get locataires(){return this.locataireService.items}set locataires(e){this.locataireService.items=e}get createLocataireDialog(){return this.locataireService.createDialog}set createLocataireDialog(e){this.locataireService.createDialog=e}get typePaiement(){return this.typePaiementService.item}set typePaiement(e){this.typePaiementService.item=e}get typePaiements(){return this.typePaiementService.items}set typePaiements(e){this.typePaiementService.items=e}get createTypePaiementDialog(){return this.typePaiementService.createDialog}set createTypePaiementDialog(e){this.typePaiementService.createDialog=e}get compteDestination(){return this.compteService.item}set compteDestination(e){this.compteService.item=e}get compteDestinations(){return this.compteService.items}set compteDestinations(e){this.compteService.items=e}get createCompteDestinationDialog(){return this.compteService.createDialog}set createCompteDestinationDialog(e){this.compteService.createDialog=e}get modePaiement(){return this.modePaiementService.item}set modePaiement(e){this.modePaiementService.item=e}get modePaiements(){return this.modePaiementService.items}set modePaiements(e){this.modePaiementService.items=e}get createModePaiementDialog(){return this.modePaiementService.createDialog}set createModePaiementDialog(e){this.modePaiementService.createDialog=e}get validLocataireCode(){return this._validLocataireCode}set validLocataireCode(e){this._validLocataireCode=e}get validLocataireNom(){return this._validLocataireNom}set validLocataireNom(e){this._validLocataireNom=e}get validLocatairePrenom(){return this._validLocatairePrenom}set validLocatairePrenom(e){this._validLocatairePrenom=e}get transactionsElement(){return this._transactionsElement==null&&(this._transactionsElement=new Ae),this._transactionsElement}set transactionsElement(e){this._transactionsElement=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get createDialog(){return this.service.createDialog}set createDialog(e){this.service.createDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get locations(){return this.locationService.items}set locations(e){this.locationService.items=e}get dateFormat(){return I.dateFormatCreate}get dateFormatColumn(){return I.dateFormatCreate}get submitted(){return this._submitted}set submitted(e){this._submitted=e}get errorMessages(){return this._errorMessages==null&&(this._errorMessages=new Array),this._errorMessages}set errorMessages(e){this._errorMessages=e}get validate(){return this.service.validate}set validate(e){this.service.validate=e}get activeTab(){return this._activeTab}set activeTab(e){this._activeTab=e}cancel(){this.router.navigate(["/app/admin/finance/compte-instantanee/list"])}static{this.\u0275fac=function(i){return new(i||r)(S(ke),S(fn),S(qt),S(me),S(Be),S(Q),S(ve),S(st),S(ge),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-instantanee-create-admin"]],standalone:!1,decls:55,vars:69,consts:[[1,"container","mx-auto","p-4"],[1,"bg-white","shadow-md","rounded-lg"],[1,"border-b","p-4","flex","justify-between","items-center","bg-blue-200","text-white"],[1,"text-xl","font-semibold"],[1,"text-white","hover:bg-blue-600","p-2","rounded-md",3,"click"],[1,"pi","pi-times"],[1,"p-4"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","3",1,"text-sm","font-semibold"],["type","text","pInputText","","id","3",3,"ngModelChange","placeholder","ngModel"],["for","1",1,"text-sm","font-semibold"],["mode","decimal","locale","fr-FR","currency","MAD","id","1",3,"ngModelChange","minFractionDigits","maxFractionDigits","prefix","suffix","min","step","placeholder","ngModel"],["for","locale",1,"text-sm","font-semibold"],["id","locale","appendTo","body","filterMatchMode","contains","optionLabel","label",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],["id","locataire","appendTo","body","filterMatchMode","contains","optionLabel","fullName",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],[1,"field","flex","flex-col","gap-2"],["for","6",1,"text-sm","font-semibold"],["id","6","appendTo","body",1,"w-full",3,"ngModelChange","showTime","showSeconds","placeholder","ngModel","dateFormat"],["for","8",1,"text-sm","font-semibold"],["rows","8","type","text","pInputText","","id","8",3,"ngModel","placeholder"],[1,"flex","justify-end","space-x-3","p-4","border-t"],["icon","pi pi-check","styleClass","p-button-primary",3,"click","label"],["icon","pi pi-times","styleClass","p-button-secondary",3,"click","label"]],template:function(i,t){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),l(4),p(5,"translate"),n(),a(6,"button",4),A("click",function(){return t.cancel()}),C(7,"i",5),n()(),C(8,"p-toast"),a(9,"div",6)(10,"p-tabView")(11,"p-tabPanel",7),p(12,"translate"),a(13,"div",8)(14,"div",9)(15,"label",10),l(16),p(17,"translate"),n(),a(18,"input",11),p(19,"translate"),y("ngModelChange",function(_){return b(t.item.nom,_)||(t.item.nom=_),_}),n()(),a(20,"div",9)(21,"label",12),l(22),p(23,"translate"),n(),a(24,"p-inputNumber",13),p(25,"translate"),y("ngModelChange",function(_){return b(t.item.solde,_)||(t.item.solde=_),_}),n()(),a(26,"div",9)(27,"label",14),l(28),p(29,"translate"),n(),a(30,"p-dropdown",15),p(31,"translate"),y("ngModelChange",function(_){return b(t.item.locale,_)||(t.item.locale=_),_}),n()(),a(32,"div",9)(33,"label",14),l(34),p(35,"translate"),n(),a(36,"p-dropdown",16),p(37,"translate"),y("ngModelChange",function(_){return b(t.item.locataire,_)||(t.item.locataire=_),_}),n()(),a(38,"div",17)(39,"label",18),l(40),p(41,"translate"),n(),a(42,"p-calendar",19),p(43,"translate"),y("ngModelChange",function(_){return b(t.item.dateCreation,_)||(t.item.dateCreation=_),_}),n()(),a(44,"div",9)(45,"label",20),l(46),p(47,"translate"),n(),C(48,"textarea",21),p(49,"translate"),n()()()()(),a(50,"div",22)(51,"p-button",23),p(52,"translate"),A("click",function(){return t.save()}),n(),a(53,"p-button",24),p(54,"translate"),A("click",function(){return t.cancel()}),n()()()()),i&2&&(o(4),h(c(5,37,"Compte Instantan\xE9e")),o(7),f("header",c(12,39,"Compte Instantan\xE9e")),o(5),h(c(17,41,"compteCharge.nom")),o(2),f("placeholder",c(19,43,"compteCharge.nom")),x("ngModel",t.item.nom),o(4),h(c(23,45,"compte.solde")),o(2),f("placeholder",c(25,47,"compte.solde")),d("minFractionDigits",2)("maxFractionDigits",4)("prefix","")("suffix"," MAD")("min",0)("step",.01),x("ngModel",t.item.solde),o(4),h(c(29,49,"Locale")),o(2),f("placeholder",c(31,51,"S\xE9lectionner une locale")),d("options",t.locals),x("ngModel",t.item.locale),d("filter",!0)("showClear",!0),o(4),h(c(35,53,"Locataire")),o(2),f("placeholder",c(37,55,"S\xE9lectionner une locataire")),d("options",t.locataires),x("ngModel",t.item.locataire),d("filter",!0)("showClear",!0),o(4),h(c(41,57,"Date de cr\xE9ation")),o(2),f("placeholder",c(43,59,"Date de cr\xE9ation")),f("dateFormat",t.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",t.item.dateCreation),o(4),h(c(47,61,"charge.description")),o(2),f("placeholder",c(49,63,"charge.description")),d("ngModel",t.item.description),o(3),f("label",c(52,65,"validate")),o(2),f("label",c(54,67,"cancel")))},dependencies:[we,U,ye,re,R,q,ce,J,ie,Y,z,j],encapsulation:2})}}return r})();var Cc=()=>({width:"85vw",maxWidth:"1200px"}),fc=()=>[5,10,25,50];function xc(r,v){r&1&&(a(0,"div",4),C(1,"i",5),a(2,"span",6),l(3),p(4,"translate"),n()()),r&2&&(o(3),h(c(4,1,"Compte instantan\xE9e")))}function bc(r,v){if(r&1&&(a(0,"div",9)(1,"div",10)(2,"div",11)(3,"h5",12),C(4,"i",13),l(5," Informations du compte "),n(),a(6,"div",14)(7,"div",15)(8,"div",16)(9,"label",17),l(10),p(11,"translate"),n(),C(12,"input",18),p(13,"translate"),n()(),a(14,"div",19)(15,"div",16)(16,"label",17),l(17),p(18,"translate"),n(),C(19,"input",18),p(20,"translate"),n()(),a(21,"div",19)(22,"div",16)(23,"label",17),l(24),p(25,"translate"),n(),C(26,"input",18),p(27,"translate"),n()(),a(28,"div",19)(29,"label",20),l(30),p(31,"translate"),n(),C(32,"p-inputNumber",21),p(33,"translate"),n(),a(34,"div",19)(35,"label",22),l(36),p(37,"translate"),n(),C(38,"p-inputNumber",23),p(39,"translate"),n(),a(40,"div",19)(41,"label",24),l(42),p(43,"translate"),n(),C(44,"p-inputNumber",25),p(45,"translate"),n(),a(46,"div",19)(47,"label",17),l(48),p(49,"translate"),n(),C(50,"input",18),p(51,"translate"),n()()()()()),r&2){let e=m(2);o(10),h(c(11,28,"Nom de Compte")),o(2),f("placeholder",c(13,30,"Nom de Compte")),d("disabled",!0)("ngModel",e.compte.code),o(5),h(c(18,32,"Locale")),o(2),f("placeholder",c(20,34,"Locale")),d("disabled",!0)("ngModel",e.compte.compteInstantanee==null||e.compte.compteInstantanee.locale==null?null:e.compte.compteInstantanee.locale.label),o(5),h(c(25,36,"CompteInstantanee.locataire")),o(2),f("placeholder",c(27,38,"CompteInstantanee.locataire")),d("disabled",!0)("ngModel",(e.compte.compteInstantanee==null||e.compte.compteInstantanee.locataire==null?null:e.compte.compteInstantanee.locataire.nom)+" "+(e.compte.compteInstantanee==null||e.compte.compteInstantanee.locataire==null?null:e.compte.compteInstantanee.locataire.prenom)),o(4),h(c(31,40,"compte.solde")),o(2),f("placeholder",c(33,42,"compte.solde")),d("disabled",!0)("ngModel",e.compte.solde),o(4),h(c(37,44,"compte.debit")),o(2),f("placeholder",c(39,46,"compte.debit")),d("disabled",!0)("ngModel",e.compte.debit),o(4),h(c(43,48,"compte.credit")),o(2),f("placeholder",c(45,50,"compte.credit")),d("disabled",!0)("ngModel",e.compte.credit),o(4),h(c(49,52,"Date de cr\xE9ation")),o(2),f("placeholder",c(51,54,"Date de cr\xE9ation")),d("disabled",!0)("ngModel",e.compte.dateCreation)}}function yc(r,v){if(r&1){let e=M();a(0,"p-panel",37)(1,"div",14)(2,"div",19)(3,"label",38),l(4),p(5,"translate"),n(),a(6,"p-calendar",39),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.dateFrom,t)||(s.transactionCriteria.dateFrom=t),u(t)}),n()(),a(7,"div",19)(8,"label",38),l(9),p(10,"translate"),n(),a(11,"p-calendar",39),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.dateTo,t)||(s.transactionCriteria.dateTo=t),u(t)}),n()(),a(12,"div",19)(13,"label",38),l(14),p(15,"translate"),n(),a(16,"p-inputNumber",40),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.montantMin,t)||(s.transactionCriteria.montantMin=t),u(t)}),n()(),a(17,"div",19)(18,"label",38),l(19),p(20,"translate"),n(),a(21,"p-inputNumber",40),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.montantMax,t)||(s.transactionCriteria.montantMax=t),u(t)}),n()(),a(22,"div",19)(23,"label",38),l(24),p(25,"translate"),n(),a(26,"input",41),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.description,t)||(s.transactionCriteria.description=t),u(t)}),n()(),a(27,"div",19)(28,"label",38),l(29),p(30,"translate"),n(),a(31,"p-dropdown",42),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.typeTransaction,t)||(s.transactionCriteria.typeTransaction=t),u(t)}),n()(),a(32,"div",19)(33,"label",38),l(34),p(35,"translate"),n(),a(36,"p-dropdown",42),y("ngModelChange",function(t){g(e);let s=m(3);return b(s.transactionCriteria.modePaiement,t)||(s.transactionCriteria.modePaiement=t),u(t)}),n()(),a(37,"div",43)(38,"div",44)(39,"button",45),A("click",function(){g(e);let t=m(3);return u(t.findPaginatedTransactions())}),n(),a(40,"button",46),A("click",function(){g(e);let t=m(3);return u(t.resetTransactionCriteria())}),n()()()()()}if(r&2){let e=m(3);d("showHeader",!1),o(4),h(c(5,21,"Date Min")),o(2),f("dateFormat",e.dateFormat),x("ngModel",e.transactionCriteria.dateFrom),o(3),h(c(10,23,"Date Max")),o(2),f("dateFormat",e.dateFormat),x("ngModel",e.transactionCriteria.dateTo),o(3),h(c(15,25,"Montant Min")),o(2),x("ngModel",e.transactionCriteria.montantMin),o(3),h(c(20,27,"Montant Max")),o(2),x("ngModel",e.transactionCriteria.montantMax),o(3),h(c(25,29,"Description")),o(2),x("ngModel",e.transactionCriteria.description),o(3),h(c(30,31,"Type transaction")),o(2),d("options",e.typeTransactions),x("ngModel",e.transactionCriteria.typeTransaction),d("showClear",!0),o(3),h(c(35,33,"Mode paiement")),o(2),d("options",e.modePaiements),x("ngModel",e.transactionCriteria.modePaiement),d("showClear",!0)}}function wc(r,v){r&1&&(a(0,"tr")(1,"th"),l(2,"Date"),n(),a(3,"th"),l(4,"Credit"),n(),a(5,"th"),l(6,"Debit"),n(),a(7,"th"),l(8,"Description"),n(),a(9,"th"),l(10,"Type transaction"),n(),a(11,"th"),l(12,"Mode paiement"),n(),a(13,"th"),l(14,"Compte source"),n(),a(15,"th"),l(16,"Compte destination"),n()())}function Sc(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.montant," ")}}function Ic(r,v){r&1&&(ee(0),l(1," --- "),te())}function Ac(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.montant," ")}}function Ec(r,v){r&1&&(ee(0),l(1," --- "),te())}function Mc(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.compteSource==null?null:e.compteSource.code," ")}}function Tc(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.compteLocataire==null||e.compteLocataire.locataire==null?null:e.compteLocataire.locataire.fullName," ")}}function Pc(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.compteDestination==null?null:e.compteDestination.code," ")}}function Dc(r,v){if(r&1&&(ee(0),l(1),te()),r&2){let e=m().$implicit;o(),B(" ",e.compteLocataire==null||e.compteLocataire.locataire==null?null:e.compteLocataire.locataire.fullName," ")}}function Vc(r,v){if(r&1&&(a(0,"tr")(1,"td"),l(2),p(3,"date"),n(),a(4,"td",47),E(5,Sc,2,1,"ng-container",48)(6,Ic,2,0,"ng-container",48),n(),a(7,"td",49),E(8,Ac,2,1,"ng-container",48)(9,Ec,2,0,"ng-container",48),n(),a(10,"td"),l(11),p(12,"slice"),n(),a(13,"td"),C(14,"p-tag",50),n(),a(15,"td"),C(16,"p-tag",50),n(),a(17,"td"),E(18,Mc,2,1,"ng-container",48)(19,Tc,2,1,"ng-container",48),n(),a(20,"td"),E(21,Pc,2,1,"ng-container",48)(22,Dc,2,1,"ng-container",48),n()()),r&2){let e=v.$implicit,i=m(3);o(2),h(G(3,16,e.date,i.dateFormatColumn)),o(3),d("ngIf",(e.compteDestination==null?null:e.compteDestination.id)===i.compte.id),o(),d("ngIf",(e.compteDestination==null?null:e.compteDestination.id)!==i.compte.id),o(2),d("ngIf",(e.compteSource==null?null:e.compteSource.id)===i.compte.id),o(),d("ngIf",(e.compteSource==null?null:e.compteSource.id)!==i.compte.id),o(2),h(Wt(12,19,e.description,0,50)),o(3),d("severity",e.typeTransaction==null?null:e.typeTransaction.code)("value",e.typeTransaction==null?null:e.typeTransaction.label)("rounded",!0),o(2),d("severity",e.modePaiement==null?null:e.modePaiement.style)("value",e.modePaiement==null?null:e.modePaiement.label)("rounded",!0),o(2),d("ngIf",(e.compteSource==null?null:e.compteSource.id)!==null),o(),d("ngIf",e.compteLocataire!==null&&(e.compteSource==null?null:e.compteSource.id)===null),o(2),d("ngIf",(e.compteDestination==null?null:e.compteDestination.id)!==null),o(),d("ngIf",e.compteLocataire!==null&&(e.compteDestination==null?null:e.compteDestination.id)===null)}}function Bc(r,v){if(r&1&&(a(0,"tr",51)(1,"td",52),l(2,"Total:"),n(),a(3,"td",53),l(4),n(),a(5,"td",54),l(6),n(),C(7,"td",55),n(),a(8,"tr",56)(9,"td",52),l(10,"Solde :"),n(),a(11,"td",57),l(12),n(),C(13,"td",58),n()),r&2){let e=m(3);o(4),h(e.totalCredits),o(2),h(e.totalDebits),o(6),h(e.compte.soldeInitial+(e.totalCredits-e.totalDebits))}}function Lc(r,v){r&1&&(a(0,"tr")(1,"td",59),C(2,"i",60),l(3," Aucune transaction disponible pour cette banque "),n()())}function Fc(r,v){if(r&1){let e=M();a(0,"div",9)(1,"div",10)(2,"div",26)(3,"div",27)(4,"h5",28),C(5,"i",29),l(6," Historique des transactions "),n(),a(7,"div",30)(8,"button",31),A("click",function(){g(e);let t=m(2);return u(t.showTransactionSearch())}),n(),C(9,"p-splitButton",32),n()(),E(10,yc,41,35,"p-panel",33),a(11,"p-table",34),p(12,"translate"),E(13,wc,17,0,"ng-template",1)(14,Vc,23,23,"ng-template",35)(15,Bc,14,3,"ng-template",3)(16,Lc,4,0,"ng-template",36),n()()()()}if(r&2){let e=m(2);o(9),d("model",e.transactionExcelPdfButons),o(),d("ngIf",e.transactionFindByCriteriaShow),o(),f("currentPageReportTemplate",c(12,8,"Affichage de {first} \xE0 {last} sur {totalRecords} \xE9l\xE9ments")),d("value",e.transactions)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("rowsPerPageOptions",V(10,fc))}}function Wc(r,v){if(r&1&&(a(0,"p-tabView")(1,"p-tabPanel",7),p(2,"translate"),E(3,bc,52,56,"div",8),n(),a(4,"p-tabPanel",7),p(5,"translate"),E(6,Fc,17,11,"div",8),n()()),r&2){let e=m();o(),f("header",c(2,4,"Informations du compte")),o(2),d("ngIf",e.compte),o(),f("header",c(5,6,"Historique des transactions")),o(2),d("ngIf",e.compte)}}function kc(r,v){if(r&1){let e=M();a(0,"div",43)(1,"button",61),A("click",function(){g(e);let t=m();return u(t.hideViewDialog())}),n()()}}var $n=(()=>{class r{constructor(e,i,t,s,_,D,le,de,tt){this.typeTransactionService=e,this.exportService=i,this.service=t,this.transactionService=s,this.typePaiementService=_,this.compteService=D,this.modePaiementService=le,this.locataireService=de,this.typeTransactiontService=tt,this._submitted=!1,this._errorMessages=new Array,this.transactionFindByCriteriaShow=!1,this.transactionExportData=[],this.transactionCriteriaData=[],this._transactionFileName=`Compte Instantanees ${new Date().toLocaleDateString()}`,this.totalCredits=0,this.totalDebits=0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.findPaginatedByCriteria(),this.initTransactionExport(),this.loadReferenceDataForTransaction()}findPaginatedByCriteria(){}loadReferenceDataForTransaction(){this.typeTransactionService.findAll().subscribe(e=>this.typeTransactions=e),this.modePaiementService.findAll().subscribe(e=>this.modePaiements=e)}showTransactionSearch(){this.transactionFindByCriteriaShow=!this.transactionFindByCriteriaShow}resetTransactionCriteria(){this.transactionCriteria=new Mt,this.findPaginatedTransactions()}findPaginatedTransactions(){this.transactionService.findPaginatedByCriteria(this.transactionCriteria).subscribe(e=>{this.compte?this.transactions=e.list.filter(i=>i?.compteSource?.id==this.compte?.id||i?.compteDestination?.id==this.compte?.id):this.transactions=e.list,this.calculateTotals()},e=>console.log(e))}initTransactionExport(){this.transactionExcelPdfButons=[{label:"CSV",icon:"pi pi-file",command:()=>{this.prepareTransactionColumnExport(),this.exportService.exporterCSV(this.transactionCriteriaData,this.transactionExportData,this._transactionFileName)}},{label:"XLS",icon:"pi pi-file-excel",command:()=>{this.prepareTransactionColumnExport(),this.exportService.exporterExcel(this.transactionCriteriaData,this.transactionExportData,this._transactionFileName)}},{label:"PDF",icon:"pi pi-file-pdf",command:()=>{this.prepareTransactionColumnExport(),this.exportService.exporterPdf(this.transactionCriteriaData,this.transactionExportData,this._transactionFileName)}}]}prepareTransactionColumnExport(){this.transactionExportData=this.transactions.map(i=>{let t=0,s=0;i.compteDestination?.id===this.compte.id&&(t=i.montant),i.compteSource?.id===this.compte.id&&(s=i.montant);let _="";i.compteSource?.id!==null&&(_=i.compteSource?.code||""),i.compteLocataire?.id!==null&&i.compteSource?.id===null&&(_=`${i.compteLocataire?.locataire?.fullName||""} `.trim());let D="";return i.compteDestination?.id!==null&&(D=i.compteDestination?.code||""),console.log(i.compteLocataire),i.compteLocataire?.id!==null&&i.compteDestination?.id===null&&(console.log(i.compteLocataire),D=`${i.compteLocataire?.locataire?.fullName||""} `.trim()),{Date:this.datePipe.transform(i.date,this.dateFormatColumn)||"",Cr\u00E9dit:t,D\u00E9bit:s,Description:(i.description||"").slice(0,50),"Type transaction":i.typeTransaction?.label||"","Mode paiement":i.modePaiement?.label||"","Compte source":_,"Compte destination":D}}),this.transactionExportData.push({Date:"TOTAL",Cr\u00E9dit:this.totalCredits,D\u00E9bit:this.totalDebits,Description:"","Type transaction":"","Mode paiement":"","Compte source":"","Compte destination":""});let e=this.compte.soldeInitial+(this.totalCredits-this.totalDebits);this.transactionExportData.push({Date:"SOLDE",Cr\u00E9dit:e,D\u00E9bit:"",Description:"","Type transaction":"","Mode paiement":"","Compte source":"","Compte destination":""}),this.transactionCriteriaData=[{"Date Min":this.transactionCriteria.dateFrom?this.datePipe.transform(this.transactionCriteria.dateFrom,this.dateFormatColumn):I.emptyForExport,"Date Max":this.transactionCriteria.dateTo?this.datePipe.transform(this.transactionCriteria.dateTo,this.dateFormatColumn):I.emptyForExport,"Montant Min":this.transactionCriteria.montantMin||I.emptyForExport,"Montant Max":this.transactionCriteria.montantMax||I.emptyForExport,Description:this.transactionCriteria.description||I.emptyForExport,"Type transaction":this.transactionCriteria.typeTransaction?.label||I.emptyForExport,"Mode paiement":this.transactionCriteria.modePaiement?.label||I.emptyForExport}]}calculateTotals(){this.totalCredits=0,this.totalDebits=0,this.transactions&&this.transactions.length>0&&this.transactions.forEach(e=>{e.typePaiement?.label==="Credit"?(this.totalCredits+=Number(e.montant||0),console.log(e.montant)):e.typePaiement?.label==="Debit"&&(this.totalDebits+=Number(e.montant||0))})}get transactionCriteria(){return this.transactionService.criteria}set transactionCriteria(e){this.transactionService.criteria=e}get typeTransaction(){return this.typeTransactiontService.item}set typeTransaction(e){this.typeTransactiontService.item=e}get typeTransactions(){return this.typeTransactiontService.items}set typeTransactions(e){this.typeTransactiontService.items=e}get compteSource(){return this.compteService.item}set compteSource(e){this.compteService.item=e}get compteSources(){return this.compteService.items}set compteSources(e){this.compteService.items=e}get locataire(){return this.locataireService.item}set locataire(e){this.locataireService.item=e}get locataires(){return this.locataireService.items}set locataires(e){this.locataireService.items=e}get typePaiement(){return this.typePaiementService.item}set typePaiement(e){this.typePaiementService.item=e}get typePaiements(){return this.typePaiementService.items}set typePaiements(e){this.typePaiementService.items=e}get compteDestination(){return this.compteService.item}set compteDestination(e){this.compteService.item=e}get compteDestinations(){return this.compteService.items}set compteDestinations(e){this.compteService.items=e}get modePaiement(){return this.modePaiementService.item}set modePaiement(e){this.modePaiementService.item=e}get modePaiements(){return this.modePaiementService.items}set modePaiements(e){this.modePaiementService.items=e}hideViewDialog(){this.compte=new ae,this.item=new Et,this.viewDialog=!1}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get viewDialog(){return this.service.viewDialog}set viewDialog(e){this.service.viewDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatView}get dateFormatColumn(){return I.dateFormatList}get compte(){return this.compteService.item}set compte(e){this.compteService.item=e}get transactions(){return this.transactionService.items}set transactions(e){this.transactionService.items=e}static{this.\u0275fac=function(i){return new(i||r)(S(ge),S(Ie),S(qt),S(me),S(Be),S(Q),S(ve),S(st),S(ge))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-instantanee-view-admin"]],inputs:{totalCredits:"totalCredits",totalDebits:"totalDebits"},standalone:!1,decls:4,vars:5,consts:[["closable","false","styleClass","p-fluid compte-instantanee-view-dialog",3,"visibleChange","visible","modal"],["pTemplate","header"],["pTemplate","content"],["pTemplate","footer"],[1,"flex","align-items-center"],[1,"pi","pi-wallet","text-primary","text-xl","mr-2"],[1,"font-semibold","text-lg"],[3,"header"],["class","grid",4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card","mb-4"],[1,"mb-3","font-medium"],[1,"pi","pi-info-circle","mr-2"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],[1,"field"],["for","4",1,"text-sm","font-semibold"],["type","text","pInputText","","id","4",1,"w-full",3,"disabled","placeholder","ngModel"],[1,"field","flex","flex-col","gap-2"],["for","1",1,"text-sm","font-semibold"],["id","1",3,"disabled","placeholder","ngModel"],["for","2",1,"text-sm","font-semibold"],["id","2",3,"disabled","placeholder","ngModel"],["for","3",1,"text-sm","font-semibold"],["id","3",3,"disabled","placeholder","ngModel"],[1,"card"],[1,"flex","flex-wrap","gap-2","align-items-center","justify-content-between","mb-2"],[1,"m-0","font-medium"],[1,"pi","pi-history","mr-2"],[1,"flex","align-items-center","gap-2"],["pButton","","pRipple","","label","Recherche","icon","pi pi-search",1,"p-button-outlined",3,"click"],["label","Exporter","icon","pi pi-download","styleClass","p-button-outlined",3,"model"],["styleClass","mb-2",3,"showHeader",4,"ngIf"],["styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","paginator","rows","showCurrentPageReport","currentPageReportTemplate","rowsPerPageOptions"],["pTemplate","body"],["pTemplate","emptymessage"],["styleClass","mb-2",3,"showHeader"],[1,"text-sm","font-medium"],[1,"w-full",3,"ngModelChange","ngModel","dateFormat"],[1,"w-full",3,"ngModelChange","ngModel"],["type","text","pInputText","",1,"w-full",3,"ngModelChange","ngModel"],["optionLabel","label","placeholder","S\xE9lectionner",1,"w-full",3,"ngModelChange","options","ngModel","showClear"],[1,"flex","justify-content-end"],[1,"flex","gap-2"],["pButton","","pRipple","","label","Rechercher","icon","pi pi-search",1,"p-button-primary",3,"click"],["pButton","","pRipple","","label","R\xE9initialiser","icon","pi pi-times",1,"p-button-outlined",3,"click"],[1,"text-green-500","font-medium"],[4,"ngIf"],[1,"text-red-500","font-medium"],[3,"severity","value","rounded"],[1,"text-center","bg-blue-700-400"],["colspan","1",1,"text-left","font-bold"],[1,"text-green-500","font-bold"],[1,"text-orange-500","font-bold"],["colspan","5"],[1,"text-center","bg-gray-400"],[1,"text-orange-500","font-bold","w-2"],["colspan","6"],["colspan","8",1,"text-center","p-4"],[1,"pi","pi-info-circle","text-primary","mr-2"],["pButton","","pRipple","","type","button","icon","pi pi-times","label","Fermer",1,"p-button-outlined",3,"click"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),y("visibleChange",function(_){return b(t.viewDialog,_)||(t.viewDialog=_),_}),E(1,xc,5,3,"ng-template",1)(2,Wc,7,8,"ng-template",2)(3,kc,2,0,"ng-template",3),n()),i&2&&(H(V(4,Cc)),x("visible",t.viewDialog),d("modal",!0))},dependencies:[he,O,ne,se,U,oe,re,R,q,Se,ce,J,ie,Y,Dt,z,gt,be,jt,T,j],styles:["[_nghost-%COMP%]     .compte-instantanee-view-dialog .p-dialog-content{padding:0}[_nghost-%COMP%]     .compte-instantanee-view-dialog .field{margin-bottom:1rem}[_nghost-%COMP%]     .compte-instantanee-view-dialog .field label{display:block;margin-bottom:.5rem;color:#555}[_nghost-%COMP%]     .compte-instantanee-view-dialog .field input, [_nghost-%COMP%]     .compte-instantanee-view-dialog .field textarea{width:100%;background-color:#f9f9f9}[_nghost-%COMP%]     .compte-instantanee-view-dialog .p-tabview .p-tabview-nav{background:#f8f9fa;border-bottom:1px solid #dee2e6;padding:0 1rem}[_nghost-%COMP%]     .compte-instantanee-view-dialog .p-tabview .p-tabview-nav li .p-tabview-nav-link{padding:1rem;font-weight:600}[_nghost-%COMP%]     .compte-instantanee-view-dialog .p-tabview .p-tabview-nav li .p-tabview-nav-link:not(.p-disabled):focus{box-shadow:none}[_nghost-%COMP%]     .compte-instantanee-view-dialog .p-tabview .p-tabview-panels{padding:1.5rem}[_nghost-%COMP%]     .compte-instantanee-view-dialog .card{background-color:#fff;border-radius:.5rem;box-shadow:0 2px 4px #0000000d;padding:1.25rem}[_nghost-%COMP%]     .compte-instantanee-view-dialog .card h5{color:#495057;border-bottom:1px solid #e9ecef;padding-bottom:.75rem}[_nghost-%COMP%]     .compte-instantanee-view-dialog .p-inputnumber .p-inputnumber-input{width:100%}[_nghost-%COMP%]     .compte-instantanee-view-dialog .p-datatable .p-datatable-header{background-color:#f8f9fa;border:1px solid #e9ecef}[_nghost-%COMP%]     .compte-instantanee-view-dialog .p-datatable th{background-color:#f8f9fa;color:#495057;font-weight:600;padding:.75rem 1rem}[_nghost-%COMP%]     .compte-instantanee-view-dialog .p-datatable td{padding:.75rem 1rem}[_nghost-%COMP%]     .compte-instantanee-view-dialog .p-button.p-button-outlined:focus{box-shadow:none}@media screen and (max-width: 768px){[_nghost-%COMP%]     .compte-instantanee-view-dialog .p-tabview .p-tabview-panels{padding:1rem}[_nghost-%COMP%]     .compte-instantanee-view-dialog .card{padding:1rem}}"]})}}return r})();var Nc=()=>({width:"70vw"});function Rc(r,v){r&1&&(a(0,"tr")(1,"th"),l(2,"Date"),n(),a(3,"th"),l(4,"Montant"),n(),a(5,"th"),l(6,"Description"),n(),a(7,"th"),l(8,"Type transaction"),n(),a(9,"th"),l(10,"Mode paiement"),n(),a(11,"th"),l(12,"Type paiement"),n(),a(13,"th"),l(14,"Compte source"),n(),a(15,"th"),l(16,"Compte destination"),n(),a(17,"th"),l(18,"Actions"),n()())}function qc(r,v){if(r&1){let e=M();a(0,"tr")(1,"td"),l(2),p(3,"date"),n(),a(4,"td"),l(5),n(),a(6,"td"),l(7),n(),a(8,"td"),l(9),n(),a(10,"td"),l(11),n(),a(12,"td"),l(13),n(),a(14,"td"),l(15),n(),a(16,"td"),l(17),n(),a(18,"td")(19,"p-button",33),A("click",function(){let t=g(e),s=t.$implicit,_=t.rowIndex,D=m(2);return u(D.deleteTransactions(s,_))}),n(),a(20,"p-button",34),A("click",function(){let t=g(e),s=t.$implicit,_=t.rowIndex,D=m(2);return u(D.editTransactions(s,_))}),n()()()}if(r&2){let e=v.$implicit,i=m(2);o(2),h(G(3,10,e.date,i.dateFormatColumn)),o(3),h(e.montant),o(2),h(e.description),o(2),h(e.typeTransaction==null?null:e.typeTransaction.label),o(2),h(e.modePaiement==null?null:e.modePaiement.label),o(2),h(e.typePaiement==null?null:e.typePaiement.label),o(2),h(e.compteSource==null?null:e.compteSource.id),o(2),h(e.compteDestination==null?null:e.compteDestination.id),o(2),d("rounded",!0),o(),d("rounded",!0)}}function Oc(r,v){if(r&1){let e=M();a(0,"p-tabView")(1,"p-tabPanel",3),p(2,"translate"),a(3,"div",4)(4,"div",5)(5,"label",6),l(6),p(7,"translate"),n(),a(8,"p-inputNumber",7),p(9,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.solde,t)||(s.item.solde=t),u(t)}),n()(),a(10,"div",5)(11,"label",8),l(12),p(13,"translate"),n(),a(14,"p-inputNumber",9),p(15,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.debit,t)||(s.item.debit=t),u(t)}),n()(),a(16,"div",5)(17,"label",10),l(18),p(19,"translate"),n(),a(20,"p-inputNumber",11),p(21,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.credit,t)||(s.item.credit=t),u(t)}),n()(),a(22,"div",5)(23,"label",12),l(24),p(25,"translate"),n(),a(26,"p-dropdown",13),p(27,"translate"),y("ngModelChange",function(t){g(e);let s=m();return b(s.item.locataire,t)||(s.item.locataire=t),u(t)}),n()()()(),a(28,"p-tabPanel",3),p(29,"translate"),a(30,"p-tabView",14),y("activeIndexChange",function(t){g(e);let s=m();return b(s.activeTab,t)||(s.activeTab=t),u(t)}),a(31,"p-tabPanel",15)(32,"div",16)(33,"div",5)(34,"label",6),l(35,"Date"),n(),a(36,"p-calendar",17),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.date,t)||(s.transactionsElement.date=t),u(t)}),n()(),a(37,"div",5)(38,"label",8),l(39,"Montant"),n(),a(40,"p-inputNumber",18),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.montant,t)||(s.transactionsElement.montant=t),u(t)}),n()(),a(41,"div",5)(42,"label",10),l(43,"Description"),n(),a(44,"input",19),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.description,t)||(s.transactionsElement.description=t),u(t)}),n()(),a(45,"div",5)(46,"label",20),l(47,"Type transaction"),n(),a(48,"p-dropdown",21),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.typeTransaction,t)||(s.transactionsElement.typeTransaction=t),u(t)}),n()(),a(49,"div",5)(50,"label",20),l(51,"Mode paiement"),n(),a(52,"p-dropdown",22),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.modePaiement,t)||(s.transactionsElement.modePaiement=t),u(t)}),n()(),a(53,"div",5)(54,"label",20),l(55,"Type paiement"),n(),a(56,"p-dropdown",23),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.typePaiement,t)||(s.transactionsElement.typePaiement=t),u(t)}),n()(),a(57,"div",5)(58,"label",20),l(59,"Compte source"),n(),a(60,"p-dropdown",24),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.compteSource,t)||(s.transactionsElement.compteSource=t),u(t)}),n()(),a(61,"div",5)(62,"label",20),l(63,"Compte destination"),n(),a(64,"p-dropdown",25),y("ngModelChange",function(t){g(e);let s=m();return b(s.transactionsElement.compteDestination,t)||(s.transactionsElement.compteDestination=t),u(t)}),n()(),a(65,"div",26)(66,"button",27),A("click",function(){g(e);let t=m();return u(t.addTransactions())}),C(67,"i",28),l(68," OK "),n()()()(),a(69,"p-tabPanel",3)(70,"div",29)(71,"p-table",30),E(72,Rc,19,0,"ng-template",31)(73,qc,21,13,"ng-template",32),n()()()()()()}if(r&2){let e=m();o(),f("header",c(2,49,"CompteInstantanee.tabPan")),o(5),h(c(7,51,"CompteInstantanee.solde")),o(2),f("placeholder",c(9,53,"CompteInstantanee.solde")),x("ngModel",e.item.solde),o(4),h(c(13,55,"CompteInstantanee.debit")),o(2),f("placeholder",c(15,57,"CompteInstantanee.debit")),x("ngModel",e.item.debit),o(4),h(c(19,59,"CompteInstantanee.credit")),o(2),f("placeholder",c(21,61,"CompteInstantanee.credit")),x("ngModel",e.item.credit),o(4),h(c(25,63,"CompteInstantanee.locataire")),o(2),f("placeholder",c(27,65,"CompteInstantanee.locataire")),d("options",e.locataires),x("ngModel",e.item.locataire),d("filter",!0)("showClear",!0),o(2),f("header",c(29,67,"CompteInstantanee.transactions")),o(2),x("activeIndex",e.activeTab),o(6),f("dateFormat",e.dateFormat),d("showTime",!0)("showSeconds",!1),x("ngModel",e.transactionsElement.date),d("showIcon",!0),o(4),x("ngModel",e.transactionsElement.montant),o(4),x("ngModel",e.transactionsElement.description),o(4),d("options",e.typeTransactions),x("ngModel",e.transactionsElement.typeTransaction),d("filter",!0)("showClear",!0),o(4),d("options",e.modePaiements),x("ngModel",e.transactionsElement.modePaiement),d("filter",!0)("showClear",!0),o(4),d("options",e.typePaiements),x("ngModel",e.transactionsElement.typePaiement),d("filter",!0)("showClear",!0),o(4),d("options",e.compteSources),x("ngModel",e.transactionsElement.compteSource),d("filter",!0)("showClear",!0),o(4),d("options",e.compteDestinations),x("ngModel",e.transactionsElement.compteDestination),d("filter",!0)("showClear",!0),o(5),X("header","Liste ",(e.item.transactions==null?null:e.item.transactions.length)>0?"("+(e.item.transactions==null?null:e.item.transactions.length)+")":"",""),o(2),d("value",e.item.transactions)("scrollable",!0)}}function Uc(r,v){if(r&1){let e=M();a(0,"div",35)(1,"button",36),p(2,"translate"),A("click",function(){g(e);let t=m();return u(t.edit())}),C(3,"i",37),l(4),p(5,"translate"),n(),a(6,"button",38),A("click",function(){g(e);let t=m();return u(t.hideEditDialog())}),C(7,"i",39),l(8),p(9,"translate"),n()()}r&2&&(o(),f("label",c(2,3,"validate")),o(3),B(" ",c(5,5,"validate")," "),o(4),B(" ",c(9,7,"cancel")," "))}var ea=(()=>{class r{constructor(e,i,t,s,_,D,le,de){this.service=e,this.transactionService=i,this.typePaiementService=t,this.compteService=s,this.modePaiementService=_,this.locataireService=D,this.typeTransactiontService=le,this.platformId=de,this._submitted=!1,this._errorMessages=new Array,this._activeTab=0,this.transactionsIndex=-1,this._transactionsElement=new Ae,this._validLocataireCode=!0,this._validLocataireNom=!0,this._validLocatairePrenom=!0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.transactionsElement.typeTransaction=new ut,this.typeTransactiontService.findAll().subscribe(e=>this.typeTransactions=e),this.transactionsElement.modePaiement=new Ne,this.modePaiementService.findAll().subscribe(e=>this.modePaiements=e),this.transactionsElement.typePaiement=new je,this.typePaiementService.findAll().subscribe(e=>this.typePaiements=e),this.transactionsElement.compteSource=new ae,this.compteService.findAll().subscribe(e=>this.compteSources=e),this.transactionsElement.compteDestination=new ae,this.compteService.findAll().subscribe(e=>this.compteDestinations=e),this.locataireService.findAll().subscribe(e=>this.locataires=e)}prepareEdit(){}edit(){this.submitted=!0,this.prepareEdit(),this.validateForm(),this.errorMessages.length===0?this.editWithShowOption(!1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs sur le formulaire"})}editWithShowOption(e){this.service.edit().subscribe(i=>{let t=this.items.findIndex(s=>s.id===this.item.id);this.items[t]=i,this.editDialog=!1,this.submitted=!1,this.item=new Et},i=>{console.log(i)})}hideEditDialog(){this.editDialog=!1,this.setValidation(!0)}validateTransactions(){this.errorMessages=new Array}setValidation(e){}addTransactions(){this.item.transactions==null&&(this.item.transactions=new Array),this.validateTransactions(),this.errorMessages.length===0?(this.transactionsIndex==-1?this.item.transactions.push(K({},this.transactionsElement)):this.item.transactions[this.transactionsIndex]=this.transactionsElement,this.transactionsElement=new Ae,this.transactionsIndex=-1):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Merci de corrig\xE9 les erreurs suivant : "+this.errorMessages})}deleteTransactions(e,i){this.item.transactions.splice(i,1)}editTransactions(e,i){this.transactionsElement=K({},e),this.transactionsIndex=i,this.activeTab=0}validateForm(){this.errorMessages=new Array}openCreateCompteSource(e){return P(this,null,function*(){(yield this.roleService.isPermitted("Compte","edit"))?(this.compteSource=new ae,this.createCompteSourceDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}openCreateTypePaiement(e){return P(this,null,function*(){(yield this.roleService.isPermitted("TypePaiement","edit"))?(this.typePaiement=new je,this.createTypePaiementDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}openCreateCompteDestination(e){return P(this,null,function*(){(yield this.roleService.isPermitted("Compte","edit"))?(this.compteDestination=new ae,this.createCompteDestinationDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}openCreateModePaiement(e){return P(this,null,function*(){(yield this.roleService.isPermitted("ModePaiement","edit"))?(this.modePaiement=new Ne,this.createModePaiementDialog=!0):this.messageService.add({severity:"error",summary:"erreur",detail:"probl\xE8me de permission"})})}get typeTransaction(){return this.typeTransactiontService.item}set typeTransaction(e){this.typeTransactiontService.item=e}get typeTransactions(){return this.typeTransactiontService.items}set typeTransactions(e){this.typeTransactiontService.items=e}get createTypeTransactionDialog(){return this.typeTransactiontService.createDialog}set createTypeTransactionDialog(e){this.typeTransactiontService.createDialog=e}get compteSource(){return this.compteService.item}set compteSource(e){this.compteService.item=e}get compteSources(){return this.compteService.items}set compteSources(e){this.compteService.items=e}get createCompteSourceDialog(){return this.compteService.createDialog}set createCompteSourceDialog(e){this.compteService.createDialog=e}get locataire(){return this.locataireService.item}set locataire(e){this.locataireService.item=e}get locataires(){return this.locataireService.items}set locataires(e){this.locataireService.items=e}get createLocataireDialog(){return this.locataireService.createDialog}set createLocataireDialog(e){this.locataireService.createDialog=e}get typePaiement(){return this.typePaiementService.item}set typePaiement(e){this.typePaiementService.item=e}get typePaiements(){return this.typePaiementService.items}set typePaiements(e){this.typePaiementService.items=e}get createTypePaiementDialog(){return this.typePaiementService.createDialog}set createTypePaiementDialog(e){this.typePaiementService.createDialog=e}get compteDestination(){return this.compteService.item}set compteDestination(e){this.compteService.item=e}get compteDestinations(){return this.compteService.items}set compteDestinations(e){this.compteService.items=e}get createCompteDestinationDialog(){return this.compteService.createDialog}set createCompteDestinationDialog(e){this.compteService.createDialog=e}get modePaiement(){return this.modePaiementService.item}set modePaiement(e){this.modePaiementService.item=e}get modePaiements(){return this.modePaiementService.items}set modePaiements(e){this.modePaiementService.items=e}get createModePaiementDialog(){return this.modePaiementService.createDialog}set createModePaiementDialog(e){this.modePaiementService.createDialog=e}get transactionsElement(){return this._transactionsElement==null&&(this._transactionsElement=new Ae),this._transactionsElement}set transactionsElement(e){this._transactionsElement=e}get validLocataireCode(){return this._validLocataireCode}set validLocataireCode(e){this._validLocataireCode=e}get validLocataireNom(){return this._validLocataireNom}set validLocataireNom(e){this._validLocataireNom=e}get validLocatairePrenom(){return this._validLocatairePrenom}set validLocatairePrenom(e){this._validLocatairePrenom=e}get items(){return this.service.items}set items(e){this.service.items=e}get item(){return this.service.item}set item(e){this.service.item=e}get editDialog(){return this.service.editDialog}set editDialog(e){this.service.editDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatCreate}get dateFormatColumn(){return I.dateFormatCreate}get submitted(){return this._submitted}set submitted(e){this._submitted=e}get errorMessages(){return this._errorMessages==null&&(this._errorMessages=new Array),this._errorMessages}set errorMessages(e){this._errorMessages=e}get validate(){return this.service.validate}set validate(e){this.service.validate=e}get activeTab(){return this._activeTab}set activeTab(e){this._activeTab=e}static{this.\u0275fac=function(i){return new(i||r)(S(qt),S(me),S(Be),S(Q),S(ve),S(st),S(ge),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-instantanee-edit-admin"]],standalone:!1,decls:4,vars:11,consts:[["styleClass","p-fluid",3,"visibleChange","visible","header","modal","maximizable","draggable","resizable"],["pTemplate","content"],["pTemplate","footer"],[3,"header"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","p-4"],[1,"flex","flex-col","gap-2"],["for","1",1,"text-sm","font-semibold"],["id","1",3,"ngModelChange","placeholder","ngModel"],["for","2",1,"text-sm","font-semibold"],["id","2",3,"ngModelChange","placeholder","ngModel"],["for","3",1,"text-sm","font-semibold"],["id","3",3,"ngModelChange","placeholder","ngModel"],["for","4",1,"text-sm","font-semibold"],["appendTo","body","id","4","filterMatchMode","contains","optionLabel","code",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],[3,"activeIndexChange","activeIndex"],["header","Cre\u0301ation"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","p-4"],["appendTo","body","id","1","placeholder","Date",1,"w-full",3,"ngModelChange","showTime","showSeconds","ngModel","dateFormat","showIcon"],["id","montant","placeholder","Montant",3,"ngModelChange","ngModel"],["type","text","pInputText","","placeholder","Description","id","3","autofocus","",3,"ngModelChange","ngModel"],[1,"text-sm","font-semibold"],["appendTo","body","id","4","filterMatchMode","contains","optionLabel","label","placeholder","Type transaction",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],["appendTo","body","id","5","filterMatchMode","contains","optionLabel","label","placeholder","Mode paiement",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],["appendTo","body","id","6","filterMatchMode","contains","optionLabel","label","placeholder","Type paiement",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],["appendTo","body","id","7","filterMatchMode","contains","optionLabel","id","placeholder","Compte source",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],["appendTo","body","id","8","filterMatchMode","contains","optionLabel","id","placeholder","Compte destination",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear"],[1,"flex","justify-end","md:col-span-3"],["pButton","","type","button",1,"bg-green-500","text-white","px-4","py-2","rounded-md","hover:bg-green-700",3,"click"],[1,"pi","pi-plus"],[1,"card","p-4"],["scrollHeight","200px",3,"value","scrollable"],["pTemplate","header"],["pTemplate","body"],["pButton","","type","button","icon","pi pi-times","severity","danger",1,"mr-2",3,"click","rounded"],["pButton","","type","button","icon","pi pi-pencil","severity","success",1,"mr-2",3,"click","rounded"],[1,"flex","justify-end","space-x-3","p-4"],[1,"bg-blue-500","text-white","px-4","py-2","rounded-md","hover:bg-primary",3,"click","label"],[1,"pi","pi-check"],[1,"border","border-gray-400","text-gray-600","hover:bg-gray-200","px-4","py-2","rounded-md",3,"click"],[1,"pi","pi-times"]],template:function(i,t){i&1&&(a(0,"p-dialog",0),p(1,"translate"),y("visibleChange",function(_){return b(t.editDialog,_)||(t.editDialog=_),_}),E(2,Oc,74,69,"ng-template",1)(3,Uc,10,9,"ng-template",2),n()),i&2&&(H(V(10,Nc)),f("header",c(1,8,"CompteInstantanee.tabPan")),x("visible",t.editDialog),d("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!1))},dependencies:[O,ne,se,U,oe,ye,re,R,q,ce,J,ie,Y,z,T,j],encapsulation:2})}}return r})();var zc=()=>["solde","debit","credit","locatairecode"],Gc=()=>[10,25,50],Qc=()=>({width:"450px"});function Kc(r,v){if(r&1){let e=M();a(0,"button",17),p(1,"translate"),A("click",function(){g(e);let t=m(2);return u(t.showSearch())}),n()}if(r&2){let e=m(2);X("label"," ",c(1,4,"search"),""),X("icon","pi pi-",e.findByCriteriaShow?"angle-down":"angle-right","")}}function Xc(r,v){if(r&1&&(a(0,"div",18),C(1,"p-splitButton",19),p(2,"translate"),n()),r&2){let e=m(2);o(),X("label"," ",c(2,3,"export"),""),d("model",e.excelPdfButons)}}function Yc(r,v){if(r&1){let e=M();a(0,"div",20)(1,"div",21)(2,"label",22),l(3),p(4,"translate"),n(),a(5,"p-inputNumber",23),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.soldeMin,t)||(s.criteria.soldeMin=t),u(t)}),n()(),a(6,"div",21)(7,"label",24),l(8),p(9,"translate"),n(),a(10,"p-inputNumber",25),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.soldeMax,t)||(s.criteria.soldeMax=t),u(t)}),n()(),a(11,"div",21)(12,"label",26),l(13),p(14,"translate"),n(),a(15,"p-inputNumber",27),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.debitMin,t)||(s.criteria.debitMin=t),u(t)}),n()(),a(16,"div",21)(17,"label",28),l(18),p(19,"translate"),n(),a(20,"p-inputNumber",29),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.debitMax,t)||(s.criteria.debitMax=t),u(t)}),n()(),a(21,"div",21)(22,"label",30),l(23),p(24,"translate"),n(),a(25,"p-inputNumber",31),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.creditMin,t)||(s.criteria.creditMin=t),u(t)}),n()(),a(26,"div",21)(27,"label",32),l(28),p(29,"translate"),n(),a(30,"p-inputNumber",33),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.creditMax,t)||(s.criteria.creditMax=t),u(t)}),n()(),a(31,"div",21)(32,"label",34),l(33),p(34,"translate"),n(),a(35,"p-dropdown",35),p(36,"translate"),y("ngModelChange",function(t){g(e);let s=m(2);return b(s.criteria.locataire,t)||(s.criteria.locataire=t),u(t)}),n()(),a(37,"div",36)(38,"button",37),p(39,"translate"),A("click",function(){g(e);let t=m(2);return u(t.findPaginatedByCriteria())}),C(40,"i",38),l(41),p(42,"translate"),n()()()}if(r&2){let e=m(2);o(3),h(c(4,20,"CompteInstantanee.soldeMin")),o(2),x("ngModel",e.criteria.soldeMin),o(3),h(c(9,22,"CompteInstantanee.soldeMax")),o(2),x("ngModel",e.criteria.soldeMax),o(3),h(c(14,24,"CompteInstantanee.debitMin")),o(2),x("ngModel",e.criteria.debitMin),o(3),h(c(19,26,"CompteInstantanee.debitMax")),o(2),x("ngModel",e.criteria.debitMax),o(3),h(c(24,28,"CompteInstantanee.creditMin")),o(2),x("ngModel",e.criteria.creditMin),o(3),h(c(29,30,"CompteInstantanee.creditMax")),o(2),x("ngModel",e.criteria.creditMax),o(3),h(c(34,32,"CompteInstantanee.locataire")),o(2),f("placeholder",c(36,34,"CompteInstantanee.locataire")),d("options",e.locataires),x("ngModel",e.criteria.locataire),d("filter",!0)("showClear",!0),o(3),f("label",c(39,36,"validate")),o(3),B(" ",c(42,38,"validate")," ")}}function Jc(r,v){if(r&1){let e=M();a(0,"div",39)(1,"h5",40),l(2),p(3,"translate"),n(),a(4,"span",41)(5,"p-iconfield",42),C(6,"p-inputicon",43),a(7,"input",44),p(8,"translate"),A("input",function(t){g(e),m();let s=Oe(9);return u(s.filterGlobal(t.target.value,"contains"))}),n()()()()}r&2&&(o(2),h(c(3,2,"Liste des comptes instantan\xE9s")),o(5),f("placeholder",c(8,4,"searchInput")))}function Zc(r,v){r&1&&(a(0,"tr")(1,"th",45),C(2,"p-tableHeaderCheckbox"),n(),a(3,"th",46)(4,"div",47)(5,"span",48),l(6),p(7,"translate"),n()()(),a(8,"th",49)(9,"div",47)(10,"span",48),l(11),p(12,"translate"),n()()(),a(13,"th",50)(14,"div",47)(15,"span",48),l(16),p(17,"translate"),n()()(),a(18,"th",51)(19,"div",47)(20,"span",48),l(21),p(22,"translate"),n()()(),a(23,"th")(24,"div",47)(25,"span",48),l(26),p(27,"translate"),n()()(),a(28,"th"),l(29,"Actions"),n()()),r&2&&(o(6),h(c(7,5,"Nom")),o(5),h(c(12,7,"CompteInstantanee.solde")),o(5),h(c(17,9,"C I D")),o(5),h(c(22,11,"C I E")),o(5),h(c(27,13,"Date de cr\xE9ation")))}function $c(r,v){if(r&1){let e=M();a(0,"button",55),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.view(t))}),n()}}function em(r,v){if(r&1){let e=M();a(0,"button",56),A("click",function(){g(e);let t=m().$implicit,s=m(2);return u(s.delete(t))}),n()}}function tm(r,v){if(r&1&&(a(0,"tr")(1,"td"),C(2,"p-tableCheckbox",52),n(),a(3,"td"),l(4),n(),a(5,"td"),l(6),n(),a(7,"td"),l(8),n(),a(9,"td"),l(10),n(),a(11,"td"),l(12),p(13,"date"),n(),a(14,"td"),E(15,$c,1,0,"button",53)(16,em,1,0,"button",54),n()()),r&2){let e=v.$implicit,i=m(2);o(2),d("value",e),o(2),h(e.code),o(2),h(e.solde),o(2),h(e.debit),o(2),h(e.credit),o(2),h(G(13,8,e==null?null:e.dateCreation,"dd/MM/yyyy")),o(3),d("ngIf",i.viewActionIsValid),o(),d("ngIf",i.deleteActionIsValid)}}function im(r,v){if(r&1){let e=M();a(0,"p-paginator",57),A("onPageChange",function(t){g(e);let s=m(2);return u(s.onPage(t))}),n(),a(1,"div",58),l(2),n()}if(r&2){let e=m(2);d("rows",10)("totalRecords",e.totalRecords),o(2),$e(" En totale il ",(e.items&&e.totalRecords==1,"y a")," ",e.items?e.totalRecords:0," ",e.items?e.totalRecords==1?"compte instantanee":"compte instantanees":0,". ")}}function nm(r,v){r&1&&C(0,"app-compte-instantanee-create-admin")}function am(r,v){r&1&&C(0,"app-compte-instantanee-edit-admin")}function rm(r,v){if(r&1&&C(0,"app-compte-instantanee-view-admin",59),r&2){let e=m(2);d("totalCredits",e.totalCredits)("totalDebits",e.totalDebits)}}function om(r,v){if(r&1){let e=M();a(0,"div",3)(1,"div",4),C(2,"p-toast"),a(3,"div",5)(4,"p-toolbar",6),E(5,Kc,2,6,"ng-template",7)(6,Xc,3,5,"ng-template",8),n(),E(7,Yc,43,40,"div",9),a(8,"p-table",10,0),p(10,"translate"),y("selectionChange",function(t){g(e);let s=m();return b(s.selections,t)||(s.selections=t),u(t)}),E(11,Jc,9,6,"ng-template",11)(12,Zc,30,15,"ng-template",12)(13,tm,17,11,"ng-template",13)(14,im,3,5,"ng-template",14),n()(),E(15,nm,1,0,"app-compte-instantanee-create-admin",15)(16,am,1,0,"app-compte-instantanee-edit-admin",15)(17,rm,1,2,"app-compte-instantanee-view-admin",16),C(18,"p-confirmDialog"),n()()}if(r&2){let e=m();o(7),d("ngIf",e.findByCriteriaShow),o(),f("currentPageReportTemplate",c(10,16,"les \xE9l\xE9ments de {first} \xE0 {last} sur {totalRecords} ")),d("value",e.comptes)("columns",e.cols)("rows",8)("paginator",!1)("globalFilterFields",V(18,zc)),x("selection",e.selections),d("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",V(19,Gc)),o(7),d("ngIf",e.createDialog&&e.createActionIsValid),o(),d("ngIf",e.editDialog&&e.editActionIsValid),o(),d("ngIf",e.viewDialog&&e.viewActionIsValid),o(),H(V(20,Qc))}}function sm(r,v){r&1&&(a(0,"p-card",60)(1,"p",61),l(2," You don't have permission to access ! "),n()())}var ta=(()=>{class r{constructor(e,i,t,s,_,D,le,de){this.service=e,this.transactionService=i,this.typePaiementService=t,this.compteService=s,this.modePaiementService=_,this.locataireService=D,this.typeTransactiontService=le,this.platformId=de,this.fileName="CompteInstantanee",this.findByCriteriaShow=!1,this.cols=[],this.exportData=[],this.criteriaData=[],this._totalRecords=0,this.enableSecurity=!1,this.totalCredits=0,this.totalDebits=0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.authService=w.injector.get(ot),this.exportService=w.injector.get(Ie)}ngOnInit(){this.findPaginatedByCriteria(),this.initExport(),this.initCol(),this.loadLocataire()}onExcelFileSelected(e){let i=e.target;i.files&&i.files.length>0&&(this.excelFile=i.files[0])}importExcel(){this.excelFile&&this.service.importExcel(this.excelFile).subscribe(e=>{this.items=e,this.messageService.add({severity:"success",summary:"Success",detail:"File uploaded successfully!",life:3e3})},e=>{this.messageService.add({severity:"error",summary:"Error",detail:"File uploaded with Error!",life:3e3})})}findPaginatedByCriteria(){this.compteService.findAllByCompteInstantaneeNotNull().subscribe(e=>{this.comptes=e,this.totalRecords=e.length,this.selections=new Array},e=>console.log(e))}onPage(e){this.criteria.page=e.page,this.criteria.maxResults=e.rows,this.findPaginatedByCriteria()}edit(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.item=i,console.log(i),this.editDialog=!0})})}view(e){return P(this,null,function*(){this.compte=e,this.viewDialog=!0,this.transactionService.findPaginatedByCriteria(this.transactionService.criteria).subscribe(i=>{let s=i.list.filter(le=>le.compteSource?.id===e.id||le.compteDestination?.id===e.id),_=0,D=0;s.forEach(le=>{let de=Number(le.montant||0);le.compteDestination?.id===e.id?_+=de:le.compteSource?.id===e.id&&(D+=de)}),this.transactionService.items=s,this.totalCredits=_,this.totalDebits=D})})}openCreate(){return P(this,null,function*(){this.item=new Et,this.createDialog=!0})}deleteMultiple(){return P(this,null,function*(){this.confirmationService.confirm({message:"Voulez-vous supprimer ces \xE9l\xE9ments ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Ok"},accept:()=>{this.service.deleteMultiple().subscribe(()=>{for(let e of this.selections){let i=this.items.findIndex(t=>t.id===e.id);this.items.splice(i,1)}this.selections=new Array,this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Les \xE9l\xE9ments s\xE9lectionn\xE9s ont \xE9t\xE9 supprim\xE9s",life:3e3})},e=>console.log(e))}})})}isSelectionDisabled(){return this.selections==null||this.selections.length==0}delete(e){return P(this,null,function*(){this.confirmationService.confirm({message:"Voulez-vous supprimer cet \xE9l\xE9ment ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Ok"},accept:()=>{this.compteService.delete(e).subscribe(i=>{i>0&&(this.findPaginatedByCriteria(),this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Element Supprim\xE9",life:3e3}))},i=>console.log(i))}})})}duplicate(e){return P(this,null,function*(){this.service.findByIdWithAssociatedList(e).subscribe(i=>{this.initDuplicate(i),this.item=i,this.item.id=null,this.createDialog=!0})})}initExport(){this.excelPdfButons=[{label:"CSV",icon:"pi pi-file",command:()=>{this.prepareColumnExport(),this.exportService.exporterCSV(this.criteriaData,this.exportData,this.fileName)}},{label:"XLS",icon:"pi pi-file-excel",command:()=>{this.prepareColumnExport(),this.exportService.exporterExcel(this.criteriaData,this.exportData,this.fileName)}},{label:"PDF",icon:"pi pi-file-pdf",command:()=>{this.prepareColumnExport(),this.exportService.exporterPdf(this.criteriaData,this.exportData,this.fileName)}}]}exportPdf(e){this.service.exportPdf(e).subscribe(i=>{let t=new Blob([i],{type:"application/pdf"}),s=window.URL.createObjectURL(t),_=document.createElement("a");_.href=s,_.download=this.pdfName,_.setAttribute("target","_blank"),_.click(),window.URL.revokeObjectURL(s)},i=>{console.error(i)})}showSearch(){this.findByCriteriaShow=!this.findByCriteriaShow}update(){this.service.edit().subscribe(e=>{let i=this.items.findIndex(t=>t.id===this.item.id);this.items[i]=e,this.editDialog=!1,this.item=new Et},e=>{console.log(e)})}save(){this.service.save().subscribe(e=>{e!=null?(this.items.push(K({},e)),this.createDialog=!1,this.item=new Et):this.messageService.add({severity:"error",summary:"Erreurs",detail:"Element existant"})},e=>{console.log(e)})}initCol(){this.cols=[{field:"solde",header:"Solde"},{field:"debit",header:"Debit"},{field:"credit",header:"Credit"},{field:"locataire?.code",header:"Locataire"}]}loadLocataire(){return P(this,null,function*(){this.locataireService.findAllOptimized().subscribe(e=>this.locataires=e,e=>console.log(e))})}initDuplicate(e){e.transactions!=null&&e.transactions.forEach(i=>{i.compteDestination=null,i.id=null})}prepareColumnExport(){this.service.findByCriteria(this.criteria).subscribe(e=>{this.exportData=e.map(i=>({Solde:i.solde,Debit:i.debit,Credit:i.credit,Locataire:i.locataire?.code})),this.criteriaData=[{"Solde Min":this.criteria.soldeMin?this.criteria.soldeMin:I.emptyForExport,"Solde Max":this.criteria.soldeMax?this.criteria.soldeMax:I.emptyForExport,"Debit Min":this.criteria.debitMin?this.criteria.debitMin:I.emptyForExport,"Debit Max":this.criteria.debitMax?this.criteria.debitMax:I.emptyForExport,"Credit Min":this.criteria.creditMin?this.criteria.creditMin:I.emptyForExport,"Credit Max":this.criteria.creditMax?this.criteria.creditMax:I.emptyForExport}]})}get items(){return this.service.items}set items(e){this.service.items=e}get selections(){return this.service.selections}set selections(e){this.service.selections=e}get item(){return this.service.item}set item(e){this.service.item=e}get createDialog(){return this.service.createDialog}set createDialog(e){this.service.createDialog=e}get editDialog(){return this.service.editDialog}set editDialog(e){this.service.editDialog=e}get viewDialog(){return this.service.viewDialog}set viewDialog(e){this.service.viewDialog=e}get criteria(){return this.service.criteria}set criteria(e){this.service.criteria=e}get dateFormat(){return I.dateFormatList}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e}get pdfName(){return this._pdfName}set pdfName(e){this._pdfName=e}get createActionIsValid(){return this.service.createActionIsValid}set createActionIsValid(e){this.service.createActionIsValid=e}get editActionIsValid(){return this.service.editActionIsValid}set editActionIsValid(e){this.service.editActionIsValid=e}get listActionIsValid(){return this.service.listActionIsValid}set listActionIsValid(e){this.service.listActionIsValid=e}get deleteActionIsValid(){return this.service.deleteActionIsValid}set deleteActionIsValid(e){this.service.deleteActionIsValid=e}get viewActionIsValid(){return this.service.viewActionIsValid}set viewActionIsValid(e){this.service.viewActionIsValid=e}get duplicateActionIsValid(){return this.service.duplicateActionIsValid}set duplicateActionIsValid(e){this.service.duplicateActionIsValid=e}get createAction(){return this.service.createAction}set createAction(e){this.service.createAction=e}get listAction(){return this.service.listAction}set listAction(e){this.service.listAction=e}get editAction(){return this.service.editAction}set editAction(e){this.service.editAction=e}get deleteAction(){return this.service.deleteAction}set deleteAction(e){this.service.deleteAction=e}get viewAction(){return this.service.viewAction}set viewAction(e){this.service.viewAction=e}get duplicateAction(){return this.service.duplicateAction}set duplicateAction(e){this.service.duplicateAction=e}get entityName(){return this.service.entityName}set entityName(e){this.service.entityName=e}get comptes(){return this.compteService.items}set comptes(e){this.compteService.items=e}get compte(){return this.compteService.item}set compte(e){this.compteService.item=e}static{this.\u0275fac=function(i){return new(i||r)(S(qt),S(me),S(Be),S(Q),S(ve),S(st),S(ge),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-compte-instantanee-list-admin"]],standalone:!1,decls:2,vars:2,consts:[["dt",""],["class","grid",4,"ngIf"],["header","Permission not allowed",4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 border border-surface rounded-lg",4,"ngIf"],["dataKey","id","styleClass","p-datatable-customers","selectionMode","multiple",3,"selectionChange","value","columns","rows","paginator","globalFilterFields","selection","rowHover","currentPageReportTemplate","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[4,"ngIf"],[3,"totalCredits","totalDebits",4,"ngIf"],["pButton","","pRipple","",1,"p-button-secondary","mr-2","mb-2",3,"click","label","icon"],[1,"flex"],["icon","pi pi-download","styleClass","p-button-secondary",3,"label","model"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","p-4","border","border-surface","rounded-lg"],[1,"flex","flex-col","gap-2"],["for","1-1",1,"text-sm","font-semibold"],["mode","decimal","id","1-1",3,"ngModelChange","ngModel"],["for","1-2",1,"text-sm","font-semibold"],["mode","decimal","id","1-2",3,"ngModelChange","ngModel"],["for","2-1",1,"text-sm","font-semibold"],["mode","decimal","id","2-1",3,"ngModelChange","ngModel"],["for","2-2",1,"text-sm","font-semibold"],["mode","decimal","id","2-2",3,"ngModelChange","ngModel"],["for","3-1",1,"text-sm","font-semibold"],["mode","decimal","id","3-1",3,"ngModelChange","ngModel"],["for","3-2",1,"text-sm","font-semibold"],["mode","decimal","id","3-2",3,"ngModelChange","ngModel"],["for","4-2",1,"text-sm","font-semibold"],["id","4","optionLabel","code",1,"w-full",3,"ngModelChange","options","ngModel","filter","showClear","placeholder"],[1,"col-span-full","flex","justify-end","mt-4"],["pButton","","pRipple","",1,"px-4","py-2","rounded-md",3,"click","label"],[1,"pi","pi-sort-amount-down"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","p-2","gap-4"],[1,"text-center","md:text-left"],[1,"relative","w-full","md:w-auto"],["iconPosition","left",1,"w-full","md:w-auto"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full","md:w-72","border","border-gray-300","rounded-md","p-2","focus:ring","focus:ring-blue-300",3,"input","placeholder"],[2,"width","3rem"],["pSortableColumn","nom"],[1,"p-d-flex","p-jc-between","p-ai-center"],[1,"mr-2"],["pSortableColumn","solde"],["pSortableColumn","debit"],["pSortableColumn","credit"],[3,"value"],["pButton","","pRipple","","icon","pi pi-list","class","p-button-rounded p-button-secondary mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash","class","p-button-rounded p-button-danger mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-list",1,"p-button-rounded","p-button-secondary","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger","mr-2",3,"click"],[3,"onPageChange","rows","totalRecords"],[1,"p-d-flex","p-ai-center","p-jc-between"],[3,"totalCredits","totalDebits"],["header","Permission not allowed"],[1,"m-0"]],template:function(i,t){i&1&&E(0,om,19,21,"div",1)(1,sm,3,0,"p-card",2),i&2&&(d("ngIf",t.listActionIsValid),o(),d("ngIf",!t.listActionIsValid))},dependencies:[he,we,O,ze,ne,Ge,Qe,Ke,rt,U,oe,R,q,Se,ce,z,it,at,Ue,He,be,Fi,$n,ea,T,j],encapsulation:2})}}return r})();var ia=(()=>{class r{constructor(e,i,t,s,_,D,le,de,tt){this.chargeAdminService=e,this.banqueService=i,this.compteService=t,this.compteChargeService=s,this.modePaiementService=_,this.caisseService=D,this.localService=le,this.typeChargeService=de,this.platformId=tt,this._charges=[],this._totalBanques=0,this._totalCaisses=0,this._totalCharges=0,this._totalDebitsBanques=0,this._totalCreditsBanques=0,this._totalDebitsCaisses=0,this._totalCreditsCaisses=0,this._totalInstantanees=0,this.comptsBanques=[],this.comptsCaisses=[],this.comptesInstantanees=[],this.dateFormatColumn="dd/MM/yyyy",this.exportButtonsBanques=[],this.exportButtonsCaisses=[],this.exportButtonsCharges=[],this._validChargeCode=!0,this._validChargeLabel=!0,this._validTypeChargeCode=!0,this._validTypeChargeStyle=!0,this._validLocalCode=!0,this.datePipe=w.injector.get(T),this.messageService=w.injector.get(W),this.confirmationService=w.injector.get(F),this.roleService=w.injector.get(N),this.router=w.injector.get(k),this.stringUtilService=w.injector.get(Z)}ngOnInit(){this.loadComptes(),this.loadModePaiements(),this.loadCompteCharges(),this.initExportButtons(),this.initChartData(),this.loadBanques(),this.loadCaisses(),this.loadCharges()}loadBanques(){this.banqueService.findPaginatedByCriteria(this.banqueService.criteria).subscribe(e=>{this.banqueService.items=e.list})}loadCaisses(){this.caisseService.findPaginatedByCriteria(this.caisseService.criteria).subscribe(e=>{this.caisseService.items=e.list})}loadCharges(){this.chargeAdminService.findAll().subscribe(e=>{this._charges=e,this.calculateChargeTotals()})}loadComptes(){this.compteService.findAllByCompteInstantaneeNotNull().subscribe(e=>{this.comptesInstantanees=e,this.calculateInstantaneeTotals()}),this.compteService.findAllByBanqueNotNull().subscribe(e=>{this.comptsBanques=e,this.calculateBanqueTotals()}),this.compteService.findAllByCaisseNotNull().subscribe(e=>{this.comptsCaisses=e,this.calculateCaisseTotals()})}loadModePaiements(){this.modePaiementService.findPaginatedByCriteria(this.modePaiementService.criteria).subscribe(e=>{this.modePaiementService.items=e.list})}loadCompteCharges(){this.compteChargeService.findPaginatedByCriteria(this.compteChargeService.criteria).subscribe(e=>{this.compteCharges=e.list.filter(i=>i.code!="CHARGE")})}calculateBanqueTotals(){this._totalBanques=this.comptsBanques.reduce((e,i)=>e+(i.solde||0),0),this._totalDebitsBanques=this.comptsBanques.reduce((e,i)=>e+(i.debit||0),0),this._totalCreditsBanques=this.comptsBanques.reduce((e,i)=>e+(i.credit||0),0)}calculateCaisseTotals(){this._totalCaisses=this.comptsCaisses.reduce((e,i)=>e+(i.solde||0),0),this._totalDebitsCaisses=this.comptsCaisses.reduce((e,i)=>e+(i.debit||0),0),this._totalCreditsCaisses=this.comptsCaisses.reduce((e,i)=>e+(i.credit||0),0)}calculateChargeTotals(){this._totalCharges=this._charges.reduce((e,i)=>e+(i.montant||0),0)}initExportButtons(){this.exportButtonsBanques=[{label:"Excel",icon:"pi pi-file-excel",command:()=>this.exportExcel("banques")},{label:"PDF",icon:"pi pi-file-pdf",command:()=>this.exportPdf("banques")},{label:"CSV",icon:"pi pi-file",command:()=>this.exportCSV("banques")}],this.exportButtonsCaisses=[{label:"Excel",icon:"pi pi-file-excel",command:()=>this.exportExcel("caisses")},{label:"PDF",icon:"pi pi-file-pdf",command:()=>this.exportPdf("caisses")},{label:"CSV",icon:"pi pi-file",command:()=>this.exportCSV("caisses")}],this.exportButtonsCharges=[{label:"Excel",icon:"pi pi-file-excel",command:()=>this.exportExcel("charges")},{label:"PDF",icon:"pi pi-file-pdf",command:()=>this.exportPdf("charges")},{label:"CSV",icon:"pi pi-file",command:()=>this.exportCSV("charges")}]}initChartData(){this.chartData={labels:["Banques","Caisses","Charges"],datasets:[{data:[this._totalBanques,this._totalCaisses,this._totalCharges],backgroundColor:["#42A5F5","#66BB6A","#FFA726"],hoverBackgroundColor:["#64B5F6","#81C784","#FFB74D"]}]},this.chartOptions={plugins:{legend:{position:"bottom"}}}}viewBanque(e){this.router.navigate(["/app/admin/finance/banque/view",e.id])}viewCaisse(e){this.router.navigate(["/app/admin/finance/caisse/view",e.id])}viewCharge(e){this.router.navigate(["/app/admin/finance/charge/view",e.id])}exportExcel(e){console.log(`Exporting ${e} to Excel...`)}exportPdf(e){console.log(`Exporting ${e} to PDF...`)}exportCSV(e){console.log(`Exporting ${e} to CSV...`)}get comptes(){return this.compteService.items}set comptes(e){this.compteService.items=e}get compteCharges(){return this.compteChargeService.items}set compteCharges(e){this.compteChargeService.items=e}get banques(){return this.banqueService.items}set banques(e){this.banqueService.items=e}get caisses(){return this.caisseService.items}set caisses(e){this.caisseService.items=e}get charges(){return this._charges}set charges(e){this._charges=e}get totalBanques(){return this._totalBanques}get totalCaisses(){return this._totalCaisses}get totalCharges(){return this._totalCharges}get totalInstantanees(){return this._totalInstantanees}get totalDebitsBanques(){return this._totalDebitsBanques}get totalCreditsBanques(){return this._totalCreditsBanques}get totalDebitsCaisses(){return this._totalDebitsCaisses}get totalCreditsCaisses(){return this._totalCreditsCaisses}calculateInstantaneeTotals(){this._totalInstantanees=this.comptesInstantanees.reduce((e,i)=>e+(i.solde||0),0)}static{this.\u0275fac=function(i){return new(i||r)(S(Je),S(_e),S(Q),S(xt),S(ve),S(pt),S(ke),S(Ze),S($))}}static{this.\u0275cmp=L({type:r,selectors:[["app-relever-generale"]],standalone:!1,decls:71,vars:23,consts:[[1,"container","mx-auto","p-4"],[1,"bg-white","shadow-md","rounded-lg"],[1,"border-b","p-4","flex","justify-between","items-center","bg-blue-200","text-white"],[1,"text-xl","font-semibold"],[1,"p-4"],[1,"grid"],[1,"col-12"],[1,"card","mb-4"],[1,"mb-3","font-medium"],[1,"pi","pi-info-circle","mr-2"],[1,"flex","flex-wrap","align-items-center","justify-content-between","mb-2"],[1,"col-12","md:col-4","lg:col-4"],[1,"card","shadow-2","mb-3"],[1,"flex","justify-content-between","mb-3"],[1,"text-left"],[1,"block","text-500","font-medium","mb-3"],[1,"text-900","font-medium","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-blue-100","border-round",2,"width","2.5rem","height","2.5rem"],[1,"pi","pi-money-bill","text-blue-500","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-green-100","border-round",2,"width","2.5rem","height","2.5rem"],[1,"pi","pi-wallet","text-green-500","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-red-100","border-round",2,"width","2.5rem","height","2.5rem"],[1,"pi","pi-minus-circle","text-red-500","text-xl"],[1,"card","shadow-2","bg-primary"],[1,"flex","justify-content-between"],[1,"block","text-white","font-medium","mb-3"],[1,"text-white","font-medium","text-2xl"],[1,"flex","align-items-center","justify-content-center","bg-white","border-round",2,"width","2.5rem","height","2.5rem"],[1,"pi","pi-calculator","text-primary","text-xl"],[1,"card","shadow-2","bg-blue-500"]],template:function(i,t){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),l(4),p(5,"translate"),n()(),a(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"h5",8),C(11,"i",9),l(12," R\xE9sum\xE9 des Comptes "),n(),a(13,"div",5)(14,"div",6)(15,"div",10)(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"span",15),l(21,"Total Banques "),n(),a(22,"div",16),l(23),p(24,"currency"),n()(),a(25,"div",17),C(26,"i",18),n()()()(),a(27,"div",11)(28,"div",12)(29,"div",13)(30,"div",14)(31,"span",15),l(32,"Total Caisses "),n(),a(33,"div",16),l(34),p(35,"currency"),n()(),a(36,"div",19),C(37,"i",20),n()()()(),a(38,"div",11)(39,"div",12)(40,"div",13)(41,"div",14)(42,"span",15),l(43,"Total Charges "),n(),a(44,"div",16),l(45),p(46,"currency"),n()(),a(47,"div",21),C(48,"i",22),n()()()(),a(49,"div",6)(50,"div",23)(51,"div",24)(52,"div",14)(53,"span",25),l(54,"Relev\xE9 G\xE9n\xE9ral ( Banques + Caisses )"),n(),a(55,"div",26),l(56),p(57,"currency"),n()(),a(58,"div",27),C(59,"i",28),n()()()(),a(60,"div",6)(61,"div",29)(62,"div",24)(63,"div",14)(64,"span",25),l(65,"Relev\xE9 G\xE9n\xE9ral Provisoire ( RG + C I E - C I D )"),n(),a(66,"div",26),l(67),p(68,"currency"),n()(),a(69,"div",27),C(70,"i",28),n()()()()()()()()()()()()()),i&2&&(o(4),h(c(5,6,"Relev\xE9 G\xE9n\xE9ral")),o(19),h(G(24,8,t.totalBanques,"MAD")),o(11),h(G(35,11,t.totalCaisses,"MAD")),o(11),h(G(46,14,t.totalCharges,"MAD")),o(11),h(G(57,17,t.totalBanques+t.totalCaisses,"MAD")),o(11),h(G(68,20,t.totalBanques+t.totalCaisses-t.totalInstantanees,"MAD")))},dependencies:[$i,j],styles:[".container[_ngcontent-%COMP%]{max-width:1400px}.container[_ngcontent-%COMP%]   .shadow-md[_ngcontent-%COMP%]{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.container[_ngcontent-%COMP%]   .rounded-lg[_ngcontent-%COMP%]{border-radius:.5rem}.bg-blue-200[_ngcontent-%COMP%]{background-color:#90caf9;color:#1565c0!important;border-radius:.5rem .5rem 0 0}.bg-blue-200[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1565c0}.bg-blue-200[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1565c0;transition:background-color .3s}.bg-blue-200[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0d47a1}.card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a;border-radius:8px;margin-bottom:1.5rem;padding:1.25rem;background-color:#fff}.card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:1rem;display:flex;align-items:center}.card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;color:#007bff}.card.shadow-2[_ngcontent-%COMP%]{box-shadow:0 4px 10px #00000026;transition:transform .2s}.card.shadow-2[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.card.bg-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.text-500[_ngcontent-%COMP%]{color:#6c757d}.text-900[_ngcontent-%COMP%]{color:#212529}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.bg-blue-100[_ngcontent-%COMP%]{background-color:#bbdefb}.bg-green-100[_ngcontent-%COMP%]{background-color:#c8e6c9}.bg-red-100[_ngcontent-%COMP%]{background-color:#ffcdd2}.text-blue-500[_ngcontent-%COMP%]{color:#2196f3}.text-green-500[_ngcontent-%COMP%]{color:#4caf50}.text-red-500[_ngcontent-%COMP%]{color:#f44336}[_nghost-%COMP%]     .p-datatable .p-datatable-thead>tr>th{background-color:#f8f9fa;color:#495057;font-weight:600;padding:.75rem;border-width:0 0 1px 0;border-color:#e9ecef}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.75rem;border-width:0 0 1px 0;border-color:#e9ecef}[_nghost-%COMP%]     .p-datatable .p-datatable-footer{background-color:#f8f9fa;font-weight:600;padding:.75rem 1rem;border-width:0 0 1px 0;border-color:#e9ecef}[_nghost-%COMP%]     .p-button.p-button-sm{font-size:.875rem;padding:.4rem}[_nghost-%COMP%]     .p-button.p-button-info{background-color:#2196f3;border-color:#2196f3}[_nghost-%COMP%]     .p-button.p-button-info:hover{background-color:#1976d2;border-color:#1976d2}[_nghost-%COMP%]     .p-tag{padding:.25rem .5rem;font-size:.75rem}[_nghost-%COMP%]     .p-tag.p-tag-success{background-color:#4caf50;color:#fff}[_nghost-%COMP%]     .p-tag.p-tag-warning{background-color:#ff9800;color:#fff}[_nghost-%COMP%]     .p-tag.p-tag-danger{background-color:#f44336;color:#fff}[_nghost-%COMP%]     .p-tag.p-tag-info{background-color:#2196f3;color:#fff}[_nghost-%COMP%]     .p-splitbutton .p-button{background-color:transparent;border-color:#007bff;color:#007bff}[_nghost-%COMP%]     .p-splitbutton .p-button:hover{background-color:#007bff1a}.doughnut-chart-container[_ngcontent-%COMP%]{height:300px;display:flex;align-items:center;justify-content:center}@media (max-width: 768px){.col-md-5[_ngcontent-%COMP%], .col-md-7[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%]{padding:1rem}}.font-bold[_ngcontent-%COMP%]{font-weight:700}.bg-gray-50[_ngcontent-%COMP%]{background-color:#f9fafb}.flex-wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.gap-2[_ngcontent-%COMP%]{gap:.5rem}"]})}}return r})();var rC=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=mi({type:r})}static{this.\u0275inj=pi({imports:[ji.forChild([{path:"",children:[{path:"action-permission",children:[{path:"list",component:_n,canActivate:[Le]}]},{path:"model-permission-user",children:[{path:"list",component:vn,canActivate:[Le]}]},{path:"role",children:[{path:"list",component:Cn,canActivate:[Le]}]},{path:"user",children:[{path:"list",component:gn,canActivate:[Le]}]},{path:"model-permission",children:[{path:"list",component:un,canActivate:[Le]}]},{path:"caisse",children:[{path:"list",component:Sn,canActivate:[Le]},{path:"create",component:wi,canActivate:[Le]}]},{path:"banque",children:[{path:"list",component:En,canActivate:[Le]},{path:"create",component:Ai,canActivate:[Le]}]},{path:"releve-general",component:ia,canActivate:[Le]},{path:"compte",children:[{path:"list",component:Vn,canActivate:[Le]}]},{path:"compte-admin",children:[{path:"list",component:Zn,canActivate:[Le]}]},{path:"compte-charge",children:[{path:"list",component:Qn,canActivate:[Le]},{path:"create",component:Vi,canActivate:[Le]}]},{path:"compte-instantanee",children:[{path:"list",component:ta,canActivate:[Le]},{path:"create",component:Fi,canActivate:[Le]}]},{path:"compte-locataire",children:[{path:"list",component:Ri,canActivate:[Le]}]},{path:"charge",children:[{path:"list",component:Nn,canActivate:[Le]},{path:"create",component:Di,canActivate:[Le]}]},{path:"compte-locataire",children:[{path:"list",component:Ri,canActivate:[Le]}]}]}]),ji]})}}return r})();export{km as a,rC as b};
